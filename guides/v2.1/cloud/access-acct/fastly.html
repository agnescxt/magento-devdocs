<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>快速设置 | Magento 2 Developer Documentation</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">

	<link rel="stylesheet" href="/assets/css/app.css" />
	<link rel="stylesheet" href="/assets/css/print.css" media="print"/>

	<link rel="stylesheet" href="/common/css/devdocs.css" />

	<script>
  var baseUrl = "";
  var algolia = {
    id : "E642SEDTHL",
    index:  "devdocs",
    key:  "d2d0f33ab73e291ef8d88d8b565e754c"
  };
</script>




	<link rel="canonical" href="/guides/v2.1/cloud/access-acct/fastly.html">

	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body class="layout-default">

	<header class="site-header">

		<nav class="site-nav">

  <div class="menu-btn">
    <a id="menu-btn" class="menu-trigger menu-icon" href="#nav-main" aria-haspopup="true" aria-controls="nav-main"></a>
  </div>

  <div class="nav-container">

    <a class="logo" href="/guides/v2.1/">
      <img src="/assets/i/m-logo.svg" alt=""><img src="/assets/i/magento-logo.svg" alt="Magento" class="magento-logo" />
      <span class="site-logo">DevDocs</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      
<div class="version-switcher dropdown" data-version="2.1">
	<button id="version-switcher-button" class="btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Magento 2.1
	</button>

	<ul class="dropdown-menu dropdown-menu-left" aria-labelledby="version-switcher-button">
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.0/cloud/access-acct/fastly.html">Magento 2.0</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.1/cloud/access-acct/fastly.html">Magento 2.1</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.2/cloud/access-acct/fastly.html">Magento 2.2</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.3/cloud/access-acct/fastly.html">Magento 2.3 Pre-release</a></li>
	
  </ul>

</div>


      <!-- Main Navigation -->
<ul class="nav-main" role="menubar">

  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">部署</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          <li><a href="/guides/v2.1/install-gde/bk-install-guide.html">安装向导</a></li>
          
          <li><a href="/guides/v2.1/comp-mgr/bk-compman-upgrade-guide.html">组件管理和系统升级手册</a></li>
          
          <li><a href="/guides/v2.1/config-guide/bk-config-guide.html">配置手册</a></li>
          
          <li><a href="/guides/v2.1/migration/bk-migration-guide.html">迁移指引</a></li>
          <li><a href="/guides/v2.1/cloud/bk-cloud.html">上云指引</a></li>
          <li><a href="/magento-release-information.html">版本日志</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">开发</span>

    <div class="nav-popup" role="menu" aria-hidden="true">

      <div class="nav-section">
        <div class="nav-section-title">服务端</div>
        <ul>
          <li><a href="/guides/v2.1/architecture/bk-architecture.html">架构说明</a></li>
          <li><a href="/guides/v2.1/extension-dev-guide/bk-extension-dev-guide.html">PHP开发文档</a></li>
          <li><a href="/guides/v2.1/ext-best-practices/bk-ext-best-practices.html">扩展开发实践</a></li>
          <li><a href="/guides/v2.1/mrg/intro.html">各模块介绍</a></li>
          <li><a href="/guides/v2.1/coding-standards/bk-coding-standards.html">编码规范</a></li>
          <li><a href="/guides/v2.1/contributor-guide/contributing.html">贡献指引</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">前端</div>
        <ul>
          <li class=""><a href="/guides/v2.1/frontend-dev-guide/bk-frontend-dev-guide.html">前端工程师手册</a></li>
          
          <li><a href="/guides/v2.1/ui_comp_guide/bk-ui_comps.html">UI组件手册</a></li>
          
          <li><a href="/guides/v2.1/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript开发手册</a></li>
          <li><a href="/guides/v2.1/pattern-library/bk-pattern.html">管理面板设计模式及所用库</a></li>
          <li><a href="/guides/v2.1/design-styleguide/bk-styleguide.html">管理面板样式手册</a></li>
          <li><a href="https://magento-research.github.io/pwa-devdocs/">PWA Studios</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title"><abbr>API</abbr></div>
        <ul>
          <li><a href="/guides/v2.1/get-started/bk-get-started-api.html">Web APIs起步</a></li>
          <li><a href="/guides/v2.1/rest/bk-rest.html">REST API参考</a></li>
          <li><a href="/guides/v2.1/soap/bk-soap.html">SOAP API参考</a></li>
          
          
          <li><a href="/guides/v2.1/marketplace/eqp/api.html">Marketplace EQP API Reference</a></li>
          
        </ul>
      </div>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">测试</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        <li><a href="/guides/v2.1/test/testing.html">Magento测试手册</a></li>
        
        <li><a href="/guides/v2.1/mtf/mtf_introduction.html">功能测试</a></li>
        <li><a href="/guides/v2.1/test/integration/integration_test_execution.html">集成测试</a></li>
        <li><a href="/guides/v2.1/test/js/jasmine.html">JavaScript单元测试</a></li>
        <li><a href="/guides/v2.1/test/unit/unit_test_execution.html">PHP单元测试</a></li>
        <li><a href="/guides/v2.1/get-started/web-api-functional-testing.html">Web API功能测试</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-separator"></li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">功能文档</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          
        
        <li><a href="/guides/v2.1/howdoi/checkout/checkout_overview.html">Checkout</a></li>
        <li><a href="/guides/v2.1/payments-integrations/bk-payments-integrations.html">支付集成</a></li>
        
          <li><a href="/guides/v2.1/extension-dev-guide/staging.html">Staging</a></li>
        
      </ul>
    </div>

  </li>


  <li class="nav-main-item"  tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">指引</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        <li><a href="/guides/v2.1/howdoi/bk-how-do-i.html">如何</a></li>
        
        <li><a  data-proofer-ignore href="/guides/v2.1/get-started/order-tutorial/order-intro.html">使用EST APIs处理订单</a></li>
        

        <li><a href="/videos/">视频教程</a></li>
      </ul>
    </div>

  </li>

</ul><!-- /.nav-main -->

    </div>

    <div class="search-btn">
      <a class="search-trigger search-icon" href="#"></a>
    </div>

    <form class="quick-search" action="/guides/v2.1/search.html" method="get" novalidate="novalidate">
      <input type="search" name="q" placeholder="Search" />
      <a href="#" class="quick-search-close">&times;</a>
    </form>

  </div>

</nav><!-- #site-nav -->
<div class="nav-main-fader"></div>


	</header>

	<div class="global-wrapper">

		<div class="main-container">
			<a id="main-content"></a>


<div class="content-container">

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" data-proofer-ignore class="toc-toggler">内容表格</a>
	<div class="sidebar-wrapper">

		

		<h4 class="guide-title"></h4>
		<div class="collapsible-navigation">
		    <ul>
		    
		    	

<li class="nav-level1  " id="欢迎使用magento企业版(云支持版)">
    

    
    <a href="/guides/v2.1/cloud/bk-cloud.html">欢迎使用Magento企业版(云支持版)</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="订阅和计划">

            

            
            <a href="/guides/v2.1/cloud/basic-information/cloud-plans.html">订阅和计划</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="新手上路任务">

            

            
            <a href="/guides/v2.1/cloud/onboarding/onboarding-tasks.html">新手上路任务</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="architecture">
    

    
    <a href="/guides/v2.1/cloud/architecture/cloud-architecture.html">Architecture</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="架构起步">

            

            
            <a href="/guides/v2.1/cloud/basic-information/starter-architecture.html">架构起步</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="开发和部署工作流起步">

            

            
            <a href="/guides/v2.1/cloud/basic-information/starter-develop-deploy-workflow.html">开发和部署工作流起步</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="pro-architecture">

            

            
            <a href="/guides/v2.1/cloud/architecture/pro-architecture.html">Pro architecture</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="pro-develop-and-deploy-workflow">

            

            
            <a href="/guides/v2.1/cloud/architecture/pro-develop-deploy-workflow.html">Pro develop and deploy workflow</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="pro-architecture-(legacy)">

            

            
            <a href="/guides/v2.1/cloud/architecture/pro-architecture-legacy.html">Pro architecture (legacy)</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="add-staging-and-production-to-pro-projects-ui">

            

            
            <a href="/guides/v2.1/cloud/trouble/pro-env-management.html">Add Staging and Production to Pro projects UI</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="技术和要求">
    

    
    <a href="/guides/v2.1/cloud/requirements/cloud-requirements.html">技术和要求</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="composer">

            

            
            <a href="/guides/v2.1/cloud/reference/cloud-composer.html">Composer</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento-cloud-cli">

            

            
            <a href="/guides/v2.1/cloud/reference/cli-ref-topic.html">Magento Cloud CLI</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="git">

            

            
            <a href="/guides/v2.1/cloud/reference/git-integration.html">Git</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="bitbucket集成">

            

            
            <a href="/guides/v2.1/cloud/project/bitbucket-integration.html">Bitbucket集成</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="github集成">

            

            
            <a href="/guides/v2.1/cloud/project/project-integrate-github.html">Github集成</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="ssh和sftp">

            

            
            <a href="/guides/v2.1/cloud/env/environments-ssh.html">SSH和sFTP</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="new-relic-apm">

            

            
            <a href="/guides/v2.1/cloud/project/new-relic.html">New Relic APM</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="blackfire.io">

            

            
            <a href="/guides/v2.1/cloud/project/project-integrate-blackfire.html">Blackfire.io</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="sendgrid">

            

            
            <a href="/guides/v2.1/cloud/project/sendgrid.html">SendGrid</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="本地环境设置">
    

    
    <a href="/guides/v2.1/cloud/access-acct/first-time-setup.html">本地环境设置</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="本地环境设置准备">

            

            
            <a href="/guides/v2.1/cloud/before/before-workspace.html">本地环境设置准备</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="安装magento所需的必要软件">

            

            
            <a href="/guides/v2.1/cloud/before/before-workspace-magento-prereqs.html">安装Magento所需的必要软件</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="启用ssh密钥登录">

            

            
            <a href="/guides/v2.1/cloud/before/before-workspace-ssh.html">启用ssh密钥登录</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="设置magento文件系统所有者">

            

            
            <a href="/guides/v2.1/cloud/before/before-workspace-file-sys-owner.html">设置Magento文件系统所有者</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="克隆并开发项目分支">

            

            
            <a href="/guides/v2.1/cloud/before/before-setup-env-2_clone.html">克隆并开发项目分支</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="安装magento">

            

            
            <a href="/guides/v2.1/cloud/before/before-setup-env-install.html">安装Magento</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="首次部署">

            

            
            <a href="/guides/v2.1/cloud/access-acct/first-time-deploy.html">首次部署</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="可选---安装样本数据">

            

            
            <a href="/guides/v2.1/cloud/howtos/sample-data.html">可选 - 安装样本数据</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="可选---配置xdebug">

            

            
            <a href="/guides/v2.1/cloud/howtos/debug.html">可选 - 配置Xdebug</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="导入现存的代码到项目">
    

    
    <a href="/guides/v2.1/cloud/access-acct/first-time-setup_import-first-steps.html">导入现存的代码到项目</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="prepare-your-existing-magento-commerce-system">

            

            
            <a href="/guides/v2.1/cloud/access-acct/first-time-setup_import-prepare.html">Prepare your existing Magento Commerce system</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="import-magento-commerce-into-magento企业版(云支持版)">

            

            
            <a href="/guides/v2.1/cloud/access-acct/first-time-setup_import-import.html">Import Magento Commerce into Magento企业版(云支持版)</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="配置你的网店">
    

    
    <a href="/guides/v2.1/cloud/configure/configuration-overview.html">配置你的网店</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="网店配置最佳实践">

            

            
            <a href="/guides/v2.1/cloud/configure/configure-best-practices.html">网店配置最佳实践</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="set-up-paypal">

            

            
            <a href="/guides/v2.1/cloud/live/paypal-onboarding.html">Set up PayPal</a>
            

            
        </li>
        
        
        
        
        
        
        <li class="nav-level2  " id="设置定时任务">

            

            
            <a href="/guides/v2.1/cloud/configure/setup-cron-jobs.html">设置定时任务</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="set-up-multiple-cloud-websites-or-stores">

            

            
            <a href="/guides/v2.1/cloud/project/project-multi-sites.html">Set up multiple Cloud websites or stores</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="安装，管理及升级模块">

            

            
            <a href="/guides/v2.1/cloud/howtos/install-components.html">安装，管理及升级模块</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="安装一个主题">

            

            
            <a href="/guides/v2.1/cloud/howtos/custom-theme.html">安装一个主题</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="快速配置">
    

    
    <a href="/guides/v2.1/cloud/basic-information/cloud-fastly.html">快速配置</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2 active " id="快速设置">

            

            
            <a href="/guides/v2.1/cloud/access-acct/fastly.html">快速设置</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="快速定制vcl片段">

            

            
            <a href="/guides/v2.1/cloud/configure/cloud-vcl-custom-snippets.html">快速定制VCL片段</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="定制vcl白名单">

            

            
            <a href="/guides/v2.1/cloud/configure/fastly-vcl-whitelist.html">定制VCL白名单</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="定制vcl黑名单">

            

            
            <a href="/guides/v2.1/cloud/configure/fastly-vcl-blacklist.html">定制VCL黑名单</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="vcl自定义延长管理员超时">

            

            
            <a href="/guides/v2.1/cloud/configure/fastly-vcl-extend-timeout.html">VCL自定义延长管理员超时</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="vcl自定义自重向到wordpress">

            

            
            <a href="/guides/v2.1/cloud/configure/fastly-vcl-wordpress.html">VCL自定义自重向到WordPress</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="vcl自定义块坏引用">

            

            
            <a href="/guides/v2.1/cloud/configure/fastly-vcl-badreferer.html">VCL自定义块坏引用</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="快速故障排查">

            

            
            <a href="/guides/v2.1/cloud/trouble/trouble_fastly.html">快速故障排查</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="配置环境">
    

    
    <a href="/guides/v2.1/cloud/env/environments.html">配置环境</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="application">

            

            
            <a href="/guides/v2.1/cloud/project/project-conf-files_magento-app.html">Application</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="构建和部署">

            

            
            <a href="/guides/v2.1/cloud/project/magento-env-yaml.html">构建和部署</a>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="设置通知">
                    

                    
                    <a  href="/guides/v2.1/cloud/env/setup-notifications.html">设置通知</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="日志处理">
                    

                    
                    <a  href="/guides/v2.1/cloud/env/log-handlers.html">日志处理</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="小向导">
                    

                    
                    <a  href="/guides/v2.1/cloud/env/smart-wizards.html">小向导</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="环境变量">

            

            
            <a href="/guides/v2.1/cloud/env/variables-intro.html">环境变量</a>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="应用程序变量">
                    

                    
                    <a  href="/guides/v2.1/cloud/env/environment-vars_magento.html">应用程序变量</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="构建变量">
                    

                    
                    <a  href="/guides/v2.1/cloud/env/variables-build.html">构建变量</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="云变量">
                    

                    
                    <a  href="/guides/v2.1/cloud/env/variables-cloud.html">云变量</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="deploy-variables">
                    

                    
                    <a  href="/guides/v2.1/cloud/env/variables-deploy.html">Deploy variables</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="部署后变量">
                    

                    
                    <a  href="/guides/v2.1/cloud/env/variables-post-deploy.html">部署后变量</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="在变量下工作">
                    

                    
                    <a  href="/guides/v2.1/cloud/env/working-with-variables.html">在变量下工作</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="routes">

            

            
            <a href="/guides/v2.1/cloud/project/project-conf-files_routes.html">Routes</a>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="caching">
                    

                    
                    <a  href="/guides/v2.1/cloud/project/project-routes-more-cache.html">Caching</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="redirects">
                    

                    
                    <a  href="/guides/v2.1/cloud/project/project-routes-more-redir.html">Redirects</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="服务端引入">
                    

                    
                    <a  href="/guides/v2.1/cloud/project/project-routes-more-ssi.html">服务端引入</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="services">

            

            
            <a href="/guides/v2.1/cloud/project/project-conf-files_services.html">Services</a>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="设置mysql服务">
                    

                    
                    <a  href="/guides/v2.1/cloud/project/project-conf-files_services-mysql.html">设置MySQL服务</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="设置redis服务">
                    

                    
                    <a  href="/guides/v2.1/cloud/project/project-conf-files_services-redis.html">设置Redis服务</a>
                    

                    
                </li>
                
                

                
                

                
                
                <li class="nav-level3  " id="设置elasticsearch服务">
                    

                    
                    <a  href="/guides/v2.1/cloud/project/project-conf-files_services-elastic.html">设置Elasticsearch服务</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="设置rabbitmq服务">
                    

                    
                    <a  href="/guides/v2.1/cloud/project/project-conf-files_services-rabbit.html">设置RabbitMQ服务</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="网店设置的配置管理">
    

    
    <a href="/guides/v2.1/cloud/live/sens-data-over.html">网店设置的配置管理</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="管理系统特定配置的示例">

            

            
            <a href="/guides/v2.1/cloud/live/sens-data-initial.html">管理系统特定配置的示例</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="管理你的项目">
    

    
    <a href="/guides/v2.1/cloud/project/projects.html">管理你的项目</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="配置你的项目">

            

            
            <a href="/guides/v2.1/cloud/project/project-webint-basic.html">配置你的项目</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="项目结构">

            

            
            <a href="/guides/v2.1/cloud/project/project-start.html">项目结构</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="创建和管理用户">

            

            
            <a href="/guides/v2.1/cloud/project/user-admin.html">创建和管理用户</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="manage-branches-with-the-interface">

            

            
            <a href="/guides/v2.1/cloud/project/project-webint-branch.html">Manage branches with the Interface</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="使用命令行管理分支">

            

            
            <a href="/guides/v2.1/cloud/env/environments-start.html">使用命令行管理分支</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="快照和备份管理">

            

            
            <a href="/guides/v2.1/cloud/project/project-webint-snap.html">快照和备份管理</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="部署你的网店">
    

    
    <a href="/guides/v2.1/cloud/live/stage-prod-live.html">部署你的网店</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="部署过程">

            

            
            <a href="/guides/v2.1/cloud/reference/discover-deploy.html">部署过程</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="continuous-deployment">

            

            
            <a href="/guides/v2.1/cloud/deploy/continuous-deployment.html">Continuous deployment</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="保护块">

            

            
            <a href="/guides/v2.1/cloud/live/live-prot.html">保护块</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="在本地构建和部署">

            

            
            <a href="/guides/v2.1/cloud/live/live-sanity-check.html">在本地构建和部署</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="准备部署准生产和生产环境">

            

            
            <a href="/guides/v2.1/cloud/live/stage-prod-migrate-prereq.html">准备部署准生产和生产环境</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="部署代码并迁移静态文件和数据">

            

            
            <a href="/guides/v2.1/cloud/live/stage-prod-migrate.html">部署代码并迁移静态文件和数据</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="测试部署">

            

            
            <a href="/guides/v2.1/cloud/live/stage-prod-test.html">测试部署</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="上线和发布">
    

    
    <a href="/guides/v2.1/cloud/live/live.html">上线和发布</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="上线检查">

            

            
            <a href="/guides/v2.1/cloud/live/go-live-checklist.html">上线检查</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="发布步骤">

            

            
            <a href="/guides/v2.1/cloud/live/launch-steps.html">发布步骤</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="故障排除">
    

    
    <a href="/guides/v2.1/cloud/trouble/trouble.html">故障排除</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="部署故障排查">

            

            
            <a href="/guides/v2.1/cloud/access-acct/trouble.html">部署故障排查</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="查看日志排查故障">

            

            
            <a href="/guides/v2.1/cloud/trouble/environments-logs.html">查看日志排查故障</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="证书不正确">

            

            
            <a href="/guides/v2.1/cloud/trouble/trouble_ce-creds.html">证书不正确</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="新项目的问题解决">

            

            
            <a href="/guides/v2.1/cloud/trouble/trouble_proj-startover.html">新项目的问题解决</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="组件部署失败">

            

            
            <a href="/guides/v2.1/cloud/trouble/trouble_comp-deploy-fail.html">组件部署失败</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="redis问题排查">

            

            
            <a href="/guides/v2.1/cloud/trouble/redis-troubleshooting.html">Redis问题排查</a>
            

            
        </li>
        
        
        
        
        
        
        <li class="nav-level2  " id="解决加密密钥问题">

            

            
            <a href="/guides/v2.1/cloud/trouble/trouble-crypt-key-variable.html">解决加密密钥问题</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="解决html最小化问题">

            

            
            <a href="/guides/v2.1/cloud/trouble/trouble-error-html-minification.html">解决HTML最小化问题</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="解决部署期间的google分析问题">

            

            
            <a href="/guides/v2.1/cloud/trouble/trouble-google-analytics-deploy.html">解决部署期间的google分析问题</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="恢复配置文件">

            

            
            <a href="/guides/v2.1/cloud/trouble/restore-configuration-files.html">恢复配置文件</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="站点可用性">

            

            
            <a href="/guides/v2.1/cloud/trouble/site-availability.html">站点可用性</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="添加站点地图和搜索引擎的robots文件">

            

            
            <a href="/guides/v2.1/cloud/trouble/robots-sitemap.html">添加站点地图和搜索引擎的robots文件</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="主题问题排查">

            

            
            <a href="/guides/v2.1/cloud/trouble/theme-troubleshooting.html">主题问题排查</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="消息队列">

            

            
            <a href="/guides/v2.1/cloud/trouble/message-queues.html">消息队列</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="升级和补丁">
    

    
    <a href="/guides/v2.1/cloud/project/project-upgrade-parent.html">升级和补丁</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="patch-cloud工具">

            

            
            <a href="/guides/v2.1/cloud/composer-packages/ece-tools.html">Patch Cloud工具</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento企业版(云支持版)补丁">

            

            
            <a href="/guides/v2.1/cloud/project/project-patch.html">Magento企业版(云支持版)补丁</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento企业版(云支持版)升级">

            

            
            <a href="/guides/v2.1/cloud/project/project-upgrade.html">Magento企业版(云支持版)升级</a>
            

            
        </li>
        
        
        
        
    </ul>
    
</li>


		    
		    </ul>
		</div>

	</div>

</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	

  <nav class="breadcrumbs">

    <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      <li class="breadcrumb-item"><a class="breadcrumb-item" href="/guides/v2.1/"><span>首页</span></a></li>

    <!-- Iteration breadcrumb item -->
    
    

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">

        
          <a property="item" typeof="WebPage" href="/guides/v2.1/cloud/bk-cloud.html">
            <span property="name">欢迎使用Magento企业版(云支持版)</span>
          </a>
        

        <meta property="position" content="1" />
      </li>

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem">

        

          

          <span property="name">快速设置</span>

        

        <meta property="position" content="2" />
      </li>

    

    </ol>

  </nav>



	

	

	<h1 class="page-heading">快速设置</h1>

  


</section>

			<p><a href="/guides/v2.1/cloud/basic-information/cloud-fastly.html">Fastly</a>需要是Magento企业版(云支持版)，并且是适用于准生产环境和生产环境。它以Varnish来提升缓存性能，及以<span term-uuid="f83f1fa7-7a64-467b-b629-c2d0c25d2e7f" class="glossary-term" data-toggle="popover">内容分发网络</span>(CDN)提供静态资源加速，Fastly不能在集成环境中运行。</p>

<p>这些信息帮助你开始安装和配置Fastly。我们为后台和Origin shields(一种安全产品)提供附加的信息和错误/维护页面及VCL代码片段</p>

<p>对于VCL代码片段，高级的配置经历写代码的开发是必要的</p>

<p>配置Fastly的过程包括:</p>

<ul>
  <li>在集成中安装Fastly模块</li>
  <li>在准测试环境和生产环境布署代码</li>
  <li>Fastly配置证书和设置</li>
  <li>高级配置，包含VCL代码块</li>
</ul>

<h2 id="多fastly账号和分配的域名domain">多Fastly账号和分配的域名{#domain}</h2>
<p>在启动 Magento企业版(云支持版)之前，你可能已经有一个Fastly账号或试用帐号，并且把你的顶级或子域名分配给了它。作为建议，你将须要从现存的Fastly账号上移除所有你计划使用在 Magento企业版(云支持版)上的顶级和子域名</p>

<p>Fastly仅允许一个顶级域名和所有子域名分配到一个简单的Fastly服务及账号上，例如，如果你有一个顶级域名mystore.com及其子域名shoes.mystore.com和socks.mystore.com，它们被一个现存的Fastly账号管理，在上线Fastly和Magento企业版(云支持版)之前，你须要从帐号中将它们移除</p>

<p>更多细节，请参考你的Fastly帐号和<a href="https://docs.fastly.com/">文档</a>来移除这些域名，文档中也包含移除移除及更新CNAME记录等说明。</p>

<h2 id="cloud-fastly-creds">获取你的Fastly证书</h2>
<p>要获取Fastly证书，打开一个<a href="/guides/v2.1/cloud/trouble/trouble.html">support ticket</a>。你必须提供你的完全合格的域名。</p>

<p>我们将为你的准生产环境和生产环境提供给你下面的认证信息</p>

<ul>
  <li>Fastly服务ID</li>
  <li>Fastly API访问令牌</li>
</ul>

<p>你也可以在准生产环境和生产环境的<code class="highlighter-rouge">/mnt/shared/fastly_tokens.txt</code>文件中找到这些认证信息。你可以通过SSH连接到服务器来验证是否在此路径。如果你没有找到这个文件，请提交一个工单来获取<a href="/guides/v2.1/cloud/trouble/trouble.html">支持</a>，要求添加这个文件，我们会帮助提供认证文件。</p>

<div class="bs-callout bs-callout-warning">
  <p>记下在哪个环境使用了哪些认证信息。如果你在一个环境使用了错误的认证信息，Fastly会遇到问题</p>
</div>

<h2 id="cloud-fastly-start">起步</h2>
<p>你须要安装Fastly在它自己的分支，微调Fastly是一个复杂的过程，依赖于你的需求和网店大小。如果你已经有一个工作的分支或知道如何创建分支，可以跳转到<a href="#cloud-fastly-setup">安装Fastly</a>.</p>

<p>创建分支:</p>

<div>

  <ol>
    <li>Log in to your local development system, or switch to, the <a href="/guides/v2.1/cloud/before/before-workspace-file-sys-owner.html">Magento文件系统所有者</a>.</li>
    <li>Change to a directory to which the Magento文件系统所有者 has write access.</li>
    <li>
      <p>Enter the following command in a terminal to log in to your project:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud login
</code></pre></div>      </div>
    </li>
    <li>
      <p>List your projects. With the project ID, you can complete additional commands.</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud project:list
</code></pre></div>      </div>
    </li>
    <li>
      <p>If necessary, clone the project to your local. You should have cloned when setting up your local development workspace.</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud project:get &lt;project ID&gt;
</code></pre></div>      </div>
    </li>
    <li>Change to a project directory. 例如， <code class="highlighter-rouge">cd /var/www/html/magento2</code></li>
    <li>
      <p>List environments in the project. Every environment includes an active Git branch of your code, database, environment variables, configurations, and services.</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud environment:list
</code></pre></div>      </div>

      <div class="bs-callout bs-callout-info" id="info">
  		<p><code>magento-cloud environment:list</code> displays environment hierarchies whereas <code>git branch</code> displays does not. If you have any nested environments, use <code>magento-cloud environment:list</code> to see the full list.</p>
</div>
    </li>
    <li>
      <p>Fetch origin branches to get the latest code:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git fetch origin
</code></pre></div>      </div>
    </li>
    <li>
      <p>Check out, or switch to, a specific branch and environment. Git commands only checkout the Git branch. The Magento Cloud command also switches to the active environment.</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud environment:checkout &lt;environment ID&gt;
</code></pre></div>      </div>

      <p>To create a new environment, use <code class="highlighter-rouge">magento-cloud environment:branch &lt;environment name&gt; &lt;parent environment ID&gt;</code></p>
    </li>
    <li>
      <p>Pull any updated code to your local for the environment ID (which is the Git branch):</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git pull origin &lt;environment ID&gt;
</code></pre></div>      </div>
    </li>
    <li>
      <p>Create a <a href="/guides/v2.1/cloud/project/project-webint-snap.html">snapshot</a> of the environment as a backup:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud snapshot:create -e &lt;environment ID&gt;
</code></pre></div>      </div>
    </li>
  </ol>

  <h2 id="cloud-fastly-setup">安装Fastly到一个集成分支并部署</h2>
  <p>你应该在你本地安装Fastly模块，推送代码来集成和部署到准生产环境和生产环境。对于Magento企业版(云支持版) 2.2，安装Fastly模块的1.2.33或更新，来为所有更新的配置及完整的VCL代码片段上传支持。</p>

  <div class="bs-callout bs-callout-warning">
    <p>不要在构建和部署之前在本地配置此模块，你将在它们各自的环境中配置模块。</p>

    <p>我们建议使用<code class="highlighter-rouge">bin/magento magento-cloud:scd-dump</code>命令来进行配置管理(<a href="https://devdocs.magento.com/guides/v2.1/cloud/live/sens-data-over.html#cloud-config-specific-recomm">2.1.X</a>, <a href="https://devdocs.magento.com/guides/v2.2/cloud/live/sens-data-over.html#cloud-config-specific-recomm">2.2.X</a>)。如果你在准生产和生产环境中使用 <code class="highlighter-rouge">app:config:dump</code>命令，所有的Fastly的配置项会被锁定，不允许编辑。</p>
  </div>

  <p>我们仅为你的准生产和生产环境提供Fastly服务。你不能在集成环境中使用Fastly服务。</p>

  <ol>
    <li>
      <p>在你本地环境根目录，使用终端按以下顺序输入下面的命：</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>composer config repositories.fastly-magento2 git "https://github.com/fastly/fastly-magento2.git"
composer require fastly/magento2
</code></pre></div>      </div>
    </li>
    <li>等待依赖更新</li>
    <li>
      <p>输入下面的命令完整更新并清除缓存</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>php bin/magento setup:upgrade &amp;&amp; php bin/magento cache:clean
</code></pre></div>      </div>
    </li>
    <li>
      <p>编辑你的composer.json文件并确保Fasty模块引入正确的版本。.</p>

      <ul>
        <li>在”require”节点中，要包含<code class="highlighter-rouge">"fastly/magento2": &lt;version number&gt;</code></li>
        <li>
          <p>在”repositories”节点中，要包含:</p>

          <p>“fastly-magento2”: {
              “url”: “https://github.com/fastly/fastly-magento2.git”
  }</p>
        </li>
      </ul>
    </li>
    <li>
      <p>使用下面的命令添加，提交及推送修改到你的代码仓库：</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git add -A; git commit -m "Install Fastly"; git push origin &lt;branch name&gt;
</code></pre></div>      </div>
    </li>
    <li>与<code class="highlighter-rouge">master</code>集成分支合并分支代码。</li>
    <li><a href="/guides/v2.1/cloud/live/stage-prod-live.html">部署</a>代码到准生产和生产环境</li>
  </ol>

  <p>部署后，你可以在准生产和生产环境上登录到管理员面板来配置Fastly的认证和设置。这给了你在不同环境按需配置不同缓存特征的灵活性，包括VCL代码片段。</p>

  <h2 id="cloud-fastly-config">使用Magenot管理面板启用和配置Fastly</h2>
  <p>要开始配置Fastly,你须要在准生产和生产环境中输入和测试Fastly的认证信息。认证信息测试成功之后，你才可以继续高级配置和<a href="#custom-vcl">VCL snippets</a></p>

  <p>我们为你的准生产和生产环境提供你的Fastly服务ID和API访问密钥(或令牌)。这些认证信息每个环境是不同的。请确保你使用的是正确的认证信息。</p>

  <p>在准生产和生产环境完成以下配置步骤：</p>

  <ol>
    <li>以管理员身份登录你的Magento管理面板。</li>
    <li>点击 <strong>Stores</strong> &gt; <strong>Settings</strong> &gt; <strong>Configuration</strong> &gt; <strong>Advanced</strong> &gt; <strong>System</strong>.</li>
    <li>
      <p>在右侧栏，展开<strong>Full Page Cache</strong>.</p>

      <p><img src="http://devdocs.magento.com/common/images/cloud_fastly_menu.png" alt="Expand to select Fastly" width="650px" /></p>
    </li>
    <li>
      <p>For <strong>Caching Application</strong>, uncheck the <strong>Use system value</strong> check box and select <strong>Fastly CDN</strong> from the drop-down list.</p>

      <p><img src="http://devdocs.magento.com/common/images/cloud-fastly_enable-admin.png" alt="Choose Fastly" width="550px" /></p>
    </li>
    <li>展开<strong>Fastly Configuration</strong>。然后你可以<a href="https://github.com/fastly/fastly-magento2/blob/master/Documentation/CONFIGURATION.md#configure-the-module" target="\_blank">选择缓存选项</a>.</li>
    <li>完成后，点击页面顶部的<strong>Save Config</strong></li>
    <li>根据提示通知清除缓存。之后，导航回到<strong>Stores</strong> &gt; <strong>Configuration</strong> &gt; <strong>Advanced</strong> &gt; <strong>System</strong> &gt; <strong>Fastly Configuration</strong>续继你的配置。</li>
  </ol>

  <p>配置下面的特征并启用附加的<a href="https://github.com/fastly/fastly-magento2/blob/master/Documentation/CONFIGURATION.md#further-configuration-options" target="\_blank">配置选项</a>:</p>

  <ul>
    <li><a href="#upload-vcl-snippets">上传Fastly VCL代码片段</a></li>
    <li><a href="#backend">配置后台及Origin shielding</a></li>
    <li><a href="#fastly-errpg">创建自定义错误/维护页</a></li>
  </ul>

  <div class="bs-callout bs-callout-info" id="info">
    <ul>
      <li>忽略创建免费Fastly账号的链接。我们会提供你的Fastly认证信息(服务ID和API访问令牌)</li>
      <li>Fastly 1.2.0或更新(我们推荐使用1.2.33或更新),使用<strong>Upload VCL to Fastly</strong>按钮更新你默认的<a href="#custom-vcl">VCL代码片段</a>.</li>
    </ul>
  </div>

  <h2 id="upload-vcl-snippets">上传Fastly VCL代码片段</h2>
  <p>你不一定要创建或编写VCL代码片段，我们会为Fastly提供一个默认的代码片段。你只须要点击<strong>Upload VCL to Fastly</strong>完成这一步即可。</p>

  <p>安装的Fastly模块包含以下默认的驱动和Fastly集成的<a href="https://github.com/fastly/fastly-magento2/tree/master/etc/vcl_snippets" target="\blank">VCL snippets</a>，这些VCL代码片段在你上传之前是无效的。当你点击上传，你就为你的特定的服务ID和扩展推送了这些VCL代码片段到你的Fastly。</p>

  <p>对于VCL代码片段的开发者，这些默认的代码片段是事先准备好的，名字是<code class="highlighter-rouge">magentomodule_</code>，优先级是50。你不应该使用这个预选准备好的名字给你自己的代码片段。完整的细节，参考我们的手册来创建和添加<a href="#custom-vcl">自定义VCL代码片段</a>.</p>

  <p>要使用代码片段，你必须使用Magento管理员上传Fastly VCL，像下面这样：</p>

  <ol>
    <li>
      <p>点击<strong>Fastly Configuration</strong>节点，如下图所示点击<strong>Upload VCL to Fastly</strong>。</p>

      <p><img src="http://devdocs.magento.com/common/images/cloud_upload-vcl-to-fastly.png" alt="上传一个Magento VCL到Fastly" /></p>

      <div class="bs-callout bs-callout-info" id="info">
  		如果<strong>Upload VCL to Fastly</strong>按钮没有显示，你应该要升级Fastly扩展到1.2.0或更新。我们推荐1.2.33或更新。Fastly的Composer名称是<code class="highlighter-rouge">fastly/magento2</code>。
      </div>
    </li>
    <li>
      <p>一但上传完成，弹框自动地关闭，并弹出一个成功的消息</p>
    </li>
  </ol>

  <p>这次上传，你可以创建和上传自定义高级设置和选项的VCL代码片段。你可以使用API来添加这些VCL代码片段，依赖此动作，进一步添加它们到你的站点代码中</p>

  <p>更金信息，参考<a href="https://docs.fastly.com/guides/vcl/guide-to-vcl" target="\_blank">Fastly VCL文档</a> and <a href="https://docs.fastly.com/guides/vcl-snippets/about-vcl-snippets" target="\_blank">Fastly VCL snippets</a>.</p>

  <h2 id="backend">配置后台及Origin shielding</h2>
  <p>后台设置为Fastly的Origin shielding执行和超时提供微调。_后台_是一个有为检查和提供缓存内容配置了Origin shield和超时设置的是一个指定的位置(IP或域名)</p>

  <p>_Origin shielding_为你的网店路由所有的请求到一个指定点(POP)。当接收到一个请求，POP检查缓存的内容并提供它，如果它没有被缓存，会被继续路由到Shied POP,然后到缓存了内容的原始服务器上。shields减少了直接到原始站的流量。</p>

  <p>你可以添加多个后台，重复这些指令创建多个后台，例如，你可能要一个后台提供<a href="/guides/v2.1/cloud/configure/fastly-vcl-wordpress.html">Wordpress</a>来处理你的博客</p>

  <ol>
    <li>访问并展开 <strong>Fastly Configuration</strong>.</li>
    <li>
      <p>展开<strong>Backend settings</strong>并点击齿轮图标来配置默认的后台。它会打开一个对话框，上面有选项用于选择和配置。</p>

      <p><img src="http://devdocs.magento.com/common/images/cloud_fastly-backend.png" alt="修改后台" width="600px" /></p>
    </li>
    <li>
      <p>选择与你AWS所在地最近的<strong>Sheild</strong>(或数据中心)的位置。比如，如果你的准生产环境在美国的西海岸(us-west-1),选择<code class="highlighter-rouge">sjc-ca-us</code>。这有提供缓存服务POP。</p>

      <p>下面列出了基于AWS地区可用哪些Fastly shield位置的关系</p>

      <ul>
        <li>ap-northeast-1 =&gt; tokyo-jp2</li>
        <li>ap-southeast-1 =&gt; singapore-sg</li>
        <li>ap-southeast-2 =&gt; sydney-au</li>
        <li>ap-south-1 =&gt; singapore-sg</li>
        <li>eu-central-1 =&gt; frankfurt-de</li>
        <li>eu-west-1 =&gt; london-uk, london_city-uk</li>
        <li>eu-west-2 =&gt; london-uk, london_city-uk</li>
        <li>eu-west-3 =&gt; cdg-par-fr</li>
        <li>sa-east-1	=&gt; gru-br-sa</li>
        <li>us-east-1 =&gt; iad-va-us</li>
        <li>us-east-2 =&gt; iad-va-us</li>
        <li>us-west-1 =&gt; sjc-ca-us</li>
        <li>us-west-2 =&gt; sea-wa-us</li>
      </ul>
    </li>
    <li>修改连接到shield超时值(毫秒)，字节之间的时间，首字节的时间。我们推荐保持默认超时设置。</li>
    <li>可选，编辑或保存之后选择激活后台和Shield。</li>
    <li>点击<strong>Upload</strong>保存，设置会被同步到Fastly.</li>
    <li>在Magento管理面板，点击<strong>Save Config</strong>.</li>
  </ol>

  <p>更多Fastly的信息，参考Magento 2<a href="https://github.com/fastly/fastly-magento2/blob/21b61c8189971275589219d418332798efc7db41/Documentation/Guides/BACKEND-SETTINGS.md" target="\_blank">后台设置向导</a>.</p>

  <h2 id="purge">配置清缓存选项{#purge}</h2>
  <p>Fastly在Magento缓存管理页面提供多类型的清理选项，包括清理的产品目录，产品资源和内容。当启用时，Fastly监听事件来清理这些缓存。如果没有启用。你只能在缓存管理页完成更新后手动清理Fastly缓存</p>

  <p>此选项包括：</p>

  <ul>
    <li><strong>Purge category</strong>: 当你添加及更新一个简单产品时清理产品分类内容(不是产品内容)，你可能想要保持这项禁用并启用清理产品。它会同时清理产品和产品分类。</li>
    <li><strong>Purge product</strong>: 当保存一个产品的简单修改时清理所有产品和产品分类内容，启用清理产品是有帮助的，当修改价格、添加产品选项及当产品库存不足时，它会立即反应到客户。</li>
    <li><strong>Purge CMS page</strong>: 当更新或添加页面到Magento CMS时清理页面内容，例如，你可能想当你更新团队和条件或退货政策时清理缓存。如果你很少修改这些内容，你可以此项自动清理。</li>
    <li><strong>Soft purge</strong>: 设置修改的内容过期并根据过期时间清理，结合过期时间，你的客户将在Fastly在后台更新内容期间快速地被老的内容响应。</li>
  </ul>

  <p><img src="http://devdocs.magento.com/common/images/cloud_fastly-purgeoptions.png" alt="配置清理选项" width="650px" /></p>

  <p>配置Fastly清理选项:</p>

  <ol>
    <li>在 <strong>Fastly Configuration</strong>节点，展开 <strong>Advanced</strong>。</li>
    <li>所有的清除选项会显示，选择”是”启用自动清除，选择”否”禁用自动清除，但允许你从缓存管理页面手动清除。</li>
    <li>点击页面上方的 <strong>Save Config</strong> 。</li>
    <li>页面重新加载后，在 <em>Fastly Configuration</em> 节点点击  <strong>Upload VCL to Fastly</strong></li>
  </ol>

  <p>更多信息请参考<a href="https://github.com/fastly/fastly-magento2/blob/21b61c8189971275589219d418332798efc7db41/Documentation/CONFIGURATION.md#further-configuration-options" target="\_blank">Fastly的配置选项</a>.</p>

  <h2 id="fastly-errpg">创建自定义错误/维护页面</h2>
  <p>你可以可选地创建一个自定义的页面来表示错误，或当你的站点要维护的时候。用提供了为什么站点临时下线信息的HTML代码创建你的页面，来代替仅显示HTTP错误代码</p>

  <p>要创建自定义错误/维护页面：</p>

  <ol>
    <li>
      <p>在 <strong>Fastly Configuration</strong> 节点展开 <strong>Error/Maintenance Page</strong> ，如下图所示。</p>

      <p><img src="http://devdocs.magento.com/common/images/cloud-fastly_err-pg.png" alt="自定义Fastly错误页面" width="650px" /></p>
    </li>
    <li>点击 <strong>Set HTML</strong>。</li>
    <li>
      <p>在提供的输入框中，输入你的HTML代码， 你输入的HTML长度不能超过65,535字节。</p>

      <div class="bs-callout bs-callout-info" id="info">
        <p>避免你的Fastly不可用时在你的站点使用图片，要使用图片，请参考<a href="https://css-tricks.com/data-uris/" target="\_blank">站点数据URI的css技巧</a>.</p>
      </div>
    </li>
    <li>当你完成之后，点击 <strong>Upload</strong> 来更新Fastly</li>
    <li>点击页面上方的 <strong>Save Config</strong> 。</li>
  </ol>

  <h2 id="custom-vcl">创建自定义VCL代码片段</h2>
  <p>要扩展指令来创建自定义VCL代码片段和需要的边缘字典或ACL,请参考<a href="/guides/v2.1/cloud/configure/cloud-vcl-custom-snippets.html">快速定制VCL片段</a></p>

  <h2 id="bulkaction">为Magento管理员延长Fastly超时</h2>
  <p>Fastly为Magento管理员的HTTPS请求设置一个180秒的超时，所以如果你要完成一个大块的需要3分钟以上完成的动作你可能会遇到超时。使用Fastly 1.2.41，你可以管理超时</p>

  <ol>
    <li>在 <em>Fastly Configuration</em> 节点，展开 <strong>Advanced</strong></li>
    <li>设置 <strong>Admin path timeout</strong> 的值，单位是秒。这个值不能大于一个小时(3600秒)</li>
    <li>点击页面上方的 <strong>Save Config</strong> 。</li>
    <li>页面重新加载后，在 <em>Fastly Configuration</em> 节点点击  <strong>Upload VCL to Fastly</strong></li>
  </ol>

  <p>从1.2.39开始，Fastly获取Magento管理面板路径来从<code class="highlighter-rouge">app/etc/env.php</code>配置文件生成VCL文件</p>

  <h2 id="geoip">配置GeoIP处理</h2>
  <p>Fastly模块包含GeoIP处理来自动定向访客或提供一个网店列表匹配他们拿到的国家代码。如果你已经使用了Magento扩展来进行GeoIP处理，你可能要一起验证Fastly选项中的特性</p>

  <ol>
    <li>在 <strong>Fastly Configuration</strong>节点，展开 <strong>Advanced</strong>。</li>
    <li>向下滚动至选择 <strong>Yes</strong> 来 <strong>启用GeoIP</strong>,附加的配置选项会显示出来。</li>
    <li>对于GeoIP的动作，选择是否访客自动重定向 <strong>Redirect</strong> ，或从 <strong>对话框</strong>选择以提供一个网店列表</li>
    <li>
      <p>对于 <strong>Country Mapping</strong>, 点击 <strong>添加</strong> 来输入一个两个字母的国家代码映射一个特定的列表中Magento网店，国家代码请参考<a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2" target="\_blank">此链接</a>.</p>

      <p><img src="http://devdocs.magento.com/common/images/cloud_fastly-geo-code.png" alt="添加GeoIP国家映射" /></p>
    </li>
    <li>点击页面上方的 <strong>Save Config</strong> 。</li>
    <li>页面刷新后，在 <em>Fastly Configuration</em>节点点击 <em>Upload VCL to Fastly</em></li>
  </ol>

  <p>Fastly 也提供了一系列的<a href="https://docs.fastly.com/guides/vcl/geolocation-related-vcl-features" target="\_blank">地理位置相关的VCL特性</a>来定制地理位置的代码</p>

  <h2 id="fastly-dns">为Fastly配置DNS</h2>
  <p>当你要上线时，你必须完成这些步骤</p>

  <p>在检查你的注册商在哪修改你的DNS配置之后，为你的指向Fastly服务<code class="highlighter-rouge">prod.magentocloud.map.fastly.net</code>的站点添加一个CNAME记录。如果你的站点使用了多主机名，你必须给每一个添加一个CNANE记录。</p>

  <div class="bs-callout bs-callout-info" id="info">
<p>使用<a href="https://blog.cloudflare.com/zone-apex-naked-domain-root-domain-cname-supp" target="_blank">顶级域名</a>(或提供一个<em>裸</em>域名)它是不会工作的。你必须使用一个支持转发DNS请求的DNS供应商来使用你的顶级域名。</p>
</div>

  <p>下面列出了包含DNS服务商的信息的例子，使用你的首选的DNS服务商</p>

  <ul>
    <li>CNAME with ALIAS record from <a href="http://dyn.com" target="_blank">Dyn</a></li>
    <li>ANAME record on <a href="http://www.dnsmadeeasy.com" target="_blank">DNS Made Easy</a></li>
    <li>ANAME at <a href="https://www.easydns.com" target="_blank">easyDNS</a></li>
    <li>ACNAME at <a href="https://www.cloudflare.com" target="_blank">CloudFlare</a></li>
    <li>ALIAS at <a href="https://pointhq.com" target="_blank">PointDNS</a></li>
  </ul>

  <p>许多其它的DNS服务商也提供完成此工作的解决办法。最通常的方法是为此域名上的<code class="highlighter-rouge">www</code>主机在添加一个CNAME记录，然后使用DNS提供商的重定向服务重定向顶级域名到这个域名的<code class="highlighter-rouge">www</code>域名上，查阅你的DNS提供商了解更多信息。</p>

  <p>另一种方法是为顶级域名添加一个A记录，映射一个域名到Fastly的IP地址<code class="highlighter-rouge">150.101.113.124</code>。</p>

  <p>参考<a href="/guides/v2.1/cloud/live/go-live-checklist.html">上线检查</a> 了解更多信息。</p>

  <h3 id="fastly-tls">TLS和Fastly</h3>
  <p>如果你在Fastly环境中使用了TLS并也启用了,你必须提供给你的DNS提供商你的Fastly的一个text记录,我们提供一个验证SSL证书的启用了子项备选名的域名，由GlobalSign发行，当你要为你的DNS信息提交[支持工单]/guides/v2.1/cloud/trouble/trouble.html)并要上线时，请让我们知道你用了TLS，提供你的域名并请求TXT记录。然后你可以发送这个记录到你的DNS服务商。域名认证过程会被Fastly执行。</p>

  <p>更多关于TXT记录的信息，请参考Fastly的 <a href="https://docs.fastly.com/guides/securing-communications/domain-validation-for-tls-certificates#dns-text-record-verification" target="\_blank">DNS TXT记录验证</a>.</p>

  <h2 id="upgrade">升级Fastly</h2>
  <p>Fastly通过更新Magento模块来解决问题，增强性能及提供新的特性，你可以检查<a href="https://marketplace.magento.com/fastly-magento2.html" target="\_blank">Magento Marketplace</a> and <a href="https://github.com/fastly/fastly-magento2/releases" target="\_blank">GitHub</a> 来获取最新的版本。</p>

  <p>当你升级Fastly，你会获得默认VCL代码片段的升级的子集。当你完成了升级，你必须<a href="#upload-vcl-snippets">上传升级默认的VCL代码片段到Fastly</a>:</p>

  <ol>
    <li>在 <em>Fastly Configuration</em> 节点，点击 <strong>Upload VCL to Fastly</strong></li>
    <li>上传完成之后，对话框会自动关闭，并弹出一个成功消息。</li>
  </ol>

  <p>当你升级时，你上传的默认的VCL代码片段不应该被影响或进行其它步骤</p>

  <p>更多关于升级模块的信息，请参考<a href="/guides/v2.1/cloud/howtos/install-components.html">安装，管理及升级模块</a>.</p>

  <p>如果你创建一个自定义的VCL代码片段使用了与默认代码片段相同的名字，你可能需要验证和更新这些代码片段。我们不推荐相同的名字以自定义代码片段替换现存的默认代码片段。关于自定义VCL的更多信息，请参考<a href="/guides/v2.1/cloud/configure/cloud-vcl-custom-snippets.html">快速定制VCL片段</a>.</p>
</div>

			
		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

    
  
    
    <div class="github-link">
      <a class="improve-page" href="https://github.com/magento/devdocs/blob/develop/guides/v2.1/cloud/access-acct/fastly.md" target="_blank">
        去GitHub上编辑
      </a>
    </div>
    
  
    
    <div class="new-issue">
      <a href="https://github.com/magento/devdocs/issues/new?title=Feedback on page: /guides/v2.1/cloud/access-acct/fastly.html" target="_blank">反馈</a>
    </div>
    
  
  </div>

	</section>
	<!-- /.content -->

</div> <!-- /.content-container -->


	</div>
	<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav footer-links">
  <li><a href="/guides/v2.1/contributor-guide/contributing_docs.html">成为贡献者</a>
  <li><a href="https://magento.github.io/glossary/index.html?audience=developer">术语表</a></li>
  <li><a href="http://magento.com/legal/terms/privacy/">隐私政策</a></li>
  <li><a href="http://magento.com/legal/terms/">服务条款</a></li>
  <li><a href="http://magento.com/legal/licensing/">许可/商标 常见问题</a></li>
  <li><a href="/guides/v2.1/release-notes/bk-release-notes.html">版本日志</a></li>
  <li><a href="/magento-third-party.html">三方许可</a></li>
</ul>

    </div>

		<div class="copyright-date">&copy; 2018 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/assets/js/app.min.js"></script>


<script src="/common/js/devdocs.min.js"></script>




</body>
</html>

