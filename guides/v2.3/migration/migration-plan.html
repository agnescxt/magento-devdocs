<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>创建一个迁移计划 | Magento 2 Developer Documentation</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">

	<link rel="stylesheet" href="/assets/css/app.css" />
	<link rel="stylesheet" href="/assets/css/print.css" media="print"/>

	<link rel="stylesheet" href="/common/css/devdocs.css" />

	<script>
  var baseUrl = "";
  var algolia = {
    id : "E642SEDTHL",
    index:  "devdocs",
    key:  "d2d0f33ab73e291ef8d88d8b565e754c"
  };
</script>




	<link rel="canonical" href="http://localhost:4000/guides/v2.3/migration/migration-plan.html">

	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body class="layout-default">

	<header class="site-header">

		<nav class="site-nav">

  <div class="menu-btn">
    <a id="menu-btn" class="menu-trigger menu-icon" href="#nav-main" aria-haspopup="true" aria-controls="nav-main"></a>
  </div>

  <div class="nav-container">

    <a class="logo" href="/guides/v2.3/">
      <img src="/assets/i/m-logo.svg" alt=""><img src="/assets/i/magento-logo.svg" alt="Magento" class="magento-logo" />
      <span class="site-logo">DevDocs</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      
<div class="version-switcher dropdown" data-version="2.3">
	<button id="version-switcher-button" class="btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Magento 2.3 Pre-release
	</button>

	<ul class="dropdown-menu dropdown-menu-left" aria-labelledby="version-switcher-button">
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.0/migration/migration-plan.html">Magento 2.0</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.1/migration/migration-plan.html">Magento 2.1</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.2/migration/migration-plan.html">Magento 2.2</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.3/migration/migration-plan.html">Magento 2.3 Pre-release</a></li>
	
  </ul>

</div>


      <!-- Main Navigation -->
<ul class="nav-main" role="menubar">

  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">部署</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          <li><a href="/guides/v2.3/install-gde/bk-install-guide.html">安装向导</a></li>
          
          <li><a href="/guides/v2.3/config-guide/bk-config-guide.html">配置手册</a></li>
          
          <li><a href="/guides/v2.3/performance-best-practices/index.html">高效实践</a></li>
          
          <li><a href="/guides/v2.3/migration/bk-migration-guide.html">迁移指引</a></li>
          <li><a href="/guides/v2.3/cloud/bk-cloud.html">上云指引</a></li>
          <li><a href="/magento-release-information.html">版本日志</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">开发</span>

    <div class="nav-popup" role="menu" aria-hidden="true">

      <div class="nav-section">
        <div class="nav-section-title">服务端</div>
        <ul>
          <li><a href="/guides/v2.3/architecture/bk-architecture.html">架构说明</a></li>
          <li><a href="/guides/v2.3/extension-dev-guide/bk-extension-dev-guide.html">PHP开发文档</a></li>
          <li><a href="/guides/v2.3/ext-best-practices/bk-ext-best-practices.html">扩展开发实践</a></li>
          <li><a href="/guides/v2.3/mrg/intro.html">各模块介绍</a></li>
          <li><a href="/guides/v2.3/coding-standards/bk-coding-standards.html">编码规范</a></li>
          <li><a href="/guides/v2.3/contributor-guide/contributing.html">贡献指引</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">前端</div>
        <ul>
          <li class=""><a href="/guides/v2.3/frontend-dev-guide/bk-frontend-dev-guide.html">前端工程师手册</a></li>
          
          <li><a href="/guides/v2.3/ui_comp_guide/bk-ui_comps.html">UI组件手册</a></li>
          
          <li><a href="/guides/v2.3/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript开发手册</a></li>
          <li><a href="/guides/v2.3/pattern-library/bk-pattern.html">管理面板设计模式及所用库</a></li>
          <li><a href="/guides/v2.3/design-styleguide/bk-styleguide.html">管理面板样式手册</a></li>
          <li><a href="https://magento-research.github.io/pwa-devdocs/">PWA Studios</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title"><abbr>API</abbr></div>
        <ul>
          <li><a href="/guides/v2.3/get-started/bk-get-started-api.html">Web APIs起步</a></li>
          <li><a href="/guides/v2.3/rest/bk-rest.html">REST API参考</a></li>
          <li><a href="/guides/v2.3/soap/bk-soap.html">SOAP API参考</a></li>
          
          <li><a href="/guides/v2.3/graphql/index.html">GraphQL开发者手册(新!)</a></li>
          
          
          <li><a href="/guides/v2.3/marketplace/eqp/api.html">Marketplace EQP API Reference</a></li>
          
        </ul>
      </div>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">测试</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        <li><a href="/guides/v2.3/test/testing.html">Magento测试手册</a></li>
        
        <li><a href="/guides/v2.3/magento-functional-testing-framework/release-2/introduction.html">功能验收测试(新!)</a></li>
        
        <li><a href="/guides/v2.3/mtf/mtf_introduction.html">功能测试</a></li>
        <li><a href="/guides/v2.3/test/integration/integration_test_execution.html">集成测试</a></li>
        <li><a href="/guides/v2.3/test/js/jasmine.html">JavaScript单元测试</a></li>
        <li><a href="/guides/v2.3/test/unit/unit_test_execution.html">PHP单元测试</a></li>
        <li><a href="/guides/v2.3/get-started/web-api-functional-testing.html">Web API功能测试</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-separator"></li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">功能文档</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          
          <li class="leaf"><a href="/guides/v2.3/advanced-reporting/overview.html">高级报表</a></li>
          
        
        <li class="leaf"><a href="/guides/v2.3/b2b/bk-b2b.html">B2B</a></li>
        
        <li><a href="/guides/v2.3/howdoi/checkout/checkout_overview.html">Checkout</a></li>
        <li><a href="/guides/v2.3/payments-integrations/bk-payments-integrations.html">支付集成</a></li>
        
          <li><a href="/guides/v2.3/extension-dev-guide/staging.html">Staging</a></li>
        
      </ul>
    </div>

  </li>


  <li class="nav-main-item"  tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">指引</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        <li><a href="/guides/v2.3/howdoi/bk-how-do-i.html">如何</a></li>
        
        <li><a  data-proofer-ignore href="/guides/v2.3/get-started/order-tutorial/order-intro.html">使用EST APIs处理订单</a></li>
        

        <li><a href="/videos/">视频教程</a></li>
      </ul>
    </div>

  </li>

</ul><!-- /.nav-main -->

    </div>

    <div class="search-btn">
      <a class="search-trigger search-icon" href="#"></a>
    </div>

    <form class="quick-search" action="/guides/v2.3/search.html" method="get" novalidate="novalidate">
      <input type="search" name="q" placeholder="Search" />
      <a href="#" class="quick-search-close">&times;</a>
    </form>

  </div>

</nav><!-- #site-nav -->
<div class="nav-main-fader"></div>


	</header>

	<div class="global-wrapper">

		<div class="main-container">
			<a id="main-content"></a>


<div class="content-container">

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" data-proofer-ignore class="toc-toggler">内容表格</a>
	<div class="sidebar-wrapper">

		

		<h4 class="guide-title">Migration Guide</h4>
		<div class="collapsible-navigation">
		    <ul>
		    
		    	

<li class="nav-level1  " id="overview">
    

    
    <a href="/guides/v2.3/migration/bk-migration-guide.html">Overview</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="最佳实践和基准">

            

            
            <a href="/guides/v2.3/migration/migration-overview-practices.html">最佳实践和基准</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="支持的版本">

            

            
            <a href="/guides/v2.3/migration/migration-overview-supported.html">支持的版本</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="迁移是如何工作的">

            

            
            <a href="/guides/v2.3/migration/migration-overview-how.html">迁移是如何工作的</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1 active " id="创建一个迁移计划">
    

    
    <a href="/guides/v2.3/migration/migration-plan.html">创建一个迁移计划</a>
    

    
</li>


		    
		    	

<li class="nav-level1  " id="数据迁移工具">
    

    
    <a href="/guides/v2.3/migration/migration-tool.html">数据迁移工具</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="先决条件">

            

            
            <a href="/guides/v2.3/migration/migration-tool-preconditions.html">先决条件</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="安装数据迁移工具">

            

            
            <a href="/guides/v2.3/migration/migration-tool-install.html">安装数据迁移工具</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="升级数据迁移工具">

            

            
            <a href="/guides/v2.3/migration/migration-tool-upgrade.html">升级数据迁移工具</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="配置迁移">

            

            
            <a href="/guides/v2.3/migration/migration-tool-configure.html">配置迁移</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="扩展工具">

            

            
            <a href="/guides/v2.3/migration/extend-the-tool.html">扩展工具</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="使用数据迁移工具迁移">
    

    
    <a href="/guides/v2.3/migration/migration-migrate.html">使用数据迁移工具迁移</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="迁移设置">

            

            
            <a href="/guides/v2.3/migration/migration-migrate-settings.html">迁移设置</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="迁移数据">

            

            
            <a href="/guides/v2.3/migration/migration-migrate-data.html">迁移数据</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="迁移更改">

            

            
            <a href="/guides/v2.3/migration/migration-migrate-delta.html">迁移更改</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="跟进(信息和步骤)">

            

            
            <a href="/guides/v2.3/migration/migration-migrate-follow-up.html">跟进(信息和步骤)</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="须要手动迁移的数据">
    

    
    <a href="/guides/v2.3/migration/migration-manually.html">须要手动迁移的数据</a>
    

    
</li>


		    
		    	

<li class="nav-level1  " id="故障排除">
    

    
    <a href="/guides/v2.3/migration/migration-troubleshooting.html">故障排除</a>
    

    
</li>


		    
		    	

<li class="nav-level1  " id="迁移之后">
    

    
    <a href="/guides/v2.3/migration/migration-migrate-after.html">迁移之后</a>
    

    
</li>


		    
		    	

<li class="nav-level1  " id="数据迁移工具技术规范">
    

    
    <a href="/guides/v2.3/migration/migration-tool-internal-spec.html">数据迁移工具技术规范</a>
    

    
</li>


		    
		    </ul>
		</div>

	</div>

</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	

  <nav class="breadcrumbs">

    <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      <li class="breadcrumb-item"><a class="breadcrumb-item" href="/guides/v2.3/"><span>首页</span></a></li>

    <!-- Iteration breadcrumb item -->
    
    

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem">

        

          

          <span property="name">创建一个迁移计划</span>

        

        <meta property="position" content="1" />
      </li>

    

    </ol>

  </nav>



	

	

	<h1 class="page-heading">创建一个迁移计划</h1>

  


</section>

			<p>To migrate successfully and avoid issues, you need to thourougly plan and test your migration. We hope the guidelines below will prove helpful.</p>

<h2 id="before-you-start-consider-upgrade">Before you start: Consider upgrade</h2>

<p>Migration is a perfect moment to make serious changes and get your site ready for the next level of growth. Consider whether your new site needs to be designed with more hardware or a more advanced topology with better caching tiers, etc.</p>

<h2 id="步骤1-review-extensions-on-your-current-site">步骤1. Review extensions on your current site</h2>

<ul>
  <li>
    <p>What extensions have you installed?</p>
  </li>
  <li>
    <p>Have you identified if you need all these extensions on your new site?  (There might be old ones you can safely remove.)</p>
  </li>
  <li>
    <p>Have you determined if Magento 2 versions of your extensions exist?  (Visit <a href="https://marketplace.magento.com">Magento Marketplace</a> to find the latest versions or contact your extension provider.)</p>
  </li>
  <li>
    <p>What database assets from your extensions do you want to migrate?</p>
  </li>
</ul>

<h2 id="步骤2-build-and-prepare-magento-2-store-for-migration">步骤2. Build and prepare Magento 2 store for migration</h2>

<ul>
  <li>
    <p>Set up a Magento 2 hardware system using topology and design that at least matches your existing Magento 1 system</p>
  </li>
  <li>
    <p>安装Magento 2.x (with all modules of this release) and the 数据迁移工具 on a system that meets the <a href="/guides/v2.3/install-gde/system-requirements-tech.html">Magento系统要求</a></p>
  </li>
  <li>
    <p>Make your custom adjustments to the 数据迁移工具 code in case you do not need to migrate some data (like CMS Pages, Sales Rules, etc.) or want to convert your Magento customization during migration. Read the 数据迁移工具’s <a href="/guides/v2.3/migration/migration-tool-internal-spec.html">Technical Specification</a> to better understand how migration works from inside</p>
  </li>
</ul>

<h2 id="步骤3-dry-run">步骤3. Dry run</h2>

<p>Before you start migration on the production environment, it would be best to go through all the migration steps on your testing environment.</p>

<p>In such migration testing, follow these steps:</p>

<ul>
  <li>
    <p>Copy your Magento 1 store to a staging server</p>
  </li>
  <li>
    <p>Fully migrate the replicated Magento 1 store to Magento 2</p>
  </li>
  <li>
    <p>Thoroughly test your new store</p>
  </li>
</ul>

<h2 id="步骤4-start-your-migration">步骤4. Start your migration</h2>

<ol>
  <li>
    <p>Make sure that the 数据迁移工具 has a network access to connect to Magento 1 and Magento 2 databases. Open the corresponding ports in your firewall.</p>
  </li>
  <li>
    <p>Stop all activities in the Magento 1.x Admin Panel, except for order management, such as shipping, creating invoice, credit memos, etc (the list of allowed activities can be extended by adjusting settings of the Delta mode in the 数据迁移工具). <strong>Note:</strong> such activities must not be resumed until your Magento 2 store goes live.</p>
  </li>
  <li>
    <p>We recommend to stop all Magento 1.x cron jobs.</p>

    <p>Still, if some jobs are required to run during migration, make sure they do not create new database entities or change the existing ones in the way that such entities cannot be processed by the Delta mode.</p>

    <p>例如: the <code class="highlighter-rouge">enterprise_salesarchive_archive_orders</code> cron job moves old orders to archive. Running this job during migration is safe because the Delta mode takes the job into account and thus properly processes the archived orders.</p>
  </li>
</ol>

<ol start="4">
  <li>
    <p>Use the 数据迁移工具 to migrate settings and websites.</p>
  </li>
  <li>
    <p>Copy your Magento 1.x media files to Magento 2.x.</p>

    <p>You must copy these files manually from the <code class="highlighter-rouge">magento1-root/media</code> directory to <code class="highlighter-rouge">magento2-root/pub/media</code>.</p>
  </li>
</ol>

<ol start="6">
  <li>
    <p>Use the 数据迁移工具 to bulk copy your data from Magento 1 database to Magento 2 database.</p>

    <p>If some of your extensions have data you want to migrate, you might need to install these extensions adapted for Magento 2. In case the extensions have a different structure in Magento 2 database, use the mapping files provided with the 数据迁移工具.</p>
  </li>
</ol>

<ol start="7">
  <li>Reindex all Magento 2.x indexers. For details, see the <a href="/guides/v2.3/config-guide/cli/config-cli-subcommands-index.html">Configuration guide</a>.</li>
</ol>

<h2 id="步骤5-make-changes-to-the-migrated-data-if-needed">步骤5. Make changes to the migrated data (if needed)</h2>

<p>Sometimes you may want to have your Magento 2 store with different catalog structure, sales rules, CMS pages, etc. after migration.</p>

<p>It is is important to practice caution while working through manual data changes. Mistakes will create errors in the incremental data migration step that follows.</p>

<p>For example, a product deleted from Magento 2: the one that has been bought on your live Magento 1 store and which is not available anymore in your Magento 2 store. Transferring data about such purchase might cause an error while running the 数据迁移工具 in Delta mode.</p>

<h2 id="步骤6-update-incremental-data">步骤6. Update incremental data</h2>

<p>After migrating data, you must incrementally capture data updates that have been added in the Magento 1 store (such as new orders, reviews, and changes in customer profiles) and transfer these updates to the Magento 2 store using the Delta mode.</p>

<ul>
  <li>
    <p>Start the incremental migration; updates will run continually.
You can stop transferring updates at any time by pressing <code class="highlighter-rouge">Ctrl+C</code></p>
  </li>
  <li>
    <p>Test your Magento 2 site during this time to catch any issues as soon as possible.
In case of such issues, press <code class="highlighter-rouge">Ctrl+C</code> to stop incremental migration and start it again after issues are resolved</p>
  </li>
</ul>

<div class="bs-callout bs-callout-info" id="info">
  <p>Volume check warnings may appear in case you conduct testing of your Magento 2 site and run migration process at the same time. It happens because in Magento 2 you create entities that do not exist in Magento 1 instance.</p>
</div>

<h2 id="步骤7-go-live">步骤7. Go live</h2>

<p>Now that your Magento 2 site is up-to-date with Magento 1 and is functioning normally, do the following to cut over to the new site:</p>

<ol>
  <li>
    <p>Put your Magento 1 system in maintenance mode (DOWNTIME STARTS).</p>
  </li>
  <li>
    <p>Press Control+C in the migration tool command window to stop incremental updates.</p>
  </li>
  <li>
    <p>Start your Magento 2 cron jobs.</p>
  </li>
  <li>
    <p>In your Magento 2 system, reindex the stock indexer. For more information, see the <a href="/guides/v2.3/config-guide/cli/config-cli-subcommands-index.html">Configuration guide</a>.</p>
  </li>
  <li>
    <p>Using a tool of your choice, hit pages in your Magento 2 system to cache pages in advance of customers who use your storefront.</p>
  </li>
  <li>
    <p>Perform any final verification of your Magento 2 site.</p>
  </li>
  <li>
    <p>Change DNS, load balancers, and so on to point to new production hardware (DOWNTIME ENDS).</p>
  </li>
  <li>
    <p>Magento 2 store is now ready to use. You and your customers can resume all activities.</p>
  </li>
</ol>

<!-- LINK ADDRESSES -->

			
		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

    
  
    
    <div class="github-link">
      <a class="improve-page" href="https://github.com/magento/devdocs/blob/develop/guides/v2.3/migration/migration-plan.md" target="_blank">
        去GitHub上编辑
      </a>
    </div>
    
  
    
    <div class="new-issue">
      <a href="https://github.com/magento/devdocs/issues/new?title=Feedback on page: /guides/v2.3/migration/migration-plan.html" target="_blank">反馈</a>
    </div>
    
  
  </div>

	</section>
	<!-- /.content -->

</div> <!-- /.content-container -->


	</div>
	<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav footer-links">
  <li><a href="/guides/v2.3/contributor-guide/contributing_docs.html">成为贡献者</a>
  <li><a href="https://magento.github.io/glossary/index.html?audience=developer">术语表</a></li>
  <li><a href="http://magento.com/legal/terms/privacy/">隐私政策</a></li>
  <li><a href="http://magento.com/legal/terms/">服务条款</a></li>
  <li><a href="http://magento.com/legal/licensing/">许可/商标 常见问题</a></li>
  <li><a href="/guides/v2.3/release-notes/bk-release-notes.html">版本日志</a></li>
  <li><a href="/magento-third-party.html">三方许可</a></li>
</ul>

    </div>

		<div class="copyright-date">&copy; 2018 Magento. All rights reserved. translated by <a target="_blank" href="https://www.silksoftware.com">silksoftware co.ltd</a> - <a href="http://haiwera.xyz">Haiwera</a></div>

  </div>
</div>
<!-- / #footer -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/assets/js/app.min.js"></script>


<script src="/common/js/devdocs.min.js"></script>




</body>
</html>

