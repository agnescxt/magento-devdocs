<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>di.xml文件 | Magento 2 Developer Documentation</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">

	<link rel="stylesheet" href="/assets/css/app.css" />
	<link rel="stylesheet" href="/assets/css/print.css" media="print"/>

	<link rel="stylesheet" href="/common/css/devdocs.css" />

	<script>
  var baseUrl = "";
  var algolia = {
    id : "E642SEDTHL",
    index:  "devdocs",
    key:  "d2d0f33ab73e291ef8d88d8b565e754c"
  };
</script>




	<link rel="canonical" href="http://localhost:4000/guides/v2.3/extension-dev-guide/build/di-xml-file.html">

	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body class="layout-default">

	<header class="site-header">

		<nav class="site-nav">

  <div class="menu-btn">
    <a id="menu-btn" class="menu-trigger menu-icon" href="#nav-main" aria-haspopup="true" aria-controls="nav-main"></a>
  </div>

  <div class="nav-container">

    <a class="logo" href="/guides/v2.3/">
      <img src="/assets/i/m-logo.svg" alt=""><img src="/assets/i/magento-logo.svg" alt="Magento" class="magento-logo" />
      <span class="site-logo">DevDocs</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      
<div class="version-switcher dropdown" data-version="2.3">
	<button id="version-switcher-button" class="btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Magento 2.3 Pre-release
	</button>

	<ul class="dropdown-menu dropdown-menu-left" aria-labelledby="version-switcher-button">
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.0/extension-dev-guide/build/di-xml-file.html">Magento 2.0</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.1/extension-dev-guide/build/di-xml-file.html">Magento 2.1</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.2/extension-dev-guide/build/di-xml-file.html">Magento 2.2</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.3/extension-dev-guide/build/di-xml-file.html">Magento 2.3 Pre-release</a></li>
	
  </ul>

</div>


      <!-- Main Navigation -->
<ul class="nav-main" role="menubar">

  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">部署</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          <li><a href="/guides/v2.3/install-gde/bk-install-guide.html">安装向导</a></li>
          
          <li><a href="/guides/v2.3/config-guide/bk-config-guide.html">配置手册</a></li>
          
          <li><a href="/guides/v2.3/performance-best-practices/index.html">高效实践</a></li>
          
          <li><a href="/guides/v2.3/migration/bk-migration-guide.html">迁移指引</a></li>
          <li><a href="/guides/v2.3/cloud/bk-cloud.html">上云指引</a></li>
          <li><a href="/magento-release-information.html">版本日志</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">开发</span>

    <div class="nav-popup" role="menu" aria-hidden="true">

      <div class="nav-section">
        <div class="nav-section-title">服务端</div>
        <ul>
          <li><a href="/guides/v2.3/architecture/bk-architecture.html">架构说明</a></li>
          <li><a href="/guides/v2.3/extension-dev-guide/bk-extension-dev-guide.html">PHP开发文档</a></li>
          <li><a href="/guides/v2.3/ext-best-practices/bk-ext-best-practices.html">扩展开发实践</a></li>
          <li><a href="/guides/v2.3/mrg/intro.html">各模块介绍</a></li>
          <li><a href="/guides/v2.3/coding-standards/bk-coding-standards.html">编码规范</a></li>
          <li><a href="/guides/v2.3/contributor-guide/contributing.html">贡献指引</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">前端</div>
        <ul>
          <li class=""><a href="/guides/v2.3/frontend-dev-guide/bk-frontend-dev-guide.html">前端工程师手册</a></li>
          
          <li><a href="/guides/v2.3/ui_comp_guide/bk-ui_comps.html">UI组件手册</a></li>
          
          <li><a href="/guides/v2.3/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript开发手册</a></li>
          <li><a href="/guides/v2.3/pattern-library/bk-pattern.html">管理面板设计模式及所用库</a></li>
          <li><a href="/guides/v2.3/design-styleguide/bk-styleguide.html">管理面板样式手册</a></li>
          <li><a href="https://magento-research.github.io/pwa-devdocs/">PWA Studios</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title"><abbr>API</abbr></div>
        <ul>
          <li><a href="/guides/v2.3/get-started/bk-get-started-api.html">Web APIs起步</a></li>
          <li><a href="/guides/v2.3/rest/bk-rest.html">REST API参考</a></li>
          <li><a href="/guides/v2.3/soap/bk-soap.html">SOAP API参考</a></li>
          
          <li><a href="/guides/v2.3/graphql/index.html">GraphQL开发者手册(新!)</a></li>
          
          
          <li><a href="/guides/v2.3/marketplace/eqp/api.html">Marketplace EQP API Reference</a></li>
          
        </ul>
      </div>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">测试</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        <li><a href="/guides/v2.3/test/testing.html">Magento测试手册</a></li>
        
        <li><a href="/guides/v2.3/magento-functional-testing-framework/release-2/introduction.html">功能验收测试(新!)</a></li>
        
        <li><a href="/guides/v2.3/mtf/mtf_introduction.html">功能测试</a></li>
        <li><a href="/guides/v2.3/test/integration/integration_test_execution.html">集成测试</a></li>
        <li><a href="/guides/v2.3/test/js/jasmine.html">JavaScript单元测试</a></li>
        <li><a href="/guides/v2.3/test/unit/unit_test_execution.html">PHP单元测试</a></li>
        <li><a href="/guides/v2.3/get-started/web-api-functional-testing.html">Web API功能测试</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-separator"></li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">功能文档</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          
          <li class="leaf"><a href="/guides/v2.3/advanced-reporting/overview.html">高级报表</a></li>
          
        
        <li class="leaf"><a href="/guides/v2.3/b2b/bk-b2b.html">B2B</a></li>
        
        <li><a href="/guides/v2.3/howdoi/checkout/checkout_overview.html">Checkout</a></li>
        <li><a href="/guides/v2.3/payments-integrations/bk-payments-integrations.html">支付集成</a></li>
        
          <li><a href="/guides/v2.3/extension-dev-guide/staging.html">Staging</a></li>
        
      </ul>
    </div>

  </li>


  <li class="nav-main-item"  tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">指引</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        <li><a href="/guides/v2.3/howdoi/bk-how-do-i.html">如何</a></li>
        
        <li><a  data-proofer-ignore href="/guides/v2.3/get-started/order-tutorial/order-intro.html">使用EST APIs处理订单</a></li>
        

        <li><a href="/videos/">视频教程</a></li>
      </ul>
    </div>

  </li>

</ul><!-- /.nav-main -->

    </div>

    <div class="search-btn">
      <a class="search-trigger search-icon" href="#"></a>
    </div>

    <form class="quick-search" action="/guides/v2.3/search.html" method="get" novalidate="novalidate">
      <input type="search" name="q" placeholder="Search" />
      <a href="#" class="quick-search-close">&times;</a>
    </form>

  </div>

</nav><!-- #site-nav -->
<div class="nav-main-fader"></div>


	</header>

	<div class="global-wrapper">

		<div class="main-container">
			<a id="main-content"></a>


<div class="content-container">

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" data-proofer-ignore class="toc-toggler">内容表格</a>
	<div class="sidebar-wrapper">

		

		<h4 class="guide-title">PHP开发文档</h4>
		<div class="collapsible-navigation">
		    <ul>
		    
		    	

<li class="nav-level1  " id="介绍">
    

    
    <a href="/guides/v2.3/extension-dev-guide/bk-extension-dev-guide.html">介绍</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="开发者指引">

            

            
            <a href="/guides/v2.3/extension-dev-guide/intro/developers_roadmap.html">开发者指引</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="composer介绍">

            

            
            <a href="/guides/v2.3/extension-dev-guide/intro/intro-composer.html">Composer介绍</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="常用术语表">

            

            
            <a href="/guides/v2.3/extension-dev-guide/intro/intro-composer-gloss.html">常用术语表</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="准备(快速开始开发)">
    

    
    <a href="/guides/v2.3/extension-dev-guide/prepare/prepare.html">准备(快速开始开发)</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="组件类型">

            

            
            <a href="/guides/v2.3/extension-dev-guide/prepare/dev-modtypes.html">组件类型</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="关于组件的文件结构">

            

            
            <a href="/guides/v2.3/extension-dev-guide/prepare/prepare_file-str.html">关于组件的文件结构</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="开发和打包组件指引">

            

            
            <a href="/guides/v2.3/extension-dev-guide/prepare/dev-summary.html">开发和打包组件指引</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="扩展生命周期">

            

            
            <a href="/guides/v2.3/extension-dev-guide/prepare/lifecycle.html">扩展生命周期</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="构建">
    

    
    <a href="/guides/v2.3/extension-dev-guide/build/build.html">构建</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2 active " id="di.xml文件">

            

            
            <a href="/guides/v2.3/extension-dev-guide/build/di-xml-file.html">di.xml文件</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="最佳开发环境">

            

            
            <a href="/guides/v2.3/extension-dev-guide/build/optimal-dev-environment.html">最佳开发环境</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="composer.json文件">

            

            
            <a href="/guides/v2.3/extension-dev-guide/build/composer-integration.html">composer.json文件</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="定义你的配置文件">

            

            
            <a href="/guides/v2.3/extension-dev-guide/build/required-configuration-files.html">定义你的配置文件</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="创建你的组件文件结构">

            

            
            <a href="/guides/v2.3/extension-dev-guide/build/module-file-structure.html">创建你的组件文件结构</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="注册你的组件">

            

            
            <a href="/guides/v2.3/extension-dev-guide/build/component-registration.html">注册你的组件</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="统一资源名称(urn)验证">

            

            
            <a href="/guides/v2.3/extension-dev-guide/build/XSD-XML-validation.html">统一资源名称(URN)验证</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="你组件的名称">

            

            
            <a href="/guides/v2.3/extension-dev-guide/build/create_component.html">你组件的名称</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="组件加载顺序">

            

            
            <a href="/guides/v2.3/extension-dev-guide/build/module-load-order.html">组件加载顺序</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="启用和禁用组件">

            

            
            <a href="/guides/v2.3/extension-dev-guide/build/enable-module.html">启用和禁用组件</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="打包">
    

    
    <a href="/guides/v2.3/extension-dev-guide/package/package.html">打包</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="打包组件">

            

            
            <a href="/guides/v2.3/extension-dev-guide/package/package_module.html">打包组件</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="上传组件到magento市场">

            

            
            <a href="/guides/v2.3/extension-dev-guide/package/package_mktpl.html">上传组件到Magento市场</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="验证">
    

    
    <a href="/guides/v2.3/extension-dev-guide/validate/validate.html">验证</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="测试你的组件">

            

            
            <a href="/guides/v2.3/extension-dev-guide/validate/test-module.html">测试你的组件</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="部份缓存">
    

    
    <a href="/guides/v2.3/extension-dev-guide/cache/partial-caching.html">部份缓存</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="创建自定义缓存引擎">

            

            
            <a href="/guides/v2.3/extension-dev-guide/cache/partial-caching/database-caching.html">创建自定义缓存引擎</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="创建缓存类型">

            

            
            <a href="/guides/v2.3/extension-dev-guide/cache/partial-caching/create-cache-type.html">创建缓存类型</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="页面缓存">
    

    
    <a href="/guides/v2.3/extension-dev-guide/cache/page-caching.html">页面缓存</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="公开内容">

            

            
            <a href="/guides/v2.3/extension-dev-guide/cache/page-caching/public-content.html">公开内容</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="隐私内容">

            

            
            <a href="/guides/v2.3/extension-dev-guide/cache/page-caching/private-content.html">隐私内容</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="添加命令行命令">
    

    
    <a href="/guides/v2.3/extension-dev-guide/cli-cmds/cli-add.html">添加命令行命令</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="命令命名指南">

            

            
            <a href="/guides/v2.3/extension-dev-guide/cli-cmds/cli-naming-guidelines.html">命令命名指南</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="如何添加命令行命令">

            

            
            <a href="/guides/v2.3/extension-dev-guide/cli-cmds/cli-howto.html">如何添加命令行命令</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="预发布-(仅企业版适用)">
    

    
    <a href="/guides/v2.3/extension-dev-guide/staging.html">预发布 (仅企业版适用)</a>
    

    
</li>


		    
		    	

<li class="nav-level1  " id="组件开发">
    

    
    <a href="/guides/v2.3/extension-dev-guide/module-development.html">组件开发</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="服务约定">

            

            
            <a href="/guides/v2.3/extension-dev-guide/service-contracts/service-contracts.html">服务约定</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="public-interfaces-&amp;-apis">

            

            
            <a href="/guides/v2.3/extension-dev-guide/api-concepts.html">Public interfaces &amp; APIs</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="服务契约设置模式">

            

            
            <a href="/guides/v2.3/extension-dev-guide/service-contracts/design-patterns.html">服务契约设置模式</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="依赖注入">

            

            
            <a href="/guides/v2.3/extension-dev-guide/depend-inj.html">依赖注入</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="objectmanager">

            

            
            <a href="/guides/v2.3/extension-dev-guide/object-manager.html">ObjectManager</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="事件和观查者">

            

            
            <a href="/guides/v2.3/extension-dev-guide/events-and-observers.html">事件和观查者</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="工厂">

            

            
            <a href="/guides/v2.3/extension-dev-guide/factories.html">工厂</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="代理">

            

            
            <a href="/guides/v2.3/extension-dev-guide/proxies.html">代理</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="代码生成">

            

            
            <a href="/guides/v2.3/extension-dev-guide/code-generation.html">代码生成</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="实体属性值(eav)和扩展属性">

            

            
            <a href="/guides/v2.3/extension-dev-guide/attributes.html">实体属性值(EAV)和扩展属性</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="插件(拦截器)">

            

            
            <a href="/guides/v2.3/extension-dev-guide/plugins.html">插件(拦截器)</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="路由">

            

            
            <a href="/guides/v2.3/extension-dev-guide/routing.html">路由</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="索引">

            

            
            <span>索引</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="索引概述">
                    

                    
                    <a  href="/guides/v2.3/extension-dev-guide/indexing.html">索引概述</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="索引优化">
                    

                    
                    <a  href="/guides/v2.3/extension-dev-guide/indexer-batch.html">索引优化</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="添加自定义索引">
                    

                    
                    <a  href="/guides/v2.3/extension-dev-guide/indexing-custom.html">添加自定义索引</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="declarative-schema">

            

            
            <span>Declarative schema</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="delcarative-schema-overview">
                    

                    
                    <a  href="/guides/v2.3/extension-dev-guide/declarative-schema/">Delcarative schema overview</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="migrate-install/upgrade-scripts-to-declarative-schema">
                    

                    
                    <a  href="/guides/v2.3/extension-dev-guide/declarative-schema/migration-commands.html">Migrate install/upgrade scripts to declarative schema</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="configure-declarative-schema">
                    

                    
                    <a  href="/guides/v2.3/extension-dev-guide/declarative-schema/db-schema.html">Configure declarative schema</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="develop-data-and-schema-patches">
                    

                    
                    <a  href="/guides/v2.3/extension-dev-guide/declarative-schema/data-patches.html">Develop data and schema patches</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="消息队列-(magento-commerce-edition-only)">

            

            
            <span>消息队列 (Magento Commerce Edition Only)</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="消息队列-overview">
                    

                    
                    <a  href="/guides/v2.3/extension-dev-guide/message-queues/message-queues.html">消息队列 overview</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="configure-message-queues">
                    

                    
                    <a  href="/guides/v2.3/extension-dev-guide/message-queues/config-mq.html">Configure message Queues</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="迁移消息队列配置">
                    

                    
                    <a  href="/guides/v2.3/extension-dev-guide/message-queues/queue-migration.html">迁移消息队列配置</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="bulk-operations">
                    

                    
                    <a  href="/guides/v2.3/extension-dev-guide/message-queues/bulk-operations.html">Bulk operations</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="批量操作实现示例">
                    

                    
                    <a  href="/guides/v2.3/extension-dev-guide/message-queues/implement-bulk.html">批量操作实现示例</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="添加扩展属性到实体">

            

            
            <a href="/guides/v2.3/extension-dev-guide/extension_attributes/adding-attributes.html">添加扩展属性到实体</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="searching-with-repositories">

            

            
            <a href="/guides/v2.3/extension-dev-guide/searching-with-repositories.html">Searching with repositories</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="将服务配置成web-api">

            

            
            <a href="/guides/v2.3/extension-dev-guide/service-contracts/service-to-web-service.html">将服务配置成web API</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="部署期间清空目录">

            

            
            <a href="/guides/v2.3/howdoi/php/php_clear-dirs.html">部署期间清空目录</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="适配器">

            

            
            <a href="/guides/v2.3/extension-dev-guide/adapters.html">适配器</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="配置">
    

    
    <span>配置</span>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="敏感环境设置">

            

            
            <a href="/guides/v2.3/extension-dev-guide/configuration/sensitive-and-environment-settings.html">敏感环境设置</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="配置导入器">

            

            
            <a href="/guides/v2.3/extension-dev-guide/configuration/importers.html">配置导入器</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="框架">
    

    
    <span>框架</span>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="序列化库">

            

            
            <a href="/guides/v2.3/extension-dev-guide/framework/serializer.html">序列化库</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="安全">
    

    
    <span>安全</span>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="xss防范">

            

            
            <a href="/guides/v2.3/extension-dev-guide/xss-protection.html">XSS防范</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="不安全的方法">

            

            
            <a href="/guides/v2.3/extension-dev-guide/security/non-secure-functions.html">不安全的方法</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="版本控制">
    

    
    <a href="/guides/v2.3/extension-dev-guide/versioning/">版本控制</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="模块版本依赖">

            

            
            <a href="/guides/v2.3/extension-dev-guide/versioning/dependencies.html">模块版本依赖</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="基础代码修改">

            

            
            <a href="/guides/v2.3/extension-dev-guide/versioning/codebase-changes.html">基础代码修改</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    </ul>
		</div>

	</div>

</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	

  <nav class="breadcrumbs">

    <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      <li class="breadcrumb-item"><a class="breadcrumb-item" href="/guides/v2.3/"><span>首页</span></a></li>

    <!-- Iteration breadcrumb item -->
    
    

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">

        
          <a property="item" typeof="WebPage" href="/guides/v2.3/extension-dev-guide/bk-extension-dev-guide.html">
            <span property="name">PHP开发文档</span>
          </a>
        

        <meta property="position" content="1" />
      </li>

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem">

        

          

          <span property="name">di.xml文件</span>

        

        <meta property="position" content="2" />
      </li>

    

    </ol>

  </nav>



	

	

	<h1 class="page-heading">di.xml文件</h1>

  


</section>

			<h2 id="overview">Overview</h2>

<p>The <code class="highlighter-rouge">di.xml</code> file configures which <a href="/guides/v2.3/extension-dev-guide/depend-inj.html">dependencies</a> to inject by the <a href="/guides/v2.3/extension-dev-guide/object-manager.html">object manager</a>. You can also specify <a href="#ext-di-sens">sensitive configuration sensitive</a> using <code class="highlighter-rouge">di.xml</code>.</p>

<h2 id="areas-and-application-entry-points">Areas and application entry points</h2>

<p>Each <span term-uuid="c1e4242b-1f1a-44c3-9d72-1d5b1435e142" class="glossary-term" data-toggle="popover">模块</span> can have a global and area-specific <code class="highlighter-rouge">di.xml</code> file.
Magento reads all the <code class="highlighter-rouge">di.xml</code> configuration files declared in the system and merges them all together by appending all nodes.</p>

<p>As a general rule, the area specific <code class="highlighter-rouge">di.xml</code> files should configure dependencies for the presentation layer, and your module’s global <code class="highlighter-rouge">di.xml</code> file should configure the remaining dependencies.</p>

<p>Magento loads The configuration in the following stages:</p>

<ol>
  <li>Initial (<code class="highlighter-rouge">app/etc/di.xml</code>)</li>
  <li>Global (<code class="highlighter-rouge">&lt;moduleDir&gt;/etc/di.xml</code>)</li>
  <li>Area-specific (<code class="highlighter-rouge">&lt;moduleDir&gt;/etc/&lt;area&gt;/di.xml</code>)</li>
</ol>

<p>During <a href="/guides/v2.3/config-guide/bootstrap/magento-bootstrap.html">bootstrapping</a>, each application entry point loads the appropriate <code class="highlighter-rouge">di.xml</code> files for the requested <a href="/guides/v2.3/architecture/archi_perspectives/components/modules/mod_and_areas.html">area</a>.</p>

<p><strong>例如:</strong></p>

<ul>
  <li>
    <p>In <code class="highlighter-rouge">index.php</code>, the <a href="https://github.com/magento/magento2/blob/2.2/lib/internal/Magento/Framework/App/Http.php#L130-L132" target="_blank"><code class="highlighter-rouge">\Magento\Framework\App\Http</code></a> class loads the area based on the front-name provided in <span term-uuid="a05c59d3-77b9-47d0-92a1-2cbffe3f8622" class="glossary-term" data-toggle="popover">url</span>.</p>
  </li>
  <li>
    <p>In <code class="highlighter-rouge">static.php</code>, the <a href="https://github.com/magento/magento2/blob/2.2/lib/internal/Magento/Framework/App/StaticResource.php#L101-L104" target="_blank"><code class="highlighter-rouge">\Magento\Framework\App\StaticResource</code></a> class also loads the area based on the url in the request.</p>
  </li>
  <li>
    <p>In <code class="highlighter-rouge">cron.php</code>, the <a href="https://github.com/magento/magento2/blob/2.2/lib/internal/Magento/Framework/App/Cron.php#L68-L70" target="_blank"><code class="highlighter-rouge">\Magento\Framework\App\Cron</code></a> class always loads the ‘crontab’ area.</p>
  </li>
</ul>

<h2 id="type-configuration">Type configuration</h2>

<p>Type configurations describe an object’s lifestyle and how to instantiate it.</p>

<p>You can configure the type in your <code class="highlighter-rouge">di.xml</code> configuration node in the following ways:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;config</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">"urn:magento:framework:ObjectManager/etc/config.xsd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;virtualType</span> <span class="na">name=</span><span class="s">"moduleConfig"</span> <span class="na">type=</span><span class="s">"Magento\Core\Model\Config"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;arguments&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"type"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>system<span class="nt">&lt;/argument&gt;</span>
        <span class="nt">&lt;/arguments&gt;</span>
    <span class="nt">&lt;/virtualType&gt;</span>
    <span class="nt">&lt;type</span> <span class="na">name=</span><span class="s">"Magento\Core\Model\App"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;arguments&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"config"</span> <span class="na">xsi:type=</span><span class="s">"object"</span><span class="nt">&gt;</span>moduleConfig<span class="nt">&lt;/argument&gt;</span>
        <span class="nt">&lt;/arguments&gt;</span>
    <span class="nt">&lt;/type&gt;</span>
<span class="nt">&lt;/config&gt;</span></code></pre></figure>

<p>The preceding example declares the following types:</p>

<ul>
  <li><code class="highlighter-rouge">moduleConfig</code>: A virtual type that extends the type <code class="highlighter-rouge">Magento\Core\Model\Config</code>.</li>
  <li><code class="highlighter-rouge">Magento\Core\Model\App</code>: All instances of this type receive an instance of <code class="highlighter-rouge">moduleConfig</code> as a dependency.</li>
</ul>

<h3 id="virtual-types">Virtual types</h3>
<p>A <span term-uuid="058b2be4-3247-4cb0-860d-6292ce75d1f0" class="glossary-term" data-toggle="popover">virtual type</span> allows you to change the arguments of a specific injectable dependency and change the behavior of a particular class.
This allows you to use a customized class without affecting other classes that have a dependency on the original.</p>

<p>The example creates a virtual type for <code class="highlighter-rouge">Magento\Core\Model\Config</code> and specifies <code class="highlighter-rouge">system</code> as the constructor argument for <code class="highlighter-rouge">type</code>.</p>

<h2 id="constructor-arguments">Constructor arguments</h2>

<p>You can configure the class constructor arguments in your <code class="highlighter-rouge">di.xml</code> in the argument node.
The object manager injects these arguments into the class during creation.
The name of the argument configured in the <span term-uuid="8c0645c5-aa6b-4a52-8266-5659a8b9d079" class="glossary-term" data-toggle="popover">XML</span> file must correspond to the name of the parameter in the constructor in the configured class.</p>

<p>The following example creates instances of <code class="highlighter-rouge">Magento\Core\Model\Session</code> with the class constructor argument <code class="highlighter-rouge">$sessionName</code> set to a value of <code class="highlighter-rouge">adminhtml</code>:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;config</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">"urn:magento:framework:ObjectManager/etc/config.xsd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;type</span> <span class="na">name=</span><span class="s">"Magento\Core\Model\Session"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;arguments&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"sessionName"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>adminhtml<span class="nt">&lt;/argument&gt;</span>
        <span class="nt">&lt;/arguments&gt;</span>
    <span class="nt">&lt;/type&gt;</span>
<span class="nt">&lt;/config&gt;</span></code></pre></figure>

<h3 id="argument-types">Argument types</h3>

<p><code class="highlighter-rouge">object</code></p>

<dl>
  <dt>Node Formats:</dt>
  <dd>
    <p><code class="highlighter-rouge">&lt;argument xsi:type="object"&gt;{typeName}&lt;/argument&gt;</code></p>
  </dd>
  <dd><code class="highlighter-rouge">&lt;argument xsi:type="object" shared="{shared}"&gt;{typeName}&lt;/argument&gt;</code></dd>
</dl>

<p>Creates an instance of <code class="highlighter-rouge">typeName</code> type and passes it in as an argument.
You can pass any class name, interface name, or virtual type as <code class="highlighter-rouge">typeName</code>.</p>

<p>Setting the <code class="highlighter-rouge">shared</code> property defines the lifestyle of a created instance.
See <a href="#object-lifestyle-configuration">object lifestyle configuration</a>.</p>

<hr />

<p><code class="highlighter-rouge">string</code></p>

<dl>
  <dt>Node Formats:</dt>
  <dd>
    <p><code class="highlighter-rouge">&lt;argument xsi:type="string"&gt;{strValue}&lt;/argument&gt;</code></p>
  </dd>
  <dd><code class="highlighter-rouge">&lt;argument xsi:type="string" translate="true"&gt;{strValue}&lt;/argument&gt;</code></dd>
</dl>

<p>Magento interprets any value for this argument node as a string.</p>

<hr />

<p><code class="highlighter-rouge">boolean</code></p>

<dl>
  <dt>Node Format:</dt>
  <dd>
    <p><code class="highlighter-rouge">&lt;argument xsi:type="boolean"&gt;{boolValue}&lt;/argument&gt;</code></p>
  </dd>
</dl>

<p>Magento converts any value for this argument node into a boolean value.
See table below:</p>

<table>
  <thead>
    <tr>
      <th>Input Type</th>
      <th>Data</th>
      <th>Boolean Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Boolean</td>
      <td>true</td>
      <td>true</td>
    </tr>
    <tr>
      <td>Boolean</td>
      <td>false</td>
      <td>false</td>
    </tr>
    <tr>
      <td>String</td>
      <td>“true”*</td>
      <td>true</td>
    </tr>
    <tr>
      <td>String</td>
      <td>“false”*</td>
      <td>false</td>
    </tr>
    <tr>
      <td>String</td>
      <td>“1”</td>
      <td>true</td>
    </tr>
    <tr>
      <td>String</td>
      <td>“0”</td>
      <td>false</td>
    </tr>
    <tr>
      <td>Integer</td>
      <td>1</td>
      <td>true</td>
    </tr>
    <tr>
      <td>Integer</td>
      <td>0</td>
      <td>false</td>
    </tr>
  </tbody>
</table>

<p><small>*These String literals are case-sensitive</small></p>

<hr />

<p><code class="highlighter-rouge">number</code></p>

<dl>
  <dt>Node Format:</dt>
  <dd>
    <p><code class="highlighter-rouge">&lt;argument xsi:type="number"&gt;{numericValue}&lt;/argument&gt;</code></p>
  </dd>
</dl>

<p>Acceptable values for this type include: integers, floats, or <a href="http://us3.php.net/is_numeric" taget="_blank">numeric strings</a>.</p>

<hr />

<p><code class="highlighter-rouge">init_parameter</code></p>

<dl>
  <dt>Node Format:</dt>
  <dd>
    <p><code class="highlighter-rouge">&lt;argument xsi:type="init_parameter"&gt;{Constant::NAME}&lt;/argument&gt;</code></p>
  </dd>
</dl>

<p>This is the global application initialization argument represented by <code class="highlighter-rouge">Constant::NAME</code>.</p>

<hr />

<p><code class="highlighter-rouge">const</code></p>

<dl>
  <dt>Node Format:</dt>
  <dd>
    <p><code class="highlighter-rouge">&lt;argument xsi:type="const"&gt;{Constant::NAME}&lt;/argument&gt;</code></p>
  </dd>
</dl>

<p>This is the constant value represented by <code class="highlighter-rouge">Constant::NAME</code>.</p>

<hr />

<p><code class="highlighter-rouge">null</code></p>

<dl>
  <dt>Node Format:</dt>
  <dd>
    <p><code class="highlighter-rouge">&lt;argument xsi:type="null"/&gt;</code></p>
  </dd>
</dl>

<p>This indicates a null value.</p>

<hr />

<p><code class="highlighter-rouge">array</code></p>

<dl>
  <dt>Node Format:</dt>
  <dd>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;argument xsi:type="array"&gt;
  &lt;item name="someKey" xsi:type="&lt;type&gt;"&gt;someVal&lt;/item&gt;
&lt;/argument&gt;
</code></pre></div>    </div>
  </dd>
</dl>

<p>Magento builds an array with elements corresponding to the items and passes it as the argument.
The array can contain an infinite number of items, and each array item can be of any object type including an array itself.</p>

<p>When Magento merges the configuration files for a given scope, array arguments with the same name get merged into a new array.</p>

<p>When Magento loads a new configuration at a later time, either by a more specific scope or through code, then any array definitions in the new configuration will replace the loaded config instead of merging.</p>

<hr />

<p><strong>Argument 例如:</strong></p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;config</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">"urn:magento:framework:ObjectManager/etc/config.xsd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;type</span> <span class="na">name=</span><span class="s">"Magento\Example\Type"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;arguments&gt;</span>
            <span class="c">&lt;!-- Pass simple string --&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"stringParam"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>someStringValue<span class="nt">&lt;/argument&gt;</span>
            <span class="c">&lt;!-- Pass instance of Magento\Some\Type --&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"instanceParam"</span> <span class="na">xsi:type=</span><span class="s">"object"</span><span class="nt">&gt;</span>Magento\Some\Type<span class="nt">&lt;/argument&gt;</span>
            <span class="c">&lt;!-- Pass true --&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"boolParam"</span> <span class="na">xsi:type=</span><span class="s">"boolean"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/argument&gt;</span>
            <span class="c">&lt;!-- Pass 1 --&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"intParam"</span> <span class="na">xsi:type=</span><span class="s">"number"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/argument&gt;</span>
            <span class="c">&lt;!-- Pass application init argument, named by constant value --&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"globalInitParam"</span> <span class="na">xsi:type=</span><span class="s">"init_parameter"</span><span class="nt">&gt;</span>Magento\Some\Class::SOME_CONSTANT<span class="nt">&lt;/argument&gt;</span>
            <span class="c">&lt;!-- Pass constant value --&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"constantParam"</span> <span class="na">xsi:type=</span><span class="s">"const"</span><span class="nt">&gt;</span>Magento\Some\Class::SOME_CONSTANT<span class="nt">&lt;/argument&gt;</span>
            <span class="c">&lt;!-- Pass null value --&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"optionalParam"</span> <span class="na">xsi:type=</span><span class="s">"null"</span><span class="nt">/&gt;</span>
            <span class="c">&lt;!-- Pass array --&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"arrayParam"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                <span class="c">&lt;!-- First element is value of constant --&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"firstElem"</span> <span class="na">xsi:type=</span><span class="s">"const"</span><span class="nt">&gt;</span>Magento\Some\Class::SOME_CONSTANT<span class="nt">&lt;/item&gt;</span>
                <span class="c">&lt;!-- Second element is null --&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"secondElem"</span> <span class="na">xsi:type=</span><span class="s">"null"</span><span class="nt">/&gt;</span>
                <span class="c">&lt;!-- Third element is a subarray --&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"thirdElem"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                    <span class="c">&lt;!-- Subarray contains scalar value --&gt;</span>
                    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"scalarValue"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>ScalarValue<span class="nt">&lt;/item&gt;</span>
                    <span class="c">&lt;!-- and application init argument --&gt;</span>
                    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"globalArgument "</span> <span class="na">xsi:type=</span><span class="s">"init_parameter"</span><span class="nt">&gt;</span>Magento\Some\Class::SOME_CONSTANT<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/argument&gt;</span>
        <span class="nt">&lt;/arguments&gt;</span>
    <span class="nt">&lt;/type&gt;</span>
<span class="nt">&lt;/config&gt;</span></code></pre></figure>

<div class="bs-callout bs-callout-info" id="merging-info">
  <p><strong>Merging and Arguments</strong></p>

  <p>During merging, arguments replace other arguments with the same name if their type is different.
If the argument type is the same, then the newer argument replaces the old one.</p>
</div>

<h3 id="abstraction-implementation-mappings">Abstraction-implementation mappings</h3>

<p>The object manager uses abstraction-implementation mappings when the constructor signature of a class requests an object by its interface.
The object manager uses these mappings to determine what the default implementation is for that class for a particular scope.</p>

<p>The <code class="highlighter-rouge">preference</code> node specifies the default implementation:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="c">&lt;!--  File: app/etc/di.xml --&gt;</span>
<span class="nt">&lt;config&gt;</span>
    <span class="nt">&lt;preference</span> <span class="na">for=</span><span class="s">"Magento\Core\Model\UrlInterface"</span> <span class="na">type=</span><span class="s">"Magento\Core\Model\Url"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/config&gt;</span></code></pre></figure>

<p>This mapping is in <code class="highlighter-rouge">app/etc/di.xml</code>, so the object manager injects the <code class="highlighter-rouge">Magento\Core\Model\Url</code> implementation class wherever there is a request for the <code class="highlighter-rouge">Magento\Core\Model\UrlInterface</code> in the global scope.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="c">&lt;!-- File: app/code/core/Magento/Backend/etc/adminhtml/di.xml --&gt;</span>
<span class="nt">&lt;config&gt;</span>
    <span class="nt">&lt;preference</span> <span class="na">for=</span><span class="s">"Magento\Core\Model\UrlInterface"</span> <span class="na">type=</span><span class="s">"Magento\Backend\Model\Url"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/config&gt;</span></code></pre></figure>

<p>This mapping is in <code class="highlighter-rouge">app/code/core/Magento/Backend/etc/adminhtml/di.xml</code>, so the object manager injects the <code class="highlighter-rouge">Magento\Backend\Model\Url</code> implementation class wherever there is a request for the <code class="highlighter-rouge">Magento\Core\Model\UrlInterface</code> in the <span term-uuid="29ddb393-ca22-4df9-a8d4-0024d75739b1" class="glossary-term" data-toggle="popover">admin</span> area.</p>

<h3 id="parameter-configuration-inheritance">Parameter configuration inheritance</h3>

<p>Parameters configured for a class type pass on its configuration to its descendant classes.
Any descendant can override the parameters configured for its supertype; that is, the parent class or interface:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;config</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">"urn:magento:framework:ObjectManager/etc/config.xsd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;type</span> <span class="na">name=</span><span class="s">"Magento\Framework\View\Element\Context"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;arguments&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"urlBuilder"</span> <span class="na">xsi:type=</span><span class="s">"object"</span><span class="nt">&gt;</span>Magento\Core\Model\Url<span class="nt">&lt;/argument&gt;</span>
        <span class="nt">&lt;/arguments&gt;</span>
    <span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;type</span> <span class="na">name=</span><span class="s">"Magento\Backend\Block\Context"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;arguments&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"urlBuilder"</span> <span class="na">xsi:type=</span><span class="s">"object"</span><span class="nt">&gt;</span>Magento\Backend\Model\Url<span class="nt">&lt;/argument&gt;</span>
        <span class="nt">&lt;/arguments&gt;</span>
    <span class="nt">&lt;/type&gt;</span>
<span class="nt">&lt;/config&gt;</span></code></pre></figure>

<p>In the preceding example, <a href="https://github.com/magento/magento2/blob/2.0/app/code/Magento/Backend/Block/Context.php" target="_blank"><code class="highlighter-rouge">Magento\Backend\Block\Context</code></a> is a descendant of <a href="https://github.com/magento/magento2/blob/2.0/lib/internal/Magento/Framework/View/Element/Context.php" target="_blank"><code class="highlighter-rouge">Magento\Framework\View\Element\Context</code></a>.</p>

<p>The first entry configures all instances of <code class="highlighter-rouge">Magento\Framework\View\Element\Context</code> as well as its children to pass in <a href="https://github.com/magento/magento2/blob/2.0/lib/internal/Magento/Framework/Url.php" target="_blank"><code class="highlighter-rouge">Magento\Core\Model\Url</code></a> as <code class="highlighter-rouge">$urlBuilder</code> in their constructors.</p>

<p>The second entry overrides this and configures all instances of <code class="highlighter-rouge">Magento\Backend\Block\Context</code> to use <a href="https://github.com/magento/magento2/blob/2.0/app/code/Magento/Backend/Model/Url.php" target="_blank"><code class="highlighter-rouge">Magento\Backend\Model\Url</code></a> as the <code class="highlighter-rouge">$urlBuilder</code> instead.</p>

<h2 id="object-lifestyle-configuration">Object lifestyle configuration</h2>

<p>The lifestyle of an object determines the number of instances that can exist of that object.</p>

<p>You can configure dependencies in Magento to have the following lifestyles:</p>

<ul>
  <li><strong>singleton</strong>(default) - One instance of this class exists. The object manager creates it at the first request.
Requesting the class again returns the same instance.
Disposing or ending the container registered to it releases the instance.</li>
  <li><strong>transient</strong> - The object manager creates a new instance of the class for every request.</li>
</ul>

<p>The <code class="highlighter-rouge">shared</code> property determines the lifestyle of both <code class="highlighter-rouge">argument</code> and <code class="highlighter-rouge">type</code> configurations.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;config</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">"urn:magento:framework:ObjectManager/etc/config.xsd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;type</span> <span class="na">name=</span><span class="s">"Magento\Filesystem"</span> <span class="na">shared=</span><span class="s">"false"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;arguments&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"adapter"</span> <span class="na">xsi:type=</span><span class="s">"object"</span> <span class="na">shared=</span><span class="s">"false"</span><span class="nt">&gt;</span>Magento\Filesystem\Adapter\Local<span class="nt">&lt;/argument&gt;</span>
        <span class="nt">&lt;/arguments&gt;</span>
    <span class="nt">&lt;/type&gt;</span>
<span class="nt">&lt;/config&gt;</span></code></pre></figure>

<p>In this example <code class="highlighter-rouge">Magento\Filesystem</code> is not shared, so all clients will retrieve separate instances of <code class="highlighter-rouge">Magento\Filesystem</code>.
Also, every instance of <code class="highlighter-rouge">Magento\Filesystem</code> will get separate instance of <code class="highlighter-rouge">$adapter</code>, because it too is non-shared.</p>

<h2 id="ext-di-sens">敏感的和系统特定的 configuration settings</h2>

<p>For multi-system deployments, such as the <a href="/guides/v2.3/config-guide/deployment/pipeline/">pipeline deployment model</a>, you can specify the following types of configuration settings:</p>

<table>
  <tbody>
    <tr>
      <td>shared</td>
      <td>Settings that are shared between systems using <code class="highlighter-rouge">app/etc/config.php</code></td>
    </tr>
    <tr>
      <td>sensitive</td>
      <td>Settings that are restricted or confidential</td>
    </tr>
    <tr>
      <td>system-specific</td>
      <td>Settings that are unique to a particular system or environment</td>
    </tr>
  </tbody>
</table>

<p>The following code sample is a template for specifying values as sensitive or system-specific:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nt">&lt;type</span> <span class="na">name=</span><span class="s">"Magento\Config\Model\Config\TypePool"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;arguments&gt;</span>
      <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"VALUE_TYPE"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"CONFIG_PATH"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>ARGUMENT_VALUE<span class="nt">&lt;/item&gt;</span>
      <span class="nt">&lt;/argument&gt;</span>
   <span class="nt">&lt;/arguments&gt;</span>
<span class="nt">&lt;/type&gt;</span></code></pre></figure>

<table>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">VALUE_TYPE</code></td>
      <td>Specifies the type of value: either <code class="highlighter-rouge">sensitive</code>或<code class="highlighter-rouge">environment</code>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">CONFIG_PATH</code></td>
      <td>A unique, <code class="highlighter-rouge">/</code>-delimited string that identifies this configuration setting.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ARGUMENT_VALUE</code></td>
      <td>A value of <code class="highlighter-rouge">1</code> indicates the <code class="highlighter-rouge">CONFIG_PATH</code> value is sensitive or system-specific. The default <code class="highlighter-rouge">0</code> value indicates it is neither sensitive nor system specific.</td>
    </tr>
  </tbody>
</table>

<p>Do not share sensitive or system-specific settings stored in <code class="highlighter-rouge">app/etc/env.php</code> between development and production systems.</p>

<p>See <a href="/guides/v2.3/extension-dev-guide/configuration/sensitive-and-environment-settings.html">sensitive and environment settings</a> for more information and examples.</p>

<h3 id="information-related-to-pipeline-deployment">Information related to pipeline deployment</h3>

<ul>
  <li><a href="/guides/v2.3/extension-dev-guide/configuration/sensitive-and-environment-settings.html">Guidelines for specifying system-specific and sensitive configuration values</a></li>
  <li><a href="/guides/v2.3/config-guide/prod/config-reference-sens.html">敏感的和系统特定的 configuration paths reference</a></li>
  <li><a href="/guides/v2.3/config-guide/prod/config-reference-b2b.html">Magento企业版B2B扩展配置路径参考</a></li>
</ul>

<h2 id="相关主题">相关主题</h2>

<ul>
  <li><a href="/guides/v2.3/extension-dev-guide/object-manager.html">ObjectManager</a></li>
  <li><a href="/guides/v2.3/extension-dev-guide/depend-inj.html">依赖注入</a></li>
  <li><a href="/guides/v2.3/extension-dev-guide/configuration/sensitive-and-environment-settings.html">敏感数据和环境变量</a></li>
</ul>

			
		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

    
  
    
    <div class="github-link">
      <a class="improve-page" href="https://github.com/magento/devdocs/blob/develop/guides/v2.3/extension-dev-guide/build/di-xml-file.md" target="_blank">
        去GitHub上编辑
      </a>
    </div>
    
  
    
    <div class="new-issue">
      <a href="https://github.com/magento/devdocs/issues/new?title=Feedback on page: /guides/v2.3/extension-dev-guide/build/di-xml-file.html" target="_blank">反馈</a>
    </div>
    
  
  </div>

	</section>
	<!-- /.content -->

</div> <!-- /.content-container -->


	</div>
	<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav footer-links">
  <li><a href="/guides/v2.3/contributor-guide/contributing_docs.html">成为贡献者</a>
  <li><a href="https://magento.github.io/glossary/index.html?audience=developer">术语表</a></li>
  <li><a href="http://magento.com/legal/terms/privacy/">隐私政策</a></li>
  <li><a href="http://magento.com/legal/terms/">服务条款</a></li>
  <li><a href="http://magento.com/legal/licensing/">许可/商标 常见问题</a></li>
  <li><a href="/guides/v2.3/release-notes/bk-release-notes.html">版本日志</a></li>
  <li><a href="/magento-third-party.html">三方许可</a></li>
</ul>

    </div>

		<div class="copyright-date">&copy; 2018 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/assets/js/app.min.js"></script>


<script src="/common/js/devdocs.min.js"></script>




</body>
</html>

