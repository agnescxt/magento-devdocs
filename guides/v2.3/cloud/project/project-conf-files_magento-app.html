<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Application | Magento 2 Developer Documentation</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">

	<link rel="stylesheet" href="/assets/css/app.css" />
	<link rel="stylesheet" href="/assets/css/print.css" media="print"/>

	<link rel="stylesheet" href="/common/css/devdocs.css" />

	<script>
  var baseUrl = "";
  var algolia = {
    id : "E642SEDTHL",
    index:  "devdocs",
    key:  "d2d0f33ab73e291ef8d88d8b565e754c"
  };
</script>




	<link rel="canonical" href="http://localhost:4000/guides/v2.3/cloud/project/project-conf-files_magento-app.html">

	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body class="layout-default">

	<header class="site-header">

		<nav class="site-nav">

  <div class="menu-btn">
    <a id="menu-btn" class="menu-trigger menu-icon" href="#nav-main" aria-haspopup="true" aria-controls="nav-main"></a>
  </div>

  <div class="nav-container">

    <a class="logo" href="/guides/v2.3/">
      <img src="/assets/i/m-logo.svg" alt=""><img src="/assets/i/magento-logo.svg" alt="Magento" class="magento-logo" />
      <span class="site-logo">DevDocs</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      
<div class="version-switcher dropdown" data-version="2.3">
	<button id="version-switcher-button" class="btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Magento 2.3 Pre-release
	</button>

	<ul class="dropdown-menu dropdown-menu-left" aria-labelledby="version-switcher-button">
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.0/cloud/project/project-conf-files_magento-app.html">Magento 2.0</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.1/cloud/project/project-conf-files_magento-app.html">Magento 2.1</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.2/cloud/project/project-conf-files_magento-app.html">Magento 2.2</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.3/cloud/project/project-conf-files_magento-app.html">Magento 2.3 Pre-release</a></li>
	
  </ul>

</div>


      <!-- Main Navigation -->
<ul class="nav-main" role="menubar">

  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">部署</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          <li><a href="/guides/v2.3/install-gde/bk-install-guide.html">安装向导</a></li>
          
          <li><a href="/guides/v2.3/config-guide/bk-config-guide.html">配置手册</a></li>
          
          <li><a href="/guides/v2.3/performance-best-practices/index.html">高效实践</a></li>
          
          <li><a href="/guides/v2.3/migration/bk-migration-guide.html">迁移指引</a></li>
          <li><a href="/guides/v2.3/cloud/bk-cloud.html">上云指引</a></li>
          <li><a href="/magento-release-information.html">版本日志</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">开发</span>

    <div class="nav-popup" role="menu" aria-hidden="true">

      <div class="nav-section">
        <div class="nav-section-title">服务端</div>
        <ul>
          <li><a href="/guides/v2.3/architecture/bk-architecture.html">架构说明</a></li>
          <li><a href="/guides/v2.3/extension-dev-guide/bk-extension-dev-guide.html">PHP开发文档</a></li>
          <li><a href="/guides/v2.3/ext-best-practices/bk-ext-best-practices.html">扩展开发实践</a></li>
          <li><a href="/guides/v2.3/mrg/intro.html">各模块介绍</a></li>
          <li><a href="/guides/v2.3/coding-standards/bk-coding-standards.html">编码规范</a></li>
          <li><a href="/guides/v2.3/contributor-guide/contributing.html">贡献指引</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">前端</div>
        <ul>
          <li class=""><a href="/guides/v2.3/frontend-dev-guide/bk-frontend-dev-guide.html">前端工程师手册</a></li>
          
          <li><a href="/guides/v2.3/ui_comp_guide/bk-ui_comps.html">UI组件手册</a></li>
          
          <li><a href="/guides/v2.3/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript开发手册</a></li>
          <li><a href="/guides/v2.3/pattern-library/bk-pattern.html">管理面板设计模式及所用库</a></li>
          <li><a href="/guides/v2.3/design-styleguide/bk-styleguide.html">管理面板样式手册</a></li>
          <li><a href="https://magento-research.github.io/pwa-devdocs/">PWA Studios</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title"><abbr>API</abbr></div>
        <ul>
          <li><a href="/guides/v2.3/get-started/bk-get-started-api.html">Web APIs起步</a></li>
          <li><a href="/guides/v2.3/rest/bk-rest.html">REST API参考</a></li>
          <li><a href="/guides/v2.3/soap/bk-soap.html">SOAP API参考</a></li>
          
          <li><a href="/guides/v2.3/graphql/index.html">GraphQL开发者手册(新!)</a></li>
          
          
          <li><a href="/guides/v2.3/marketplace/eqp/api.html">Marketplace EQP API Reference</a></li>
          
        </ul>
      </div>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">测试</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        <li><a href="/guides/v2.3/test/testing.html">Magento测试手册</a></li>
        
        <li><a href="/guides/v2.3/magento-functional-testing-framework/release-2/introduction.html">功能验收测试(新!)</a></li>
        
        <li><a href="/guides/v2.3/mtf/mtf_introduction.html">功能测试</a></li>
        <li><a href="/guides/v2.3/test/integration/integration_test_execution.html">集成测试</a></li>
        <li><a href="/guides/v2.3/test/js/jasmine.html">JavaScript单元测试</a></li>
        <li><a href="/guides/v2.3/test/unit/unit_test_execution.html">PHP单元测试</a></li>
        <li><a href="/guides/v2.3/get-started/web-api-functional-testing.html">Web API功能测试</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-separator"></li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">功能文档</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          
          <li class="leaf"><a href="/guides/v2.3/advanced-reporting/overview.html">高级报表</a></li>
          
        
        <li class="leaf"><a href="/guides/v2.3/b2b/bk-b2b.html">B2B</a></li>
        
        <li><a href="/guides/v2.3/howdoi/checkout/checkout_overview.html">Checkout</a></li>
        <li><a href="/guides/v2.3/payments-integrations/bk-payments-integrations.html">支付集成</a></li>
        
          <li><a href="/guides/v2.3/extension-dev-guide/staging.html">Staging</a></li>
        
      </ul>
    </div>

  </li>


  <li class="nav-main-item"  tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">指引</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        <li><a href="/guides/v2.3/howdoi/bk-how-do-i.html">如何</a></li>
        
        <li><a  data-proofer-ignore href="/guides/v2.3/get-started/order-tutorial/order-intro.html">使用EST APIs处理订单</a></li>
        

        <li><a href="/videos/">视频教程</a></li>
      </ul>
    </div>

  </li>

</ul><!-- /.nav-main -->

    </div>

    <div class="search-btn">
      <a class="search-trigger search-icon" href="#"></a>
    </div>

    <form class="quick-search" action="/guides/v2.3/search.html" method="get" novalidate="novalidate">
      <input type="search" name="q" placeholder="Search" />
      <a href="#" class="quick-search-close">&times;</a>
    </form>

  </div>

</nav><!-- #site-nav -->
<div class="nav-main-fader"></div>


	</header>

	<div class="global-wrapper">

		<div class="main-container">
			<a id="main-content"></a>


<div class="content-container">

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" data-proofer-ignore class="toc-toggler">内容表格</a>
	<div class="sidebar-wrapper">

		

		<h4 class="guide-title"></h4>
		<div class="collapsible-navigation">
		    <ul>
		    
		    	

<li class="nav-level1  " id="欢迎使用magento企业版(云支持版)">
    

    
    <a href="/guides/v2.3/cloud/bk-cloud.html">欢迎使用Magento企业版(云支持版)</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="订阅和计划">

            

            
            <a href="/guides/v2.3/cloud/basic-information/cloud-plans.html">订阅和计划</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="新手上路任务">

            

            
            <a href="/guides/v2.3/cloud/onboarding/onboarding-tasks.html">新手上路任务</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="architecture">
    

    
    <a href="/guides/v2.3/cloud/architecture/cloud-architecture.html">Architecture</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="架构起步">

            

            
            <a href="/guides/v2.3/cloud/basic-information/starter-architecture.html">架构起步</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="开发和部署工作流起步">

            

            
            <a href="/guides/v2.3/cloud/basic-information/starter-develop-deploy-workflow.html">开发和部署工作流起步</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="pro-architecture">

            

            
            <a href="/guides/v2.3/cloud/architecture/pro-architecture.html">Pro architecture</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="pro-develop-and-deploy-workflow">

            

            
            <a href="/guides/v2.3/cloud/architecture/pro-develop-deploy-workflow.html">Pro develop and deploy workflow</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="pro-architecture-(legacy)">

            

            
            <a href="/guides/v2.3/cloud/architecture/pro-architecture-legacy.html">Pro architecture (legacy)</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="add-staging-and-production-to-pro-projects-ui">

            

            
            <a href="/guides/v2.3/cloud/trouble/pro-env-management.html">Add Staging and Production to Pro projects UI</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="技术和要求">
    

    
    <a href="/guides/v2.3/cloud/requirements/cloud-requirements.html">技术和要求</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="composer">

            

            
            <a href="/guides/v2.3/cloud/reference/cloud-composer.html">Composer</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento-cloud-cli">

            

            
            <a href="/guides/v2.3/cloud/reference/cli-ref-topic.html">Magento Cloud CLI</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="git">

            

            
            <a href="/guides/v2.3/cloud/reference/git-integration.html">Git</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="bitbucket集成">

            

            
            <a href="/guides/v2.3/cloud/project/bitbucket-integration.html">Bitbucket集成</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="github集成">

            

            
            <a href="/guides/v2.3/cloud/project/project-integrate-github.html">Github集成</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="ssh和sftp">

            

            
            <a href="/guides/v2.3/cloud/env/environments-ssh.html">SSH和sFTP</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="new-relic-apm">

            

            
            <a href="/guides/v2.3/cloud/project/new-relic.html">New Relic APM</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="blackfire.io">

            

            
            <a href="/guides/v2.3/cloud/project/project-integrate-blackfire.html">Blackfire.io</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="sendgrid">

            

            
            <a href="/guides/v2.3/cloud/project/sendgrid.html">SendGrid</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="本地环境设置">
    

    
    <a href="/guides/v2.3/cloud/access-acct/first-time-setup.html">本地环境设置</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="本地环境设置准备">

            

            
            <a href="/guides/v2.3/cloud/before/before-workspace.html">本地环境设置准备</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="安装magento所需的必要软件">

            

            
            <a href="/guides/v2.3/cloud/before/before-workspace-magento-prereqs.html">安装Magento所需的必要软件</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="启用ssh密钥登录">

            

            
            <a href="/guides/v2.3/cloud/before/before-workspace-ssh.html">启用ssh密钥登录</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="设置magento文件系统所有者">

            

            
            <a href="/guides/v2.3/cloud/before/before-workspace-file-sys-owner.html">设置Magento文件系统所有者</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="克隆并开发项目分支">

            

            
            <a href="/guides/v2.3/cloud/before/before-setup-env-2_clone.html">克隆并开发项目分支</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="安装magento">

            

            
            <a href="/guides/v2.3/cloud/before/before-setup-env-install.html">安装Magento</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="首次部署">

            

            
            <a href="/guides/v2.3/cloud/access-acct/first-time-deploy.html">首次部署</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="可选---安装样本数据">

            

            
            <a href="/guides/v2.3/cloud/howtos/sample-data.html">可选 - 安装样本数据</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="可选---配置xdebug">

            

            
            <a href="/guides/v2.3/cloud/howtos/debug.html">可选 - 配置Xdebug</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="导入现存的代码到项目">
    

    
    <a href="/guides/v2.3/cloud/access-acct/first-time-setup_import-first-steps.html">导入现存的代码到项目</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="prepare-your-existing-magento-commerce-system">

            

            
            <a href="/guides/v2.3/cloud/access-acct/first-time-setup_import-prepare.html">Prepare your existing Magento Commerce system</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="import-magento-commerce-into-magento企业版(云支持版)">

            

            
            <a href="/guides/v2.3/cloud/access-acct/first-time-setup_import-import.html">Import Magento Commerce into Magento企业版(云支持版)</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="配置你的网店">
    

    
    <a href="/guides/v2.3/cloud/configure/configuration-overview.html">配置你的网店</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="网店配置最佳实践">

            

            
            <a href="/guides/v2.3/cloud/configure/configure-best-practices.html">网店配置最佳实践</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="set-up-paypal">

            

            
            <a href="/guides/v2.3/cloud/live/paypal-onboarding.html">Set up PayPal</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="设置magento-b2b">

            

            
            <a href="/guides/v2.3/cloud/configure/setup-b2b.html">设置Magento B2B</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="设置定时任务">

            

            
            <a href="/guides/v2.3/cloud/configure/setup-cron-jobs.html">设置定时任务</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="set-up-multiple-cloud-websites-or-stores">

            

            
            <a href="/guides/v2.3/cloud/project/project-multi-sites.html">Set up multiple Cloud websites or stores</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="install,-manage,-and-upgrade-modules">

            

            
            <a href="/guides/v2.3/cloud/howtos/install-components.html">Install, manage, and upgrade modules</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="安装一个主题">

            

            
            <a href="/guides/v2.3/cloud/howtos/custom-theme.html">安装一个主题</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="快速配置">
    

    
    <a href="/guides/v2.3/cloud/basic-information/cloud-fastly.html">快速配置</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="快速设置">

            

            
            <a href="/guides/v2.3/cloud/access-acct/fastly.html">快速设置</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="快速定制vcl片段">

            

            
            <a href="/guides/v2.3/cloud/configure/cloud-vcl-custom-snippets.html">快速定制VCL片段</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="定制vcl白名单">

            

            
            <a href="/guides/v2.3/cloud/configure/fastly-vcl-whitelist.html">定制VCL白名单</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="定制vcl黑名单">

            

            
            <a href="/guides/v2.3/cloud/configure/fastly-vcl-blacklist.html">定制VCL黑名单</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="vcl自定义延长管理员超时">

            

            
            <a href="/guides/v2.3/cloud/configure/fastly-vcl-extend-timeout.html">VCL自定义延长管理员超时</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="vcl自定义自重向到wordpress">

            

            
            <a href="/guides/v2.3/cloud/configure/fastly-vcl-wordpress.html">VCL自定义自重向到WordPress</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="vcl自定义块坏引用">

            

            
            <a href="/guides/v2.3/cloud/configure/fastly-vcl-badreferer.html">VCL自定义块坏引用</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="快速故障排查">

            

            
            <a href="/guides/v2.3/cloud/trouble/trouble_fastly.html">快速故障排查</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="配置环境">
    

    
    <a href="/guides/v2.3/cloud/env/environments.html">配置环境</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2 active " id="application">

            

            
            <a href="/guides/v2.3/cloud/project/project-conf-files_magento-app.html">Application</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="构建和部署">

            

            
            <a href="/guides/v2.3/cloud/project/magento-env-yaml.html">构建和部署</a>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="设置通知">
                    

                    
                    <a  href="/guides/v2.3/cloud/env/setup-notifications.html">设置通知</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="日志处理">
                    

                    
                    <a  href="/guides/v2.3/cloud/env/log-handlers.html">日志处理</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="小向导">
                    

                    
                    <a  href="/guides/v2.3/cloud/env/smart-wizards.html">小向导</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="环境变量">

            

            
            <a href="/guides/v2.3/cloud/env/variables-intro.html">环境变量</a>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="应用程序变量">
                    

                    
                    <a  href="/guides/v2.3/cloud/env/environment-vars_magento.html">应用程序变量</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="构建变量">
                    

                    
                    <a  href="/guides/v2.3/cloud/env/variables-build.html">构建变量</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="云变量">
                    

                    
                    <a  href="/guides/v2.3/cloud/env/variables-cloud.html">云变量</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="deploy-variables">
                    

                    
                    <a  href="/guides/v2.3/cloud/env/variables-deploy.html">Deploy variables</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="部署后变量">
                    

                    
                    <a  href="/guides/v2.3/cloud/env/variables-post-deploy.html">部署后变量</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="在变量下工作">
                    

                    
                    <a  href="/guides/v2.3/cloud/env/working-with-variables.html">在变量下工作</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="routes">

            

            
            <a href="/guides/v2.3/cloud/project/project-conf-files_routes.html">Routes</a>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="caching">
                    

                    
                    <a  href="/guides/v2.3/cloud/project/project-routes-more-cache.html">Caching</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="redirects">
                    

                    
                    <a  href="/guides/v2.3/cloud/project/project-routes-more-redir.html">Redirects</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="服务端引入">
                    

                    
                    <a  href="/guides/v2.3/cloud/project/project-routes-more-ssi.html">服务端引入</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="services">

            

            
            <a href="/guides/v2.3/cloud/project/project-conf-files_services.html">Services</a>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="设置mysql服务">
                    

                    
                    <a  href="/guides/v2.3/cloud/project/project-conf-files_services-mysql.html">设置MySQL服务</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="设置redis服务">
                    

                    
                    <a  href="/guides/v2.3/cloud/project/project-conf-files_services-redis.html">设置Redis服务</a>
                    

                    
                </li>
                
                

                
                

                
                
                <li class="nav-level3  " id="设置elasticsearch服务">
                    

                    
                    <a  href="/guides/v2.3/cloud/project/project-conf-files_services-elastic.html">设置Elasticsearch服务</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="设置rabbitmq服务">
                    

                    
                    <a  href="/guides/v2.3/cloud/project/project-conf-files_services-rabbit.html">设置RabbitMQ服务</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="网店设置的配置管理">
    

    
    <a href="/guides/v2.3/cloud/live/sens-data-over.html">网店设置的配置管理</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="管理系统特定配置的示例">

            

            
            <a href="/guides/v2.3/cloud/live/sens-data-initial.html">管理系统特定配置的示例</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="管理你的项目">
    

    
    <a href="/guides/v2.3/cloud/project/projects.html">管理你的项目</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="配置你的项目">

            

            
            <a href="/guides/v2.3/cloud/project/project-webint-basic.html">配置你的项目</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="项目结构">

            

            
            <a href="/guides/v2.3/cloud/project/project-start.html">项目结构</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="创建和管理用户">

            

            
            <a href="/guides/v2.3/cloud/project/user-admin.html">创建和管理用户</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="manage-branches-with-the-interface">

            

            
            <a href="/guides/v2.3/cloud/project/project-webint-branch.html">Manage branches with the Interface</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="使用命令行管理分支">

            

            
            <a href="/guides/v2.3/cloud/env/environments-start.html">使用命令行管理分支</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="快照和备份管理">

            

            
            <a href="/guides/v2.3/cloud/project/project-webint-snap.html">快照和备份管理</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="部署你的网店">
    

    
    <a href="/guides/v2.3/cloud/live/stage-prod-live.html">部署你的网店</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="部署过程">

            

            
            <a href="/guides/v2.3/cloud/reference/discover-deploy.html">部署过程</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="continuous-deployment">

            

            
            <a href="/guides/v2.3/cloud/deploy/continuous-deployment.html">Continuous deployment</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="保护块">

            

            
            <a href="/guides/v2.3/cloud/live/live-prot.html">保护块</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="在本地构建和部署">

            

            
            <a href="/guides/v2.3/cloud/live/live-sanity-check.html">在本地构建和部署</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="准备部署准生产和生产环境">

            

            
            <a href="/guides/v2.3/cloud/live/stage-prod-migrate-prereq.html">准备部署准生产和生产环境</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="部署代码并迁移静态文件和数据">

            

            
            <a href="/guides/v2.3/cloud/live/stage-prod-migrate.html">部署代码并迁移静态文件和数据</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="测试部署">

            

            
            <a href="/guides/v2.3/cloud/live/stage-prod-test.html">测试部署</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="上线和发布">
    

    
    <a href="/guides/v2.3/cloud/live/live.html">上线和发布</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="上线检查">

            

            
            <a href="/guides/v2.3/cloud/live/go-live-checklist.html">上线检查</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="发布步骤">

            

            
            <a href="/guides/v2.3/cloud/live/launch-steps.html">发布步骤</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="故障排除">
    

    
    <a href="/guides/v2.3/cloud/trouble/trouble.html">故障排除</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="部署故障排查">

            

            
            <a href="/guides/v2.3/cloud/access-acct/trouble.html">部署故障排查</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="查看日志排查故障">

            

            
            <a href="/guides/v2.3/cloud/trouble/environments-logs.html">查看日志排查故障</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="证书不正确">

            

            
            <a href="/guides/v2.3/cloud/trouble/trouble_ce-creds.html">证书不正确</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="新项目的问题解决">

            

            
            <a href="/guides/v2.3/cloud/trouble/trouble_proj-startover.html">新项目的问题解决</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="组件部署失败">

            

            
            <a href="/guides/v2.3/cloud/trouble/trouble_comp-deploy-fail.html">组件部署失败</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="redis问题排查">

            

            
            <a href="/guides/v2.3/cloud/trouble/redis-troubleshooting.html">Redis问题排查</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="重置定时任务">

            

            
            <a href="/guides/v2.3/cloud/trouble/reset-cron-jobs.html">重置定时任务</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="解决加密密钥问题">

            

            
            <a href="/guides/v2.3/cloud/trouble/trouble-crypt-key-variable.html">解决加密密钥问题</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="解决html最小化问题">

            

            
            <a href="/guides/v2.3/cloud/trouble/trouble-error-html-minification.html">解决HTML最小化问题</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="解决部署期间的google分析问题">

            

            
            <a href="/guides/v2.3/cloud/trouble/trouble-google-analytics-deploy.html">解决部署期间的google分析问题</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="恢复配置文件">

            

            
            <a href="/guides/v2.3/cloud/trouble/restore-configuration-files.html">恢复配置文件</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="站点可用性">

            

            
            <a href="/guides/v2.3/cloud/trouble/site-availability.html">站点可用性</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="添加站点地图和搜索引擎的robots文件">

            

            
            <a href="/guides/v2.3/cloud/trouble/robots-sitemap.html">添加站点地图和搜索引擎的robots文件</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="主题问题排查">

            

            
            <a href="/guides/v2.3/cloud/trouble/theme-troubleshooting.html">主题问题排查</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="消息队列">

            

            
            <a href="/guides/v2.3/cloud/trouble/message-queues.html">消息队列</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="升级和补丁">
    

    
    <a href="/guides/v2.3/cloud/project/project-upgrade-parent.html">升级和补丁</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="patch-cloud工具">

            

            
            <a href="/guides/v2.3/cloud/composer-packages/ece-tools.html">Patch Cloud工具</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento企业版(云支持版)补丁">

            

            
            <a href="/guides/v2.3/cloud/project/project-patch.html">Magento企业版(云支持版)补丁</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento企业版(云支持版)升级">

            

            
            <a href="/guides/v2.3/cloud/project/project-upgrade.html">Magento企业版(云支持版)升级</a>
            

            
        </li>
        
        
        
        
    </ul>
    
</li>


		    
		    </ul>
		</div>

	</div>

</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	

  <nav class="breadcrumbs">

    <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      <li class="breadcrumb-item"><a class="breadcrumb-item" href="/guides/v2.3/"><span>首页</span></a></li>

    <!-- Iteration breadcrumb item -->
    
    

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">

        
          <a property="item" typeof="WebPage" href="/guides/v2.3/cloud/bk-cloud.html">
            <span property="name">欢迎使用Magento企业版(云支持版)</span>
          </a>
        

        <meta property="position" content="1" />
      </li>

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem">

        

          

          <span property="name">Application</span>

        

        <meta property="position" content="2" />
      </li>

    

    </ol>

  </nav>



	

	

	<h1 class="page-heading">Application</h1>

  


</section>

			<p>The <code class="highlighter-rouge">.magento.app.yaml</code> file controls the way your application builds and deploys. Although Magento企业版(云支持版) supports multiple applications per project, typically, a project has a single application with the <code class="highlighter-rouge">.magento.app.yaml</code> file at the root of the repository.</p>

<p>The <code class="highlighter-rouge">.magento.app.yaml</code> has many default values, see <a href="https://github.com/magento/magento-cloud/blob/master/.magento.app.yaml" target="\_blank">a sample <code class="highlighter-rouge">.magento.app.yaml</code> file</a>. Make sure to review the <code class="highlighter-rouge">.magento.app.yaml</code> for your installed version. This file can differ across Magento企业版(云支持版) versions.</p>

<div class="bs-callout bs-callout-info" id="info">
  <p>For Pro projects **created before October 23, 2017**, the changes you make using this YAML file affects your Integration environment only. To make these changes in a Staging or Production environment, you must <a href="/guides/v2.3/cloud/trouble/pro-env-management.html">Add Staging and Production to Pro projects UI</a>.</p>
</div>

<h2 id="properties">Properties</h2>
<p>Use the following properties to build your application configuration file. The <code class="highlighter-rouge">name</code>, <code class="highlighter-rouge">type</code>, <code class="highlighter-rouge">disk</code>, and one <code class="highlighter-rouge">web</code>或<code class="highlighter-rouge">worker</code> block is required.</p>

<h3 id="name"><code class="highlighter-rouge">name</code></h3>
<p>Magento Commerce supports multiple applications in a project, so you need a unique name that identifies the application in the project.</p>

<p>The <code class="highlighter-rouge">name</code> property can consist only of lower case alphanumeric characters, such as <code class="highlighter-rouge">a</code> to <code class="highlighter-rouge">z</code> and <code class="highlighter-rouge">0</code> to <code class="highlighter-rouge">9</code>. The name is used in the <a href="/guides/v2.3/cloud/project/project-conf-files_routes.html"><code class="highlighter-rouge">routes.yaml</code></a> file to define the HTTP upstream (by default, <code class="highlighter-rouge">php:http</code>). For example, if the value of <code class="highlighter-rouge">name</code> is <code class="highlighter-rouge">app</code>, you must use <code class="highlighter-rouge">app:http</code> in the upstream field. You can also use this name in multi-application relationships.</p>

<!-- Available note types: "info", "warning", "tip" -->

<div class="bs-callout bs-callout-info" id="info">
  <p>Do not change the name of an application after it has been deployed.</p>
</div>

<h3 id="type-and-build"><code class="highlighter-rouge">type</code> and <code class="highlighter-rouge">build</code></h3>
<p>The <code class="highlighter-rouge">type</code>  and <code class="highlighter-rouge">build</code> properties are used to build and run the project. The only supported <code class="highlighter-rouge">type</code> currently is <span term-uuid="bf703ab1-ca4b-48f9-b2b7-16a81fd46e02" class="glossary-term" data-toggle="popover">PHP</span>. Supported versions:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>type: php:7.0
</code></pre></div></div>

<p>The <code class="highlighter-rouge">build</code> property determines what happens by default when building the project. The only value currently supported is <code class="highlighter-rouge">composer</code>.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">type</span><span class="pi">:</span> <span class="s">php:7.0</span>
<span class="na">build</span><span class="pi">:</span>
    <span class="na">flavor</span><span class="pi">:</span> <span class="s">composer</span>
</code></pre></div></div>

<h3 id="access"><code class="highlighter-rouge">access</code></h3>
<p>Defines the user roles that can log in to the environments.</p>

<p>Possible values are:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh: admin
ssh: contributor
ssh: viewer
</code></pre></div></div>

<h3 id="relationships"><code class="highlighter-rouge">relationships</code></h3>
<p>Defines the service mapping in your application.</p>

<p>The left-hand side is the name of the relationship as it will be exposed to the application in the <code class="highlighter-rouge">MAGENTO_CLOUD_RELATIONSHIPS</code> environment variable. The right-hand side is in the form <code class="highlighter-rouge">&lt;service name&gt;:&lt;endpoint name&gt;</code>, where <code class="highlighter-rouge">&lt;service name&gt;</code> comes from <code class="highlighter-rouge">.magento/services.yaml</code> and  <code class="highlighter-rouge">&lt;endpoint name&gt;</code> should be the same as the value of <code class="highlighter-rouge">type</code>  declared in that same file.</p>

<p>Example of valid options are:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>database: "mysql:mysql"
database2: "mysql2:mysql"
cache: "arediscache:redis"
search: "searchengine:solr"
</code></pre></div></div>

<p>See <a href="/guides/v2.3/cloud/project/project-conf-files_services.html">Services</a> for a full list of currently supported service types and endpoints.</p>

<h3 id="web"><code class="highlighter-rouge">web</code></h3>
<p><code class="highlighter-rouge">web</code> defines how your application is exposed to the web (in HTTP). Here we tell the web application how to serve content, from the front-controller script to a non-static request to an <code class="highlighter-rouge">index.php</code> file on the root. We support any directory structure so the static file can be in a sub directory, and the <code class="highlighter-rouge">index.php</code> file can be further down.</p>

<p><code class="highlighter-rouge">web</code> supports the following:</p>

<ul>
  <li><code class="highlighter-rouge">document_root</code>: The path relative to the root of the application that is exposed on the web. Typical values include <code class="highlighter-rouge">/public</code> and <code class="highlighter-rouge">/web</code>.</li>
  <li><code class="highlighter-rouge">passthru</code>: The URL used in the event a static file or PHP file could not be found. This would typically be your applications front controller, often <code class="highlighter-rouge">/index.php</code>或<code class="highlighter-rouge">/app.php</code>.</li>
  <li><code class="highlighter-rouge">index_files</code>: To use a static file (for example, <code class="highlighter-rouge">index.html</code>) to serve your application. This key expects a collection. For this to work, the static file(s) should be included in your whitelist. For example, to use a file named <code class="highlighter-rouge">index.html</code> as an index file, your whitelist should include an element that matches the filename, like <code class="highlighter-rouge">- \.html$</code>.</li>
  <li><code class="highlighter-rouge">blacklist</code>: A list of files that should never be executed. Has no effect on static files.</li>
  <li><code class="highlighter-rouge">whitelist</code>: A list of static files (as regular expressions) that can be served. Dynamic files (for example, PHP files) are treated as static files and have their source code served, but they are not executed.</li>
  <li><code class="highlighter-rouge">expires</code>: The number of seconds whitelisted (that is, static) content should be cached by the browser. This enables the cache-control and expires headers for static content. The <code class="highlighter-rouge">expires</code> directive and resulting headers are left out entirely if this is not set.</li>
</ul>

<p>Contrary to standard <code class="highlighter-rouge">.htaccess</code> approaches, which accept a <em>blacklist</em> and allow everything to be accessed except a specific list, we accept a <em>whitelist</em>, which means that anything not matched will trigger a 404 error and will be passed through to your <code class="highlighter-rouge">passthru</code> URL.</p>

<p>Our default configuration allows the following:</p>

<ul>
  <li>From the root (<code class="highlighter-rouge">/</code>) path, only web, media, and <code class="highlighter-rouge">robots.txt</code> files can be accessed</li>
  <li>From the <code class="highlighter-rouge">/pub/static</code> and <code class="highlighter-rouge">/pub/media</code> paths, any file can be accessed</li>
</ul>

<p>The following displays the default set of web accessible locations associated with an entry in <a href="#mounts"><code class="highlighter-rouge">mounts</code></a>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1"># The configuration of app when it is exposed to the web.</span>
<span class="na">web</span><span class="pi">:</span>
<span class="na">locations</span><span class="pi">:</span>
<span class="s2">"</span><span class="s">/"</span><span class="pi">:</span>
    <span class="c1"># The public directory of the app, relative to its root.</span>
    <span class="na">root</span><span class="pi">:</span> <span class="s2">"</span><span class="s">pub"</span>
    <span class="c1"># The front-controller script to send non-static requests to.</span>
    <span class="na">passthru</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/index.php"</span>
    <span class="na">index</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">index.php</span>
    <span class="na">expires</span><span class="pi">:</span> <span class="s">-1</span>
    <span class="na">scripts</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">allow</span><span class="pi">:</span> <span class="no">false</span>
    <span class="na">rules</span><span class="pi">:</span>
        <span class="s">\.(css|js|map|hbs|gif|jpe?g|png|tiff|wbmp|ico|jng|bmp|svgz|midi?|mp?ga|mp2|mp3|m4a|ra|weba|3gpp?|mp4|mpe?g|mpe|ogv|mov|webm|flv|mng|asx|asf|wmv|avi|ogx|swf|jar|ttf|eot|woff|otf|html?)$</span><span class="pi">:</span>
            <span class="na">allow</span><span class="pi">:</span> <span class="no">true</span>
        <span class="s">/robots\.txt$</span><span class="pi">:</span>
            <span class="na">allow</span><span class="pi">:</span> <span class="no">true</span>
<span class="s2">"</span><span class="s">/media"</span><span class="pi">:</span>
    <span class="na">root</span><span class="pi">:</span> <span class="s2">"</span><span class="s">pub/media"</span>
    <span class="na">allow</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">scripts</span><span class="pi">:</span> <span class="no">false</span>
    <span class="na">passthru</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/index.php"</span>
<span class="s2">"</span><span class="s">/static"</span><span class="pi">:</span>
    <span class="na">root</span><span class="pi">:</span> <span class="s2">"</span><span class="s">pub/static"</span>
    <span class="na">allow</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">scripts</span><span class="pi">:</span> <span class="no">false</span>
    <span class="na">passthru</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/front-static.php"</span>
    <span class="na">rules</span><span class="pi">:</span>
        <span class="s">^/static/version\d+/(?&lt;resource&gt;.*)$</span><span class="pi">:</span>
              <span class="na">passthru</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/static/$resource"</span>
</code></pre></div></div>

<h3 id="disk"><code class="highlighter-rouge">disk</code></h3>
<p><code class="highlighter-rouge">disk</code> defines the size of the persistent disk size of the
application in MB.</p>

<!-- Available note types: "info", "warning", "tip" -->

<div class="bs-callout bs-callout-info" id="info">
  <p>The minimal recommended disk size is 256MB. If you see the error <code class="highlighter-rouge">UserError: Error building the project: Disk size may not be smaller than 128MB</code>, increase the size to 256MB.</p>
</div>

<h3 id="mounts"><code class="highlighter-rouge">mounts</code></h3>
<p><code class="highlighter-rouge">mounts</code> is an object whose keys are paths relative to the root of the application. The mount is a writable area on the disk for files. It’s in the form <code class="highlighter-rouge">volume_id[/subpath]</code>.</p>

<p>The following is a default list of mounts configured in <code class="highlighter-rouge">magento.app.yaml</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1"># The mounts that will be performed when the package is deployed.</span>
<span class="na">mounts</span><span class="pi">:</span>
    <span class="s2">"</span><span class="s">var"</span><span class="pi">:</span> <span class="s2">"</span><span class="s">shared:files/var"</span>
    <span class="s2">"</span><span class="s">app/etc"</span><span class="pi">:</span> <span class="s2">"</span><span class="s">shared:files/etc"</span>
    <span class="s2">"</span><span class="s">pub/media"</span><span class="pi">:</span> <span class="s2">"</span><span class="s">shared:files/media"</span>
    <span class="s2">"</span><span class="s">pub/static"</span><span class="pi">:</span> <span class="s2">"</span><span class="s">shared:files/static"</span>
</code></pre></div></div>

<p>The format for adding your mount to this list is as follows:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"/public/sites/default/files": "shared:files/files"
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">shared</code> means that the volume is shared between your applications inside an environment.</li>
  <li><code class="highlighter-rouge">disk</code> key defines the size available for that <code class="highlighter-rouge">shared</code> volume</li>
</ul>

<div class="bs-callout bs-callout-warning">
  <p>重要: The subpath portion of the mount is the unique identifier of the files area. If changed, files at the old location will be permanently lost. Do not change this value once your site has data unless you really want to lose all existing data.</p>
</div>

<p>If you also want the mount web accessible, you must add it to the <a href="#web"><code class="highlighter-rouge">web</code></a> block of locations.</p>

<h3 id="dependencies"><code class="highlighter-rouge">dependencies</code></h3>
<p><code class="highlighter-rouge">dependencies</code> enables you to specify dependencies that your application might need during the build process.</p>

<p>Magento Commerce supports dependencies on the following
languages:</p>

<ul>
  <li>PHP</li>
  <li>Ruby</li>
  <li>NodeJS</li>
</ul>

<p>Those dependencies are independent of the eventual dependencies of your application, and are available in the <code class="highlighter-rouge">PATH</code>, during the build process and in the runtime environment of your application.</p>

<p>You can specify those dependencies as follows:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ruby:
   sass: "~3.4"
nodejs:
   grunt-cli: "~0.3"
</code></pre></div></div>

<h3 id="hooks"><code class="highlighter-rouge">hooks</code></h3>
<p>Use the <code class="highlighter-rouge">hooks</code> section to run shell commands during the build, deploy, and post-deploy phases:</p>

<ul>
  <li><strong><code class="highlighter-rouge">build</code></strong>—Execute commands <em>before</em> packaging your application. Services, such as the database or Redis, are not available at this time since the application has not been deployed yet. You must add custom commands <em>before</em> the default <code class="highlighter-rouge">php ./vendor/bin/m2-ece-build</code> command to make sure custom-generated content makes it to the deployment phase.</li>
  <li><strong><code class="highlighter-rouge">deploy</code></strong>—Execute commands <em>after</em> packaging and deploying your application. You can access other services at this point. Since the default <code class="highlighter-rouge">php ./vendor/bin/m2-ece-deploy</code> command copies the <code class="highlighter-rouge">app/etc</code> directory to the correct location, you must add custom commands <em>after</em> the deploy command to prevent custom commands from failing.</li>
  <li><strong><code class="highlighter-rouge">post_deploy</code></strong>—Execute commands <em>after</em> deploying your application and <em>after</em> the container begins accepting connections. The <code class="highlighter-rouge">post_deploy</code> hook clears the cache and preloads (warms) the cache. You can customize the list of pages using the <code class="highlighter-rouge">WARM_UP_PAGES</code> variable in the <a href="http://devdocs.magento.com/guides/v2.1/cloud/env/variables-post-deploy.html">Post-deploy stage</a>. It is available only for Pro projects that contain <a href="/guides/v2.3/cloud/trouble/pro-env-management.html">Staging and Production environments in the Project Web UI</a> and for Starter projects. Although not required, this works in tandem with the <code class="highlighter-rouge">SCD_ON_DEMAND</code> environment variable.</li>
</ul>

<p>添加命令行命令 under the <code class="highlighter-rouge">build</code>或<code class="highlighter-rouge">deploy</code> sections:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">hooks</span><span class="pi">:</span>
    <span class="c1"># We run build hooks before your application has been packaged.</span>
    <span class="na">build</span><span class="pi">:</span> <span class="pi">|</span>
        <span class="no">php ./vendor/bin/ece-tools build</span>
    <span class="c1"># We run deploy hook after your application has been deployed and started.</span>
    <span class="na">deploy</span><span class="pi">:</span> <span class="pi">|</span>
        <span class="no">php ./vendor/bin/ece-tools deploy</span>
    <span class="c1"># We run post deploy hook to clean and warm the cache. Available with ECE-Tools 2002.0.10.</span>
    <span class="na">post_deploy</span><span class="pi">:</span> <span class="pi">|</span>
        <span class="no">php ./vendor/bin/ece-tools post-deploy</span>
</code></pre></div></div>

<p>The commands run from the application (<code class="highlighter-rouge">/app</code>) directory. You can use the <code class="highlighter-rouge">cd</code> command to change the directory. The hooks fail if the final command in them fails. To cause them to fail on the first failed command, add <code class="highlighter-rouge">set -e</code> to the beginning of the hook.</p>

<h4 id="to-compile-sass-files-using-grunt">To compile SASS files using grunt:</h4>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">dependencies</span><span class="pi">:</span>
  <span class="na">ruby</span><span class="pi">:</span>
    <span class="na">sass</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3.4.7"</span>
  <span class="na">nodejs</span><span class="pi">:</span>
    <span class="na">grunt-cli</span><span class="pi">:</span> <span class="s2">"</span><span class="s">~0.1.13"</span>

<span class="na">hooks</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="no">cd public/profiles/project_name/themes/custom/theme_name</span>
    <span class="no">npm install</span>
    <span class="no">grunt</span>
    <span class="no">cd</span>
    <span class="no">php ./vendor/bin/m2-ece-build</span>
</code></pre></div></div>

<p>You must compile SASS files using <code class="highlighter-rouge">grunt</code> before static content deployment, which happens during the build. Place the <code class="highlighter-rouge">grunt</code> command before the <code class="highlighter-rouge">build</code> command.</p>

<h3 id="crons"><code class="highlighter-rouge">crons</code></h3>
<p><code class="highlighter-rouge">crons</code> describes processes that are triggered on a schedule. We recommend you run cron as the <a href="/guides/v2.3/cloud/before/before-workspace-file-sys-owner.html">Magento文件系统所有者</a>. Do not run cron as <code class="highlighter-rouge">root</code>. We also recommend against running cron as the web server user.</p>

<p><code class="highlighter-rouge">crons</code> support the following:</p>

<ul>
  <li><code class="highlighter-rouge">spec</code>—The cron specification. For Starter environments and Pro Integration environments, the minimum interval is once per five minutes and once per one minute in Pro Staging and Production environments. You need to complete <a href="/guides/v2.3/cloud/configure/setup-cron-jobs.html#add-cron">additional configurations</a> for crons in those environments.</li>
  <li><code class="highlighter-rouge">cmd</code>—The command to execute.</li>
</ul>

<p>A Cron job is well suited for the following tasks:</p>

<ul>
  <li>They need to happen on a fixed schedule, not continually.</li>
  <li>The task itself is not especially long, as a running cron job will block a new deployment.</li>
  <li>Or it is long, but can be easily divided into many small queued tasks.</li>
  <li>A delay between when a task is registered and when it actually happens is acceptable.</li>
</ul>

<p>A sample Magento cron job follows:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">crons</span><span class="pi">:</span>
  <span class="na">cronrun</span><span class="pi">:</span>
      <span class="na">spec</span><span class="pi">:</span> <span class="s2">"</span><span class="s">*/5</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*"</span>
      <span class="na">cmd</span><span class="pi">:</span> <span class="s2">"</span><span class="s">php</span><span class="nv"> </span><span class="s">bin/magento</span><span class="nv"> </span><span class="s">cron:run"</span>
</code></pre></div></div>

<p>For Magento企业版(云支持版) 2.1.X, you can use only <a href="#workers">workers</a> and <a href="#crons">cron jobs</a>. For Magento企业版(云支持版) 2.2.X, cron jobs launch consumers to process batches of messages, and do not require additional configuration.</p>

<p>For more information, see <a href="/guides/v2.3/cloud/configure/setup-cron-jobs.html">设置定时任务</a>.</p>

<h2 id="variables">Variables</h2>
<p>The following environment variables are included in <code class="highlighter-rouge">.magento.app.yaml</code>. These are required for Magento企业版(云支持版) 2.2.X.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">variables</span><span class="pi">:</span>
  <span class="na">env</span><span class="pi">:</span>
    <span class="na">CONFIG__DEFAULT__PAYPAL_ONBOARDING__MIDDLEMAN_DOMAIN</span><span class="pi">:</span> <span class="s1">'</span><span class="s">payment-broker.magento.com'</span>
    <span class="na">CONFIG__STORES__DEFAULT__PAYMENT__BRAINTREE__CHANNEL</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Magento_Enterprise_Cloud_BT'</span>
    <span class="na">CONFIG__STORES__DEFAULT__PAYPAL__NOTATION_CODE</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Magento_Enterprise_Cloud'</span>
</code></pre></div></div>

<h2 id="配置php-options">配置PHP options</h2>
<p>You can choose which version of PHP to run in your <code class="highlighter-rouge">.magento.app.yaml</code> file:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>name: mymagento
type: php:7.0
</code></pre></div></div>

<div class="bs-callout bs-callout-info">
  <p>Magento企业版(云支持版) supports PHP 7.0 and 7.1. For Pro projects <strong>created before October 23, 2017</strong>, you must open a <a href="/guides/v2.3/cloud/trouble/trouble.html">support ticket</a> to use PHP 7.1 on your Pro Staging and Production environments.</p>
</div>

<h3 id="php-extensions">PHP extensions</h3>
<p>You can define additional PHP extensions to enable or disable:</p>

<blockquote>
  <p>.magento.app.yaml</p>
</blockquote>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">runtime</span><span class="pi">:</span>
  <span class="na">extensions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">xdebug</span>
    <span class="pi">-</span> <span class="s">redis</span>
    <span class="pi">-</span> <span class="s">ssh2</span>
  <span class="na">disabled_extensions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">sqlite3</span>
</code></pre></div></div>

<p>To view the current list of PHP extensions, SSH into your environment and enter the following command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>php -m
</code></pre></div></div>

<p>Magento requires the following PHP extensions that are enabled by default:</p>

<ul>
  <li><a href="http://php.net/manual/en/book.curl.php" target="\_blank">curl</a></li>
  <li><a href="http://php.net/manual/en/book.image.php" target="\_blank">gd</a></li>
  <li><a href="http://php.net/manual/en/book.intl.php" target="\_blank">intl</a></li>
  <li>
    <p>PHP 7 only:</p>

    <ul>
      <li><a href="http://php.net/manual/en/book.json.php" target="\_blank">json</a></li>
      <li><a href="http://php.net/manual/en/book.iconv.php" target="\_blank">iconv</a></li>
    </ul>
  </li>
  <li><a href="http://php.net/manual/en/book.mcrypt.php" target="\_blank">mcrypt</a></li>
  <li><a href="http://php.net/manual/en/ref.pdo-mysql.php" target="\_blank">PDO/MySQL</a></li>
  <li><a href="http://php.net/manual/en/book.bc.php" target="\_blank">bc-math</a></li>
  <li><a href="http://php.net/manual/en/book.mbstring.php" target="\_blank">mbstring</a></li>
  <li><a href="http://php.net/manual/en/book.mhash.php" target="\_blank">mhash</a></li>
  <li><a href="http://php.net/manual/en/book.openssl.php" target="\_blank">openssl</a></li>
  <li><a href="http://php.net/manual/en/book.simplexml.php" target="\_blank">SimpleXML</a></li>
  <li><a href="http://php.net/manual/en/book.soap.php" target="\_blank">soap</a></li>
  <li><a href="http://php.net/manual/en/book.xml.php" target="\_blank">xml</a></li>
  <li><a href="http://php.net/manual/en/book.zip.php" target="\_blank">zip</a></li>
</ul>

<p>You must install the following extensions:</p>

<ul>
  <li><a href="http://php.net/manual/en/book.imagick.php" target="\_blank">ImageMagick</a> 6.3.7 (or later), ImageMagick can optionally be used with the <code class="highlighter-rouge">gd</code> extension</li>
  <li><a href="http://php.net/manual/en/book.xsl.php" target="\_blank">xsl</a></li>
  <li><a href="https://pecl.php.net/package/redis" target="\_blank">redis</a></li>
</ul>

<p>In addition, we strongly recommend you enable <code class="highlighter-rouge">opcache</code>.</p>

<p>Optional PHP extensions available to install:</p>

<ul>
  <li><a href="http://php.net/manual/en/book.apcu.php" target="\_blank">apcu</a></li>
  <li><a href="https://blackfire.io/docs/up-and-running/installation" target="\_blank">blackfire</a></li>
  <li><a href="http://php.net/manual/en/book.enchant.php" target="\_blank">enchant</a></li>
  <li><a href="http://php.net/manual/en/book.gearman.php" target="\_blank">gearman</a></li>
  <li><a href="http://php.net/manual/en/book.geoip.php" target="\_blank">geoip</a></li>
  <li><a href="http://php.net/manual/en/book.imap.php" target="\_blank">imap</a></li>
  <li><a href="https://www.ioncube.com/loaders.php" target="\_blank">ioncube</a></li>
  <li><a href="https://pecl.php.net/package/pecl_http" target="\_blank">pecl-http</a></li>
  <li><a href="http://pinba.org" target="\_blank">pinba</a></li>
  <li><a href="https://pecl.php.net/package/propro" target="\_blank">propro</a></li>
  <li><a href="http://php.net/manual/en/book.pspell.php" target="\_blank">pspell</a></li>
  <li><a href="https://pecl.php.net/package/raphf" target="\_blank">raphf</a></li>
  <li><a href="http://php.net/manual/en/book.readline.php" target="\_blank">readline</a></li>
  <li><a href="http://php.net/manual/en/book.recode.php" target="\_blank">recode</a></li>
  <li><a href="http://php.net/manual/en/book.snmp.php" target="\_blank">snmp</a></li>
  <li><a href="http://php.net/manual/en/book.sqlite3.php" target="\_blank">sqlite3</a></li>
  <li><a href="http://php.net/manual/en/book.ssh2.php" target="\_blank">ssh2</a></li>
  <li><a href="http://php.net/manual/en/book.tidy.php" target="\_blank">tidy</a></li>
  <li><a href="https://xcache.lighttpd.net" target="\_blank">xcache</a></li>
  <li><a href="https://xdebug.org" target="\_blank">xdebug</a></li>
  <li><a href="http://php.net/manual/en/book.xhprof.php" target="\_blank">xhprof</a></li>
  <li><a href="http://php.net/manual/en/book.xmlrpc.php" target="\_blank">xmlrpc</a></li>
</ul>

<!-- Available note types: "info", "warning", "tip" -->

<div class="bs-callout bs-callout-info" id="info">
  <p>重要: PHP compiled with debug is not supported and the Probe may conflict with XDebug or XHProf. Disable those extensions when enabling the Probe. The Probe conflicts with some PHP extensions like Pinba or IonCube.</p>
</div>

<h3 id="customize-phpini-settings">Customize <code class="highlighter-rouge">php.ini</code> settings</h3>
<p>You can also create and push a <code class="highlighter-rouge">php.ini</code> file that is appended to the configuration maintained by Magento Commerce.</p>

<p>In your repository, the <code class="highlighter-rouge">php.ini</code> file should be added to the root of the application (the repository root).</p>

<!-- Available note types: "info", "warning", "tip" -->

<div class="bs-callout bs-callout-info" id="info">
  <p>Configuring PHP settings improperly can cause issues. We recommend only advanced administrators set these options.</p>
</div>

<p>For example, if you need to increase the PHP memory limit:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>memory_limit = 756M
</code></pre></div></div>

<p>For a list of recommended PHP configuration settings, see <a href="/guides/v2.3/install-gde/prereq/php-settings.html">PHP配置要求</a>.</p>

<p>After pushing your file, you can check that the custom PHP configuration has been added to your environment by <a href="/guides/v2.3/cloud/env/environments-start.html#env-start-tunn">creating an SSH tunnel</a> to your environment and entering:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cat /etc/php5/fpm/php.ini
</code></pre></div></div>

<h2 id="workers">Workers</h2>
<p>You can define zero or multiple work instances for each application. A worker instance runas as its own container, independently of the web instance and has no Nginx instance running. The router service cannot direct public requests to it, either, so running your own web server on a worker (using Node.js or Go) is not useful.</p>

<p>A worker instance is the exact same code and compilation output as a web instance. The container image is built once and deployed multiple times if needed using the same <code class="highlighter-rouge">build</code> hook and <code class="highlighter-rouge">dependencies</code>. You can customize the container and allocated resources.</p>

<p>Use worker instances for background tasks including:</p>

<ul>
  <li>Tasks like queue workers or updating indexes.</li>
  <li>Tasks to run periodic reporting that are too long for a cron job.</li>
  <li>Tasks should happen “now”, but not block a web request.</li>
  <li>Tasks are large enough that they risk blocking a deploy, even if they are subdivided.</li>
  <li>The task in question is a continually running process rather than a stream of discrete units of work.</li>
</ul>

<p>A basic, common worker configuration could look like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>workers:
    queue:
        size: S
        commands:
            start: |
                php worker.php
</code></pre></div></div>

<p>This example defines a single worker named queue, with a “small” container, and runs the command <code class="highlighter-rouge">php worker.php</code> on startup. If <code class="highlighter-rouge">worker.php</code> exits, it is automatically restarted.</p>

<p>For Magento企业版(云支持版) 2.1.X, you can use only <a href="#workers">workers</a> and <a href="#crons">cron jobs</a>. For Magento企业版(云支持版) 2.2.X, cron jobs launch consumers to process batches of messages, and does not require additional configuration.</p>

			
		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

    
  
    
    <div class="github-link">
      <a class="improve-page" href="https://github.com/magento/devdocs/blob/develop/guides/v2.3/cloud/project/project-conf-files_magento-app.md" target="_blank">
        去GitHub上编辑
      </a>
    </div>
    
  
    
    <div class="new-issue">
      <a href="https://github.com/magento/devdocs/issues/new?title=Feedback on page: /guides/v2.3/cloud/project/project-conf-files_magento-app.html" target="_blank">反馈</a>
    </div>
    
  
  </div>

	</section>
	<!-- /.content -->

</div> <!-- /.content-container -->


	</div>
	<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav footer-links">
  <li><a href="/guides/v2.3/contributor-guide/contributing_docs.html">成为贡献者</a>
  <li><a href="https://magento.github.io/glossary/index.html?audience=developer">术语表</a></li>
  <li><a href="http://magento.com/legal/terms/privacy/">隐私政策</a></li>
  <li><a href="http://magento.com/legal/terms/">服务条款</a></li>
  <li><a href="http://magento.com/legal/licensing/">许可/商标 常见问题</a></li>
  <li><a href="/guides/v2.3/release-notes/bk-release-notes.html">版本日志</a></li>
  <li><a href="/magento-third-party.html">三方许可</a></li>
</ul>

    </div>

		<div class="copyright-date">&copy; 2018 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/assets/js/app.min.js"></script>


<script src="/common/js/devdocs.min.js"></script>




</body>
</html>

