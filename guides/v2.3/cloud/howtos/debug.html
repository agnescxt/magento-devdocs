<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>配置Xdebug | Magento 2 Developer Documentation</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">

	<link rel="stylesheet" href="/assets/css/app.css" />
	<link rel="stylesheet" href="/assets/css/print.css" media="print"/>

	<link rel="stylesheet" href="/common/css/devdocs.css" />

	<script>
  var baseUrl = "";
  var algolia = {
    id : "E642SEDTHL",
    index:  "devdocs",
    key:  "d2d0f33ab73e291ef8d88d8b565e754c"
  };
</script>




	<link rel="canonical" href="http://localhost:4000/guides/v2.3/cloud/howtos/debug.html">

	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body class="layout-default">

	<header class="site-header">

		<nav class="site-nav">

  <div class="menu-btn">
    <a id="menu-btn" class="menu-trigger menu-icon" href="#nav-main" aria-haspopup="true" aria-controls="nav-main"></a>
  </div>

  <div class="nav-container">

    <a class="logo" href="/guides/v2.3/">
      <img src="/assets/i/m-logo.svg" alt=""><img src="/assets/i/magento-logo.svg" alt="Magento" class="magento-logo" />
      <span class="site-logo">DevDocs</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      
<div class="version-switcher dropdown" data-version="2.3">
	<button id="version-switcher-button" class="btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Magento 2.3 Pre-release
	</button>

	<ul class="dropdown-menu dropdown-menu-left" aria-labelledby="version-switcher-button">
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.0/cloud/howtos/debug.html">Magento 2.0</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.1/cloud/howtos/debug.html">Magento 2.1</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.2/cloud/howtos/debug.html">Magento 2.2</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.3/cloud/howtos/debug.html">Magento 2.3 Pre-release</a></li>
	
  </ul>

</div>


      <!-- Main Navigation -->
<ul class="nav-main" role="menubar">

  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">部署</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          <li><a href="/guides/v2.3/install-gde/bk-install-guide.html">安装向导</a></li>
          
          <li><a href="/guides/v2.3/config-guide/bk-config-guide.html">配置手册</a></li>
          
          <li><a href="/guides/v2.3/performance-best-practices/index.html">高效实践</a></li>
          
          <li><a href="/guides/v2.3/migration/bk-migration-guide.html">迁移指引</a></li>
          <li><a href="/guides/v2.3/cloud/bk-cloud.html">上云指引</a></li>
          <li><a href="/magento-release-information.html">版本日志</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">开发</span>

    <div class="nav-popup" role="menu" aria-hidden="true">

      <div class="nav-section">
        <div class="nav-section-title">服务端</div>
        <ul>
          <li><a href="/guides/v2.3/architecture/bk-architecture.html">架构说明</a></li>
          <li><a href="/guides/v2.3/extension-dev-guide/bk-extension-dev-guide.html">PHP开发文档</a></li>
          <li><a href="/guides/v2.3/ext-best-practices/bk-ext-best-practices.html">扩展开发实践</a></li>
          <li><a href="/guides/v2.3/mrg/intro.html">各模块介绍</a></li>
          <li><a href="/guides/v2.3/coding-standards/bk-coding-standards.html">编码规范</a></li>
          <li><a href="/guides/v2.3/contributor-guide/contributing.html">贡献指引</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">前端</div>
        <ul>
          <li class=""><a href="/guides/v2.3/frontend-dev-guide/bk-frontend-dev-guide.html">前端工程师手册</a></li>
          
          <li><a href="/guides/v2.3/ui_comp_guide/bk-ui_comps.html">UI组件手册</a></li>
          
          <li><a href="/guides/v2.3/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript开发手册</a></li>
          <li><a href="/guides/v2.3/pattern-library/bk-pattern.html">管理面板设计模式及所用库</a></li>
          <li><a href="/guides/v2.3/design-styleguide/bk-styleguide.html">管理面板样式手册</a></li>
          <li><a href="https://magento-research.github.io/pwa-devdocs/">PWA Studios</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title"><abbr>API</abbr></div>
        <ul>
          <li><a href="/guides/v2.3/get-started/bk-get-started-api.html">Web APIs起步</a></li>
          <li><a href="/guides/v2.3/rest/bk-rest.html">REST API参考</a></li>
          <li><a href="/guides/v2.3/soap/bk-soap.html">SOAP API参考</a></li>
          
          <li><a href="/guides/v2.3/graphql/index.html">GraphQL开发者手册(新!)</a></li>
          
          
          <li><a href="/guides/v2.3/marketplace/eqp/api.html">Marketplace EQP API Reference</a></li>
          
        </ul>
      </div>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">测试</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        <li><a href="/guides/v2.3/test/testing.html">Magento测试手册</a></li>
        
        <li><a href="/guides/v2.3/magento-functional-testing-framework/release-2/introduction.html">功能验收测试(新!)</a></li>
        
        <li><a href="/guides/v2.3/mtf/mtf_introduction.html">功能测试</a></li>
        <li><a href="/guides/v2.3/test/integration/integration_test_execution.html">集成测试</a></li>
        <li><a href="/guides/v2.3/test/js/jasmine.html">JavaScript单元测试</a></li>
        <li><a href="/guides/v2.3/test/unit/unit_test_execution.html">PHP单元测试</a></li>
        <li><a href="/guides/v2.3/get-started/web-api-functional-testing.html">Web API功能测试</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-separator"></li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">功能文档</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          
          <li class="leaf"><a href="/guides/v2.3/advanced-reporting/overview.html">高级报表</a></li>
          
        
        <li class="leaf"><a href="/guides/v2.3/b2b/bk-b2b.html">B2B</a></li>
        
        <li><a href="/guides/v2.3/howdoi/checkout/checkout_overview.html">Checkout</a></li>
        <li><a href="/guides/v2.3/payments-integrations/bk-payments-integrations.html">支付集成</a></li>
        
          <li><a href="/guides/v2.3/extension-dev-guide/staging.html">Staging</a></li>
        
      </ul>
    </div>

  </li>


  <li class="nav-main-item"  tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">指引</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        <li><a href="/guides/v2.3/howdoi/bk-how-do-i.html">如何</a></li>
        
        <li><a  data-proofer-ignore href="/guides/v2.3/get-started/order-tutorial/order-intro.html">使用EST APIs处理订单</a></li>
        

        <li><a href="/videos/">视频教程</a></li>
      </ul>
    </div>

  </li>

</ul><!-- /.nav-main -->

    </div>

    <div class="search-btn">
      <a class="search-trigger search-icon" href="#"></a>
    </div>

    <form class="quick-search" action="/guides/v2.3/search.html" method="get" novalidate="novalidate">
      <input type="search" name="q" placeholder="Search" />
      <a href="#" class="quick-search-close">&times;</a>
    </form>

  </div>

</nav><!-- #site-nav -->
<div class="nav-main-fader"></div>


	</header>

	<div class="global-wrapper">

		<div class="main-container">
			<a id="main-content"></a>


<div class="content-container">

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" data-proofer-ignore class="toc-toggler">内容表格</a>
	<div class="sidebar-wrapper">

		

		<h4 class="guide-title"></h4>
		<div class="collapsible-navigation">
		    <ul>
		    
		    	

<li class="nav-level1  " id="欢迎使用magento企业版(云支持版)">
    

    
    <a href="/guides/v2.3/cloud/bk-cloud.html">欢迎使用Magento企业版(云支持版)</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="订阅和计划">

            

            
            <a href="/guides/v2.3/cloud/basic-information/cloud-plans.html">订阅和计划</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="新手上路任务">

            

            
            <a href="/guides/v2.3/cloud/onboarding/onboarding-tasks.html">新手上路任务</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="architecture">
    

    
    <a href="/guides/v2.3/cloud/architecture/cloud-architecture.html">Architecture</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="架构起步">

            

            
            <a href="/guides/v2.3/cloud/basic-information/starter-architecture.html">架构起步</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="开发和部署工作流起步">

            

            
            <a href="/guides/v2.3/cloud/basic-information/starter-develop-deploy-workflow.html">开发和部署工作流起步</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="pro-architecture">

            

            
            <a href="/guides/v2.3/cloud/architecture/pro-architecture.html">Pro architecture</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="pro-develop-and-deploy-workflow">

            

            
            <a href="/guides/v2.3/cloud/architecture/pro-develop-deploy-workflow.html">Pro develop and deploy workflow</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="pro-architecture-(legacy)">

            

            
            <a href="/guides/v2.3/cloud/architecture/pro-architecture-legacy.html">Pro architecture (legacy)</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="add-staging-and-production-to-pro-projects-ui">

            

            
            <a href="/guides/v2.3/cloud/trouble/pro-env-management.html">Add Staging and Production to Pro projects UI</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="技术和要求">
    

    
    <a href="/guides/v2.3/cloud/requirements/cloud-requirements.html">技术和要求</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="composer">

            

            
            <a href="/guides/v2.3/cloud/reference/cloud-composer.html">Composer</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento-cloud-cli">

            

            
            <a href="/guides/v2.3/cloud/reference/cli-ref-topic.html">Magento Cloud CLI</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="git">

            

            
            <a href="/guides/v2.3/cloud/reference/git-integration.html">Git</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="bitbucket集成">

            

            
            <a href="/guides/v2.3/cloud/project/bitbucket-integration.html">Bitbucket集成</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="github集成">

            

            
            <a href="/guides/v2.3/cloud/project/project-integrate-github.html">Github集成</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="ssh和sftp">

            

            
            <a href="/guides/v2.3/cloud/env/environments-ssh.html">SSH和sFTP</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="new-relic-apm">

            

            
            <a href="/guides/v2.3/cloud/project/new-relic.html">New Relic APM</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="blackfire.io">

            

            
            <a href="/guides/v2.3/cloud/project/project-integrate-blackfire.html">Blackfire.io</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="sendgrid">

            

            
            <a href="/guides/v2.3/cloud/project/sendgrid.html">SendGrid</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="本地环境设置">
    

    
    <a href="/guides/v2.3/cloud/access-acct/first-time-setup.html">本地环境设置</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="本地环境设置准备">

            

            
            <a href="/guides/v2.3/cloud/before/before-workspace.html">本地环境设置准备</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="安装magento所需的必要软件">

            

            
            <a href="/guides/v2.3/cloud/before/before-workspace-magento-prereqs.html">安装Magento所需的必要软件</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="启用ssh密钥登录">

            

            
            <a href="/guides/v2.3/cloud/before/before-workspace-ssh.html">启用ssh密钥登录</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="设置magento文件系统所有者">

            

            
            <a href="/guides/v2.3/cloud/before/before-workspace-file-sys-owner.html">设置Magento文件系统所有者</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="克隆并开发项目分支">

            

            
            <a href="/guides/v2.3/cloud/before/before-setup-env-2_clone.html">克隆并开发项目分支</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="安装magento">

            

            
            <a href="/guides/v2.3/cloud/before/before-setup-env-install.html">安装Magento</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="首次部署">

            

            
            <a href="/guides/v2.3/cloud/access-acct/first-time-deploy.html">首次部署</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="可选---安装样本数据">

            

            
            <a href="/guides/v2.3/cloud/howtos/sample-data.html">可选 - 安装样本数据</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2 active " id="可选---配置xdebug">

            

            
            <a href="/guides/v2.3/cloud/howtos/debug.html">可选 - 配置Xdebug</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="导入现存的代码到项目">
    

    
    <a href="/guides/v2.3/cloud/access-acct/first-time-setup_import-first-steps.html">导入现存的代码到项目</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="prepare-your-existing-magento-commerce-system">

            

            
            <a href="/guides/v2.3/cloud/access-acct/first-time-setup_import-prepare.html">Prepare your existing Magento Commerce system</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="import-magento-commerce-into-magento企业版(云支持版)">

            

            
            <a href="/guides/v2.3/cloud/access-acct/first-time-setup_import-import.html">Import Magento Commerce into Magento企业版(云支持版)</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="配置你的网店">
    

    
    <a href="/guides/v2.3/cloud/configure/configuration-overview.html">配置你的网店</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="网店配置最佳实践">

            

            
            <a href="/guides/v2.3/cloud/configure/configure-best-practices.html">网店配置最佳实践</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="set-up-paypal">

            

            
            <a href="/guides/v2.3/cloud/live/paypal-onboarding.html">Set up PayPal</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="设置magento-b2b">

            

            
            <a href="/guides/v2.3/cloud/configure/setup-b2b.html">设置Magento B2B</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="设置定时任务">

            

            
            <a href="/guides/v2.3/cloud/configure/setup-cron-jobs.html">设置定时任务</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="set-up-multiple-cloud-websites-or-stores">

            

            
            <a href="/guides/v2.3/cloud/project/project-multi-sites.html">Set up multiple Cloud websites or stores</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="install,-manage,-and-upgrade-modules">

            

            
            <a href="/guides/v2.3/cloud/howtos/install-components.html">Install, manage, and upgrade modules</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="安装一个主题">

            

            
            <a href="/guides/v2.3/cloud/howtos/custom-theme.html">安装一个主题</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="快速配置">
    

    
    <a href="/guides/v2.3/cloud/basic-information/cloud-fastly.html">快速配置</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="快速设置">

            

            
            <a href="/guides/v2.3/cloud/access-acct/fastly.html">快速设置</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="快速定制vcl片段">

            

            
            <a href="/guides/v2.3/cloud/configure/cloud-vcl-custom-snippets.html">快速定制VCL片段</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="定制vcl白名单">

            

            
            <a href="/guides/v2.3/cloud/configure/fastly-vcl-whitelist.html">定制VCL白名单</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="定制vcl黑名单">

            

            
            <a href="/guides/v2.3/cloud/configure/fastly-vcl-blacklist.html">定制VCL黑名单</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="vcl自定义延长管理员超时">

            

            
            <a href="/guides/v2.3/cloud/configure/fastly-vcl-extend-timeout.html">VCL自定义延长管理员超时</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="vcl自定义自重向到wordpress">

            

            
            <a href="/guides/v2.3/cloud/configure/fastly-vcl-wordpress.html">VCL自定义自重向到WordPress</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="vcl自定义块坏引用">

            

            
            <a href="/guides/v2.3/cloud/configure/fastly-vcl-badreferer.html">VCL自定义块坏引用</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="快速故障排查">

            

            
            <a href="/guides/v2.3/cloud/trouble/trouble_fastly.html">快速故障排查</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="配置环境">
    

    
    <a href="/guides/v2.3/cloud/env/environments.html">配置环境</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="application">

            

            
            <a href="/guides/v2.3/cloud/project/project-conf-files_magento-app.html">Application</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="构建和部署">

            

            
            <a href="/guides/v2.3/cloud/project/magento-env-yaml.html">构建和部署</a>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="设置通知">
                    

                    
                    <a  href="/guides/v2.3/cloud/env/setup-notifications.html">设置通知</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="日志处理">
                    

                    
                    <a  href="/guides/v2.3/cloud/env/log-handlers.html">日志处理</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="小向导">
                    

                    
                    <a  href="/guides/v2.3/cloud/env/smart-wizards.html">小向导</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="环境变量">

            

            
            <a href="/guides/v2.3/cloud/env/variables-intro.html">环境变量</a>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="应用程序变量">
                    

                    
                    <a  href="/guides/v2.3/cloud/env/environment-vars_magento.html">应用程序变量</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="构建变量">
                    

                    
                    <a  href="/guides/v2.3/cloud/env/variables-build.html">构建变量</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="云变量">
                    

                    
                    <a  href="/guides/v2.3/cloud/env/variables-cloud.html">云变量</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="deploy-variables">
                    

                    
                    <a  href="/guides/v2.3/cloud/env/variables-deploy.html">Deploy variables</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="部署后变量">
                    

                    
                    <a  href="/guides/v2.3/cloud/env/variables-post-deploy.html">部署后变量</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="在变量下工作">
                    

                    
                    <a  href="/guides/v2.3/cloud/env/working-with-variables.html">在变量下工作</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="routes">

            

            
            <a href="/guides/v2.3/cloud/project/project-conf-files_routes.html">Routes</a>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="caching">
                    

                    
                    <a  href="/guides/v2.3/cloud/project/project-routes-more-cache.html">Caching</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="redirects">
                    

                    
                    <a  href="/guides/v2.3/cloud/project/project-routes-more-redir.html">Redirects</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="服务端引入">
                    

                    
                    <a  href="/guides/v2.3/cloud/project/project-routes-more-ssi.html">服务端引入</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="services">

            

            
            <a href="/guides/v2.3/cloud/project/project-conf-files_services.html">Services</a>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="设置mysql服务">
                    

                    
                    <a  href="/guides/v2.3/cloud/project/project-conf-files_services-mysql.html">设置MySQL服务</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="设置redis服务">
                    

                    
                    <a  href="/guides/v2.3/cloud/project/project-conf-files_services-redis.html">设置Redis服务</a>
                    

                    
                </li>
                
                

                
                

                
                
                <li class="nav-level3  " id="设置elasticsearch服务">
                    

                    
                    <a  href="/guides/v2.3/cloud/project/project-conf-files_services-elastic.html">设置Elasticsearch服务</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="设置rabbitmq服务">
                    

                    
                    <a  href="/guides/v2.3/cloud/project/project-conf-files_services-rabbit.html">设置RabbitMQ服务</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="网店设置的配置管理">
    

    
    <a href="/guides/v2.3/cloud/live/sens-data-over.html">网店设置的配置管理</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="管理系统特定配置的示例">

            

            
            <a href="/guides/v2.3/cloud/live/sens-data-initial.html">管理系统特定配置的示例</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="管理你的项目">
    

    
    <a href="/guides/v2.3/cloud/project/projects.html">管理你的项目</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="配置你的项目">

            

            
            <a href="/guides/v2.3/cloud/project/project-webint-basic.html">配置你的项目</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="项目结构">

            

            
            <a href="/guides/v2.3/cloud/project/project-start.html">项目结构</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="创建和管理用户">

            

            
            <a href="/guides/v2.3/cloud/project/user-admin.html">创建和管理用户</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="manage-branches-with-the-interface">

            

            
            <a href="/guides/v2.3/cloud/project/project-webint-branch.html">Manage branches with the Interface</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="使用命令行管理分支">

            

            
            <a href="/guides/v2.3/cloud/env/environments-start.html">使用命令行管理分支</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="快照和备份管理">

            

            
            <a href="/guides/v2.3/cloud/project/project-webint-snap.html">快照和备份管理</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="部署你的网店">
    

    
    <a href="/guides/v2.3/cloud/live/stage-prod-live.html">部署你的网店</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="部署过程">

            

            
            <a href="/guides/v2.3/cloud/reference/discover-deploy.html">部署过程</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="continuous-deployment">

            

            
            <a href="/guides/v2.3/cloud/deploy/continuous-deployment.html">Continuous deployment</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="保护块">

            

            
            <a href="/guides/v2.3/cloud/live/live-prot.html">保护块</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="在本地构建和部署">

            

            
            <a href="/guides/v2.3/cloud/live/live-sanity-check.html">在本地构建和部署</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="准备部署准生产和生产环境">

            

            
            <a href="/guides/v2.3/cloud/live/stage-prod-migrate-prereq.html">准备部署准生产和生产环境</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="部署代码并迁移静态文件和数据">

            

            
            <a href="/guides/v2.3/cloud/live/stage-prod-migrate.html">部署代码并迁移静态文件和数据</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="测试部署">

            

            
            <a href="/guides/v2.3/cloud/live/stage-prod-test.html">测试部署</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="上线和发布">
    

    
    <a href="/guides/v2.3/cloud/live/live.html">上线和发布</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="上线检查">

            

            
            <a href="/guides/v2.3/cloud/live/go-live-checklist.html">上线检查</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="发布步骤">

            

            
            <a href="/guides/v2.3/cloud/live/launch-steps.html">发布步骤</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="故障排除">
    

    
    <a href="/guides/v2.3/cloud/trouble/trouble.html">故障排除</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="部署故障排查">

            

            
            <a href="/guides/v2.3/cloud/access-acct/trouble.html">部署故障排查</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="查看日志排查故障">

            

            
            <a href="/guides/v2.3/cloud/trouble/environments-logs.html">查看日志排查故障</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="证书不正确">

            

            
            <a href="/guides/v2.3/cloud/trouble/trouble_ce-creds.html">证书不正确</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="新项目的问题解决">

            

            
            <a href="/guides/v2.3/cloud/trouble/trouble_proj-startover.html">新项目的问题解决</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="组件部署失败">

            

            
            <a href="/guides/v2.3/cloud/trouble/trouble_comp-deploy-fail.html">组件部署失败</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="redis问题排查">

            

            
            <a href="/guides/v2.3/cloud/trouble/redis-troubleshooting.html">Redis问题排查</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="重置定时任务">

            

            
            <a href="/guides/v2.3/cloud/trouble/reset-cron-jobs.html">重置定时任务</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="解决加密密钥问题">

            

            
            <a href="/guides/v2.3/cloud/trouble/trouble-crypt-key-variable.html">解决加密密钥问题</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="解决html最小化问题">

            

            
            <a href="/guides/v2.3/cloud/trouble/trouble-error-html-minification.html">解决HTML最小化问题</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="解决部署期间的google分析问题">

            

            
            <a href="/guides/v2.3/cloud/trouble/trouble-google-analytics-deploy.html">解决部署期间的google分析问题</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="恢复配置文件">

            

            
            <a href="/guides/v2.3/cloud/trouble/restore-configuration-files.html">恢复配置文件</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="站点可用性">

            

            
            <a href="/guides/v2.3/cloud/trouble/site-availability.html">站点可用性</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="添加站点地图和搜索引擎的robots文件">

            

            
            <a href="/guides/v2.3/cloud/trouble/robots-sitemap.html">添加站点地图和搜索引擎的robots文件</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="主题问题排查">

            

            
            <a href="/guides/v2.3/cloud/trouble/theme-troubleshooting.html">主题问题排查</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="消息队列">

            

            
            <a href="/guides/v2.3/cloud/trouble/message-queues.html">消息队列</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="升级和补丁">
    

    
    <a href="/guides/v2.3/cloud/project/project-upgrade-parent.html">升级和补丁</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="patch-cloud工具">

            

            
            <a href="/guides/v2.3/cloud/composer-packages/ece-tools.html">Patch Cloud工具</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento企业版(云支持版)补丁">

            

            
            <a href="/guides/v2.3/cloud/project/project-patch.html">Magento企业版(云支持版)补丁</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento企业版(云支持版)升级">

            

            
            <a href="/guides/v2.3/cloud/project/project-upgrade.html">Magento企业版(云支持版)升级</a>
            

            
        </li>
        
        
        
        
    </ul>
    
</li>


		    
		    </ul>
		</div>

	</div>

</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	

  <nav class="breadcrumbs">

    <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      <li class="breadcrumb-item"><a class="breadcrumb-item" href="/guides/v2.3/"><span>首页</span></a></li>

    <!-- Iteration breadcrumb item -->
    
    

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">

        
          <a property="item" typeof="WebPage" href="/guides/v2.3/cloud/bk-cloud.html">
            <span property="name">欢迎使用Magento企业版(云支持版)</span>
          </a>
        

        <meta property="position" content="1" />
      </li>

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem">

        

          

          <span property="name">配置Xdebug</span>

        

        <meta property="position" content="2" />
      </li>

    

    </ol>

  </nav>



	

	

	<h1 class="page-heading">配置Xdebug</h1>

  


</section>

			<p>We recommend using Xdebug for your PHP debugging. The following sections detail how to configure Xdebug and PhpStorm to work locally with settings in your environments. You can use any IDE of your choice. Please see the vendor documentation for those applications for further configuration information.</p>

<p>To set up Xdebug, you need to <a href="#configure">configure</a> a file in your Git repo, configure your IDE PhpStorm, and set up port forwarding. You will configure settings in the <code class="highlighter-rouge">magento.app.yaml</code> file. After editing, you can push the Git changes across all Starter environments and Pro Integration environments to enable Xdebug. To push these settings to Pro plan Staging and Production environments, you must enter a ticket.</p>

<p>Once configured, you can debug <a href="#debugcli">CLI commands</a>, <a href="#webrequests">web requests</a>, <a href="#code">code</a>. Remember, all Magento企业版(云支持版) environments are read-only. You will need to pull code to your local development environment to perform debugging. For Pro plan Staging and Production, we include <a href="#pro-debug">additional instructions</a> for Xdebug on those environments.</p>

<h2 id="usexdebug">Requirements</h2>
<p>To run and use Xdebug, you will need the environment’s SSH URL. You can locate the information through the <a href="/guides/v2.3/cloud/project/projects.html">Project Web Interface</a> or your spreadsheet.</p>

<h2 id="configure">配置Xdebug</h2>
<p>To configure Xdebug, you need to do the following:</p>

<ul>
  <li><a href="#branch">Work in a branch</a> to push file updates</li>
  <li><a href="#enable">Enable Xdebug for environments</a></li>
  <li>Configure your IDE, like <a href="#phpstorm">PhpStorm</a></li>
  <li><a href="#port">Set up port forwarding</a></li>
</ul>

<p>For configuring on Pro plan Staging and Production, you need to enter a <a href="#pro">ticket for Staging and Production</a>.</p>

<h3 id="branch">Get started with a branch</h3>
<p>To add Xdebug, we recommend creating a branch to work in and add the files.</p>

<div>

  <ol>
    <li>Log in to your local development system, or switch to, the <a href="/guides/v2.3/cloud/before/before-workspace-file-sys-owner.html">Magento文件系统所有者</a>.</li>
    <li>Change to a directory to which the Magento文件系统所有者 has write access.</li>
    <li>
      <p>Enter the following command in a terminal to log in to your project:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud login
</code></pre></div>      </div>
    </li>
    <li>
      <p>List your projects. With the project ID, you can complete additional commands.</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud project:list
</code></pre></div>      </div>
    </li>
    <li>
      <p>If necessary, clone the project to your local. You should have cloned when setting up your local development workspace.</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud project:get &lt;project ID&gt;
</code></pre></div>      </div>
    </li>
    <li>Change to a project directory. For example, <code class="highlighter-rouge">cd /var/www/html/magento2</code></li>
    <li>
      <p>List environments in the project. Every environment includes an active Git branch of your code, database, environment variables, configurations, and services.</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud environment:list
</code></pre></div>      </div>

      <div class="bs-callout bs-callout-info" id="info">
  		<p><code>magento-cloud environment:list</code> displays environment hierarchies whereas <code>git branch</code> displays does not. If you have any nested environments, use <code>magento-cloud environment:list</code> to see the full list.</p>
</div>
    </li>
    <li>
      <p>Fetch origin branches to get the latest code:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git fetch origin
</code></pre></div>      </div>
    </li>
    <li>
      <p>Check out, or switch to, a specific branch and environment. Git commands only checkout the Git branch. The Magento Cloud command also switches to the active environment.</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud environment:checkout &lt;environment ID&gt;
</code></pre></div>      </div>

      <p>To create a new environment, use <code class="highlighter-rouge">magento-cloud environment:branch &lt;environment name&gt; &lt;parent environment ID&gt;</code></p>
    </li>
    <li>
      <p>Pull any updated code to your local for the environment ID (which is the Git branch):</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git pull origin &lt;environment ID&gt;
</code></pre></div>      </div>
    </li>
    <li>
      <p>Create a <a href="/guides/v2.3/cloud/project/project-webint-snap.html">snapshot</a> of the environment as a backup:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud snapshot:create -e &lt;environment ID&gt;
</code></pre></div>      </div>
    </li>
  </ol>

  <h3 id="enable">Enable Xdebug in your environment</h3>
  <p>Enable Xdebug by adding it to the extensions section of magento.app.yaml. When you push this update to Git and deploy to environments, the debugger is available.</p>

  <p>You can enable Xdebug directly to all Starter environments and Pro Integration environments. For Pro Staging and Production, you need to update this file and enter a <a href="/guides/v2.3/cloud/trouble/trouble.html">Support ticket</a> to have it enabled. We will get Xdebug enabled onto those environments for you.</p>

  <!-- You may need to run PHP with a separate config file to enable xdebug on the CLI, such as "php -c /etc/platform/<project_id>/php.ini ... " -->

  <ol>
    <li>In your local terminal, open <code class="highlighter-rouge">.magento.app.yaml</code> in a text editor.</li>
    <li>
      <p>In the <code class="highlighter-rouge">runtime</code> section, under <code class="highlighter-rouge">extensions</code>, add <code class="highlighter-rouge">xdebug</code>. 例如:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> runtime:
    extensions:
   - mcrypt
   - redis
   - xsl
   - json
   - xdebug
</code></pre></div>      </div>
    </li>
    <li>
      <p>Optionally, modify the timeout. A default timeout of 300 seconds (5 minutes) is set in <code class="highlighter-rouge">php-fpm</code> and will end your session. To avoid the timeout, add the following lines to the <code class="highlighter-rouge">web:</code> section of <code class="highlighter-rouge">.magento.app.yaml</code>:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> web:
     commands:
         start: |
             cat /etc/php/7.0/fpm/php-fpm.conf | sed -e 's/request_terminate_timeout.*//g' &gt; /tmp/php-fpm.conf
             /usr/sbin/php-fpm7.0 -y /tmp/php-fpm.conf
</code></pre></div>      </div>
    </li>
    <li>Save your changes to <code class="highlighter-rouge">.magento.app.yaml</code> and exit the text editor.</li>
    <li>
      <p>Add, commit, and push the changes to redeploy the environment:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> git add -A
 git commit -m "Add xdebug"
 git push origin &lt;environment ID&gt;
</code></pre></div>      </div>
    </li>
  </ol>

  <p>When deployed to Starter environments and Pro Integration environments, Xdebug is now available. You should continue configuring your IDE. For PhpStorm, see <a href="#phpstorm">配置PHPStorm</a>.</p>

  <h3 id="phpstorm">配置PHPStorm</h3>
  <p>You need to configure <a href="https://www.jetbrains.com/phpstorm/">PhpStorm</a> to properly work with Xdebug.</p>

  <ol>
    <li>Open your PhpStorm project.</li>
    <li>
      <p>Open the settings for PhpStorm.</p>

      <ul>
        <li>On Mac, select <strong>File</strong> &gt; <strong>Preferences</strong>.</li>
        <li>On Windows/Linux, select <strong>File</strong> &gt; <strong>Settings</strong>.</li>
      </ul>
    </li>
    <li>Expand and locate <strong>Languages &amp; Frameworks</strong> &gt; <strong>PHP</strong> &gt; <strong>Servers</strong> section in settings.</li>
    <li>Add a server configuration. Click the + to add a server. Notice at the top, it will show the project name in grey, just for reference. This will create a “server” configuration. This will be used to listen to port 9000 locally, which will be <a href="#port">forwarded</a>.</li>
    <li>
      <p>Configure settings for the new server:</p>

      <ul>
        <li><strong>Name</strong>: enter the same as the hostname. This value ise used in and must match the value for <code class="highlighter-rouge">PHP_IDE_CONFIG</code> variable in <a href="#debugcli">Debug CLI commands</a>.</li>
        <li><strong>Host</strong>: enter <code class="highlighter-rouge">localhost</code></li>
        <li><strong>Port</strong>: enter 80</li>
        <li><strong>Debugger</strong>: set to Xdebug in the drop-down</li>
      </ul>
    </li>
    <li>Select the <strong>Use path mappings</strong> option. In the files/directories, the root of the project displays that you opened for the added server.</li>
    <li>
      <p>In the <strong>Absolute path on the server</strong> column, click <img src="http://devdocs.magento.com/common/images/install_docker_php-storm-edit.png" alt="Edit" width="15px" /> (<strong>Edit</strong>) and add a setting based on the environment:</p>

      <ul>
        <li>For all Starter environments and Pro Integration environments, the remote path is <code class="highlighter-rouge">/app</code>.</li>
        <li>
          <p>For Pro Staging and Production environments:</p>

          <ul>
            <li>Production: <code class="highlighter-rouge">/app/&lt;project_code&gt;/</code></li>
            <li>Staging:  <code class="highlighter-rouge">/app/&lt;project_code&gt;_stg/</code></li>
          </ul>
        </li>
      </ul>
    </li>
  </ol>

  <h3 id="port">Set up port forwarding</h3>
  <p>You need to set up port forwarding. This is necessary to map the XDEBUG connection from the server to your local system to PHPSTORM and xdebug locally can track along with it</p>

  <p>To do any type of debugging, you must forward port 9000 from your Magento企业版(云支持版) server to your local machine. See one of the following sections:</p>

  <ul>
    <li><a href="#portmac">Port forwarding on Mac or UNIX</a></li>
    <li><a href="#portwindows">Port forwarding on Windows</a></li>
  </ul>

  <h4 id="portmac">Port forwarding on Mac or UNIX</h4>
  <p>To set up port forwarding on a Mac or in a Unix environment, you will enter a command in a terminal.</p>

  <ol>
    <li>Open a terminal.</li>
    <li>
      <p>Enter the following command:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ssh -R 9000:localhost:9000 &lt;ssh url&gt;
</code></pre></div>      </div>

      <p>Add the <code class="highlighter-rouge">-v</code> option to the SSH command to show in the terminal whenever a socket is connected to the port that is being forwarded.</p>
    </li>
  </ol>

  <p>If an “unable to connect” or “could not listen to port on remote” error is displayed, there could be another active SSH session persisting on the server that is occupying port 9000. If that connection isn’t being used, you can terminate it.</p>

  <p>To troubleshoot the connection:</p>

  <ol>
    <li><a href="/guides/v2.3/cloud/env/environments-ssh.html">SSH</a> to the integration, staging, or production server.</li>
    <li>Enter <code class="highlighter-rouge">who</code> to view a list of SSH sessions.</li>
    <li>
      <p>View existing SSH sessions by user. Be careful to not affect a user other than yourself!</p>

      <ul>
        <li>Integration: user names are similar to <code class="highlighter-rouge">dd2q5ct7mhgus</code></li>
        <li>Staging: user names are similar to <code class="highlighter-rouge">dd2q5ct7mhgus_stg</code></li>
        <li>Production: user names are similar to <code class="highlighter-rouge">dd2q5ct7mhgus</code></li>
      </ul>
    </li>
    <li>For a user session that is older than yours, find the pseudo-terminal (PTS) value. For example, <code class="highlighter-rouge">pts/0</code>.</li>
    <li>
      <p>Kill the process ID (PID) corresponding to the PTS value using the following commands:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ps aux | grep ssh
kill &lt;PID&gt;
</code></pre></div>      </div>

      <p>For example, suppose <code class="highlighter-rouge">ps aux | grep ssh</code> returned the following:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dd2q5ct7mhgus        5504  0.0  0.0  82612  3664 ?      S    18:45   0:00 sshd: dd2q5ct7mhgus@pts/0
</code></pre></div>      </div>

      <p>To terminate the connection, you enter a kill command with the process ID (PID). 例如:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kill 3664
</code></pre></div>      </div>
    </li>
  </ol>

  <h4 id="portwindows">Port forwarding on Windows</h4>
  <p>To set up port forwarding (SSH tunneling) on Windows, you will configure your Windows terminal application. For this example, we walk through creating an SSH tunnel using <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html" target="_blank">Putty</a>. You can use other applications such as Cygwin. For more information on other applications, please see the vendor documentation provided with those applications.</p>

  <p>To set up an SSH tunnel on Windows using Putty:</p>

  <ol>
    <li>If you haven’t already done so, download <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html" target="_blank">Putty</a>.</li>
    <li>Start Putty.</li>
    <li>In the Category pane, click <strong>Session</strong>.</li>
    <li>
      <p>Enter the following information:</p>

      <ul>
        <li><strong>Host Name (or IP address)</strong> field: Enter your Cloud server’s <a href="/guides/v2.3/cloud/env/environments-ssh.html">SSH URL</a></li>
        <li><strong>Port</strong> field: Enter <code class="highlighter-rouge">22</code></li>
      </ul>

      <p><img src="http://devdocs.magento.com/common/images/cloud-xdebug_putty-session.png" alt="Set up Putty" width="350px" /></p>
    </li>
    <li>In the Category pane, click <strong>Connection</strong> &gt; <strong>SSH</strong> &gt; <strong>Tunnels</strong>.</li>
    <li>
      <p>Enter the following information:</p>

      <ul>
        <li><strong>Source port</strong> field: Enter <code class="highlighter-rouge">9000</code></li>
        <li><strong>Destination</strong> field: Enter <code class="highlighter-rouge">127.0.0.1:9000</code></li>
        <li>Click <strong>Remote</strong></li>
      </ul>
    </li>
    <li>
      <p>Click <strong>Add</strong>.</p>

      <p><img src="http://devdocs.magento.com/common/images/cloud-xdebug_putty-tunnels.png" alt="Create an SSH tunnel in Putty" width="350px" /></p>
    </li>
    <li>In the Category pane, click <strong>Session</strong>.</li>
    <li>In the <strong>Saved Sessions</strong> field, enter a name for this SSH tunnel.</li>
    <li>
      <p>Click <strong>Save</strong>.</p>

      <p><img src="http://devdocs.magento.com/common/images/cloud-xdebug_putty-session-save.png" alt="Save your SSH tunnel" width="350px" /></p>
    </li>
    <li>To test the SSH tunnel, click <strong>Load</strong>, then click <strong>Open</strong>.</li>
  </ol>

  <p>If an “unable to connect” error displays, verify all of the following:</p>

  <ul>
    <li>All Putty settings are correct</li>
    <li>You are running Putty on the machine on which your private Magento企业版(云支持版) SSH keys are located</li>
  </ul>

  <h3 id="pro">Configure Pro Staging and Production</h3>
  <p>To complete configuration for Pro plan Staging and Production environments, you must enter a <a href="/guides/v2.3/cloud/trouble/trouble.html">Support ticket</a> to have Xdebug enabled and configured in Staging and Production environments.</p>

  <p>We will enable Xdebug in the environment. Be aware, this will require a redeployment of Staging and Production.</p>

  <h2 id="ssh">SSH access to Xdebug environments</h2>
  <p>For initiating debugging, performing setup, and more, you need the SSH commands for accessing the environments. You can get this information, through the <a href="/guides/v2.3/cloud/project/projects.html">Project Web Interface</a> and your project spreadsheet.</p>

  <p>For Starter environments and Pro Integration environments, you can use the following Magento Cloud CLI command to SSH into those environments:</p>

  <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud environment:ssh --pipe -e &lt;environment ID&gt;
</code></pre></div>  </div>

  <p>To use Xdebug, SSH to the environment as follows:</p>

  <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh -R &lt;xdebug listen port&gt;:&lt;host&gt;:&lt;xdebug listen port&gt; &lt;SSH URL&gt;
</code></pre></div>  </div>

  <p>For example,</p>

  <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh -R 9000:localhost:9000 pwga8A0bhuk7o-mybranch@ssh.us.magentosite.cloud
</code></pre></div>  </div>

  <h2 id="pro-debug">Debug for Pro Staging and Production</h2>
  <p>To use Xdebug specifically on Pro plan Staging and Production environment, you create a separate SSH tunnel and web session only you have access to. This usage differs from typical access, only providing access to you and not to all users.</p>

  <p>You will need the following:</p>

  <ul>
    <li>SSH commands for accessing the environments. You can get this information, through the <a href="/guides/v2.3/cloud/project/projects.html">Project Web Interface</a> and your project spreadsheet.</li>
    <li>The <code class="highlighter-rouge">xdebug_key</code> value we set when configuring the Staging and Pro environments</li>
  </ul>

  <p>Set up an SSH tunnel to Staging or Production environment:</p>

  <ol>
    <li>Open a terminal.</li>
    <li>
      <p>Enter the following command to clean up all SSH sessions.</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ssh USERNAME@CLUSTER.ent.magento.cloud 'rm /run/platform/USERNAME/xdebug.sock'
</code></pre></div>      </div>
    </li>
    <li>
      <p>Enter the following command to set up the SSH tunnel for Xdebug:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ssh -R /run/platform/USERNAME/xdebug.sock:localhost:9000 -N USERNAME@CLUSTER.ent.magento.cloud
</code></pre></div>      </div>
    </li>
  </ol>

  <p>To start debugging, use the following commands with the environment URL:</p>

  <ol>
    <li>
      <p>To enable remote debugging, visit the site in the browser with the following added to the URL where <code class="highlighter-rouge">KEY</code> is value for <code class="highlighter-rouge">xdebug_key</code>:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ?XDEBUG_SESSION_START=KEY
</code></pre></div>      </div>

      <p>This sets the cookie that sends browser requests to trigger Xdebug.</p>
    </li>
    <li>Complete your debugging with Xdebug.</li>
    <li>
      <p>When you are ready to end the session, you can use the following command to remove the cookie and end debugging through the browser where <code class="highlighter-rouge">KEY</code> is value for <code class="highlighter-rouge">xdebug_key</code>:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ?XDEBUG_SESSION_STOP=KEY
</code></pre></div>      </div>
    </li>
  </ol>

  <p>Please note, <code class="highlighter-rouge">XDEBUG_SESSION_START</code>passed by <code class="highlighter-rouge">POST</code> requersts are not supported at this time.</p>

  <h2 id="debugcli">Debug CLI commands</h2>
  <p>This section walks through debugging CLI commands. To debug, you will need the SSH commands for your environments.</p>

  <ol>
    <li>SSH into the server you want to debug using CLI commands.</li>
    <li>
      <p>Create the following environment variables:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> export XDEBUG_CONFIG='PHPSTORM'
 export PHP_IDE_CONFIG="serverName=&lt;name of the server that is configured in PHPSTORM&gt;"
</code></pre></div>      </div>
    </li>
  </ol>

  <p>These variables will be removed when SSH session is over. When adding the variables, you can add runtime options:</p>

  <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>php -d xdebug.profiler_enable=On -d xdebug.max_nesting_level=9999 ...
</code></pre></div>  </div>

  <p>If you expect to SSH and debug multiple times, you can put the export commands into a bash script in the <code class="highlighter-rouge">/tmp</code> directory to run them each time.</p>

  <h2 id="webrequests">For debugging web requests</h2>
  <p>The following steps help you debug web requests.</p>

  <ol>
    <li>On the Extension menu, click <strong>Debug</strong> to enable.</li>
    <li>Right click and on the options menu set the IDE key to <strong>PHPSTORM</strong>.</li>
    <li>Install the Xdebug client on the browser. Configure and enable it.</li>
  </ol>

  <h3 id="chrome">示例 set up on Chrome</h3>
  <p>This section discusses how to use Xdebug in Chrome using the Xdebug Helper extension. For information about Xdebug tools for other browsers, consult the browser documentation.</p>

  <p>To use Xdebug Helper with Chrome:</p>

  <ol>
    <li>Create an <a href="#ssh">SSH tunnel</a> to the Cloud server.</li>
    <li>Install the <a href="https://chrome.google.com/webstore/detail/xdebug-helper/eadndfjplgieldjbigjakmdgkmoaaaoc?hl=en" target="_blank">Xdebug Helper extension</a> from the Chrome store.</li>
    <li>
      <p>Enable the extension in Chrome as shown in the following figure.</p>

      <p><img src="http://devdocs.magento.com/common/images/install_docker_php-storm_xdebug-chrome.png" alt="Enable the Xdebug extension in Chrome" /></p>
    </li>
    <li>In Chrome, right-click <img src="http://devdocs.magento.com/common/images/cloud-xdebug_helper-icon.png" alt="Xdebug helper icon" width="25px" /> in the Chrome toolbar.</li>
    <li>From the pop-up menu, click <strong>Options</strong>.</li>
    <li>From the <strong>IDE Key</strong> list, click <strong>PhpStorm</strong>.</li>
    <li>
      <p>Click <strong>Save</strong>.</p>

      <p><img src="http://devdocs.magento.com/common/images/cloud-xdebug_helper-options.png" alt="Xdebug Helper options" width="400px" /></p>
    </li>
    <li>Open your PhpStorm project.</li>
    <li>
      <p>In the top navigation bar, click <img src="http://devdocs.magento.com/common/images/install_docker_php-storm_xdebug-start-listening.png" alt="Start listening for connections" width="25px" />  (<strong>Start listening</strong>).</p>

      <p>If the navigation bar isn’t displayed, click <strong>View</strong> &gt; <strong>Navigation Bar</strong>.</p>
    </li>
    <li>In the PhpStorm navigation pane, double-click the PHP file to test.</li>
  </ol>

  <h2 id="code">Debug code locally</h2>
  <p>Due to your environments being read-only, you need to pull code locally from an environment or specific Git branch/respository to perform debugging.</p>

  <p>The method you choose is up to you. You have the following options:</p>

  <ul>
    <li>
      <p>Check out code from Git and run <code class="highlighter-rouge">composer install</code></p>

      <p>This method works unless <code class="highlighter-rouge">composer.json</code> references packages in private repositories to which you don’t have access. This method results in getting the entire Magento codebase.</p>
    </li>
    <li>
      <p>Copy the <code class="highlighter-rouge">vendor</code>, <code class="highlighter-rouge">app</code>, <code class="highlighter-rouge">pub</code>, <code class="highlighter-rouge">lib</code>, and <code class="highlighter-rouge">setup</code> directories</p>

      <p>This method results in your having all code you can possibly test. Depending on how many static assets you have, it could result in a long transfer with a large volume of files.</p>
    </li>
    <li>
      <p>Copy the <code class="highlighter-rouge">vendor</code> directory only</p>

      <p>Because most Magento and third-party code is in the <code class="highlighter-rouge">vendor</code> directory, this method is likely to result in good testing although you won’t be testing the entire codebase.</p>
    </li>
  </ul>

  <p>To compress files and copy them to your local machine:</p>

  <ol>
    <li>SSH to the environment.</li>
    <li>
      <p>Enter the following command:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tar -czf /tmp/&lt;file name&gt;.tgz &lt;directory list&gt;
</code></pre></div>      </div>

      <p>For example, to compress the <code class="highlighter-rouge">vendor</code> directory only, enter</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tar -czf /tmp/vendor.tgz vendor
</code></pre></div>      </div>
    </li>
    <li>
      <p>On your local environment with PhpStorm, enter the following commands:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd &lt;phpstorm project root dir&gt;
rsync &lt;SSH URL&gt;:/tmp/&lt;file name&gt;.tgz .
tar xzf &lt;file name&gt;.tgz
</code></pre></div>      </div>
    </li>
  </ol>

  <h2 id="trouble">故障排除 Xdebug</h2>
  <p>If you you suspend your laptop (like closing your lid on a Mac), then your SSH session may no longer work when your computer resumes. But the TCP session for the SSH connection on the server might not timeout on the server, leaving any open debug sessions active and preventing you from using the nginx server.</p>

  <p>Due to not having access to manually restart the nginx server, you need to locate and terminate SSH processes that haven’t timed out yet.</p>

  <ol>
    <li><a href="/guides/v2.3/cloud/env/environments-ssh.html">SSH</a> to the integration, staging, or production server.</li>
    <li>Enter <code class="highlighter-rouge">who</code> to view a list of SSH sessions.</li>
    <li>
      <p>View existing SSH sessions by user. Be careful to not affect a user other than yourself!</p>

      <ul>
        <li>Integration: user names are similar to <code class="highlighter-rouge">dd2q5ct7mhgus</code></li>
        <li>Staging: user names are similar to <code class="highlighter-rouge">dd2q5ct7mhgus_stg</code></li>
        <li>Production: user names are similar to <code class="highlighter-rouge">dd2q5ct7mhgus</code></li>
      </ul>
    </li>
    <li>For a user session that is older than yours, find the pseudo-terminal (PTS) value. For example, <code class="highlighter-rouge">pts/0</code>.</li>
    <li>
      <p>Kill the process ID (PID) corresponding to the PTS value using the following commands:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ps aux | grep ssh
kill &lt;PID&gt;
</code></pre></div>      </div>

      <p>For example, suppose <code class="highlighter-rouge">ps aux | grep ssh</code> returned the following:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dd2q5ct7mhgus        5504  0.0  0.0  82612  3664 ?      S    18:45   0:00 sshd: dd2q5ct7mhgus@pts/0
</code></pre></div>      </div>

      <p>To terminate the connection, you enter a kill command with the process ID (PID). 例如:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kill 3664
</code></pre></div>      </div>
    </li>
  </ol>
</div>

			
		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

    
  
    
    <div class="github-link">
      <a class="improve-page" href="https://github.com/magento/devdocs/blob/develop/guides/v2.3/cloud/howtos/debug.md" target="_blank">
        去GitHub上编辑
      </a>
    </div>
    
  
    
    <div class="new-issue">
      <a href="https://github.com/magento/devdocs/issues/new?title=Feedback on page: /guides/v2.3/cloud/howtos/debug.html" target="_blank">反馈</a>
    </div>
    
  
  </div>

	</section>
	<!-- /.content -->

</div> <!-- /.content-container -->


	</div>
	<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav footer-links">
  <li><a href="/guides/v2.3/contributor-guide/contributing_docs.html">成为贡献者</a>
  <li><a href="https://magento.github.io/glossary/index.html?audience=developer">术语表</a></li>
  <li><a href="http://magento.com/legal/terms/privacy/">隐私政策</a></li>
  <li><a href="http://magento.com/legal/terms/">服务条款</a></li>
  <li><a href="http://magento.com/legal/licensing/">许可/商标 常见问题</a></li>
  <li><a href="/guides/v2.3/release-notes/bk-release-notes.html">版本日志</a></li>
  <li><a href="/magento-third-party.html">三方许可</a></li>
</ul>

    </div>

		<div class="copyright-date">&copy; 2018 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/assets/js/app.min.js"></script>


<script src="/common/js/devdocs.min.js"></script>




</body>
</html>

