<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>在构架下工作 | Magento 2 Developer Documentation</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">

	<link rel="stylesheet" href="/assets/css/app.css" />
	<link rel="stylesheet" href="/assets/css/print.css" media="print"/>

	<link rel="stylesheet" href="/common/css/devdocs.css" />

	<script>
  var baseUrl = "";
  var algolia = {
    id : "E642SEDTHL",
    index:  "devdocs",
    key:  "d2d0f33ab73e291ef8d88d8b565e754c"
  };
</script>




	<link rel="canonical" href="/guides/v2.0/ext-best-practices/extension-coding/working-with-arch-bp.html">

	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body class="layout-default">

	<header class="site-header">

		<nav class="site-nav">

  <div class="menu-btn">
    <a id="menu-btn" class="menu-trigger menu-icon" href="#nav-main" aria-haspopup="true" aria-controls="nav-main"></a>
  </div>

  <div class="nav-container">

    <a class="logo" href="/guides/v2.0/">
      <img src="/assets/i/m-logo.svg" alt=""><img src="/assets/i/magento-logo.svg" alt="Magento" class="magento-logo" />
      <span class="site-logo">DevDocs</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      
<div class="version-switcher dropdown" data-version="2.0">
	<button id="version-switcher-button" class="btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Magento 2.0
	</button>

	<ul class="dropdown-menu dropdown-menu-left" aria-labelledby="version-switcher-button">
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.0/ext-best-practices/extension-coding/working-with-arch-bp.html">Magento 2.0</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.1/ext-best-practices/extension-coding/working-with-arch-bp.html">Magento 2.1</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.2/ext-best-practices/extension-coding/working-with-arch-bp.html">Magento 2.2</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.3/ext-best-practices/extension-coding/working-with-arch-bp.html">Magento 2.3 Pre-release</a></li>
	
  </ul>

</div>


      <!-- Main Navigation -->
<ul class="nav-main" role="menubar">

  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">部署</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          <li><a href="/guides/v2.0/install-gde/bk-install-guide.html">安装向导</a></li>
          
          <li><a href="/guides/v2.0/comp-mgr/bk-compman-upgrade-guide.html">组件管理和系统升级手册</a></li>
          
          <li><a href="/guides/v2.0/config-guide/bk-config-guide.html">配置手册</a></li>
          
          <li><a href="/guides/v2.0/migration/bk-migration-guide.html">迁移指引</a></li>
          <li><a href="/guides/v2.0/cloud/bk-cloud.html">上云指引</a></li>
          <li><a href="/magento-release-information.html">版本日志</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">开发</span>

    <div class="nav-popup" role="menu" aria-hidden="true">

      <div class="nav-section">
        <div class="nav-section-title">服务端</div>
        <ul>
          <li><a href="/guides/v2.0/architecture/bk-architecture.html">架构说明</a></li>
          <li><a href="/guides/v2.0/extension-dev-guide/bk-extension-dev-guide.html">PHP开发文档</a></li>
          <li><a href="/guides/v2.0/ext-best-practices/bk-ext-best-practices.html">扩展开发实践</a></li>
          <li><a href="/guides/v2.0/mrg/intro.html">各模块介绍</a></li>
          <li><a href="/guides/v2.0/coding-standards/bk-coding-standards.html">编码规范</a></li>
          <li><a href="/guides/v2.0/contributor-guide/contributing.html">贡献指引</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">前端</div>
        <ul>
          <li class=""><a href="/guides/v2.0/frontend-dev-guide/bk-frontend-dev-guide.html">前端工程师手册</a></li>
          
          <li><a href="/guides/v2.0/ui-components/ui-component.html">UI组件</a></li>
          
          <li><a href="/guides/v2.0/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript开发手册</a></li>
          <li><a href="/guides/v2.0/pattern-library/bk-pattern.html">管理面板设计模式及所用库</a></li>
          <li><a href="/guides/v2.0/design-styleguide/bk-styleguide.html">管理面板样式手册</a></li>
          <li><a href="https://magento-research.github.io/pwa-devdocs/">PWA Studios</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title"><abbr>API</abbr></div>
        <ul>
          <li><a href="/guides/v2.0/get-started/bk-get-started-api.html">Web APIs起步</a></li>
          <li><a href="/guides/v2.0/rest/bk-rest.html">REST API参考</a></li>
          <li><a href="/guides/v2.0/soap/bk-soap.html">SOAP API参考</a></li>
          
          
        </ul>
      </div>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">测试</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        <li><a href="/guides/v2.0/test/testing.html">Magento测试手册</a></li>
        
        <li><a href="/guides/v2.0/mtf/mtf_introduction.html">功能测试</a></li>
        <li><a href="/guides/v2.0/test/integration/integration_test_execution.html">集成测试</a></li>
        <li><a href="/guides/v2.0/test/js/jasmine.html">JavaScript单元测试</a></li>
        <li><a href="/guides/v2.0/test/unit/unit_test_execution.html">PHP单元测试</a></li>
        <li><a href="/guides/v2.0/get-started/web-api-functional-testing.html">Web API功能测试</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-separator"></li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">功能文档</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          
        
        <li><a href="/guides/v2.0/howdoi/checkout/checkout_overview.html">Checkout</a></li>
        <li><a href="/guides/v2.0/payments-integrations/bk-payments-integrations.html">支付集成</a></li>
        
      </ul>
    </div>

  </li>


  <li class="nav-main-item"  tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">指引</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        <li><a href="/guides/v2.0/howdoi/bk-how-do-i.html">如何</a></li>
        

        <li><a href="/videos/">视频教程</a></li>
      </ul>
    </div>

  </li>

</ul><!-- /.nav-main -->

    </div>

    <div class="search-btn">
      <a class="search-trigger search-icon" href="#"></a>
    </div>

    <form class="quick-search" action="/guides/v2.0/search.html" method="get" novalidate="novalidate">
      <input type="search" name="q" placeholder="Search" />
      <a href="#" class="quick-search-close">&times;</a>
    </form>

  </div>

</nav><!-- #site-nav -->
<div class="nav-main-fader"></div>


	</header>

	<div class="global-wrapper">

		<div class="main-container">
			<a id="main-content"></a>


<div class="content-container">

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" data-proofer-ignore class="toc-toggler">内容表格</a>
	<div class="sidebar-wrapper">

		

		<h4 class="guide-title">Extension Best Practices</h4>
		<div class="collapsible-navigation">
		    <ul>
		    
		    	

<li class="nav-level1  " id="介绍">
    

    
    <a href="/guides/v2.0/ext-best-practices/bk-ext-best-practices.html">介绍</a>
    

    
</li>


		    
		    	

<li class="nav-level1  " id="admin">
    

    
    <a href="/guides/v2.0/ext-best-practices/admin/admin-best-practices.html">Admin</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="管理面板的定位和设计">

            

            
            <a href="/guides/v2.0/ext-best-practices/admin/placement-and-design.html">管理面板的定位和设计</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="管理面板常见问题">

            

            
            <a href="/guides/v2.0/ext-best-practices/admin/ext-best-practices_admin_FAQ.html">管理面板常见问题</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="扩展编码">
    

    
    <a href="/guides/v2.0/ext-best-practices/extension-coding/coding-best-practices.html">扩展编码</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="最佳编程实践">

            

            
            <a href="/guides/v2.0/ext-best-practices/extension-coding/common-programming-bp.html">最佳编程实践</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2 active " id="在构架下工作">

            

            
            <a href="/guides/v2.0/ext-best-practices/extension-coding/working-with-arch-bp.html">在构架下工作</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="安装、性能及数据处理">

            

            
            <a href="/guides/v2.0/ext-best-practices/extension-coding/security-performance-data-bp.html">安装、性能及数据处理</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="观察者最佳实践">

            

            
            <a href="/guides/v2.0/ext-best-practices/extension-coding/observers-bp.html">观察者最佳实践</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="编码常见问题">

            

            
            <a href="/guides/v2.0/ext-best-practices/extension-coding/coding-faq.html">编码常见问题</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="新建一个magento管理面板页面">

            

            
            <a href="/guides/v2.0/ext-best-practices/extension-coding/example-module-adminpage.html">新建一个Magento管理面板页面</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="storefront">
    

    
    <a href="/guides/v2.0/ext-best-practices/storefront/storefront-best-practices.html">Storefront</a>
    

    
</li>


		    
		    	

<li class="nav-level1  " id="security">
    

    
    <span>Security</span>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="编写安全的代码">

            

            
            <a href="/guides/v2.0/ext-best-practices/security/writing-secure-code.html">编写安全的代码</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="tutorials">
    

    
    <span>Tutorials</span>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="拷贝form输入字段集">

            

            
            <a href="/guides/v2.0/ext-best-practices/tutorials/copy-fieldsets.html">拷贝form输入字段集</a>
            

            
        </li>
        
        
        
        
    </ul>
    
</li>


		    
		    </ul>
		</div>

	</div>

</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	

  <nav class="breadcrumbs">

    <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      <li class="breadcrumb-item"><a class="breadcrumb-item" href="/guides/v2.0/"><span>首页</span></a></li>

    <!-- Iteration breadcrumb item -->
    
    

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">

        
          <a property="item" typeof="WebPage" href="/guides/v2.0/ext-best-practices/bk-ext-best-practices.html">
            <span property="name">扩展开发者最佳实践</span>
          </a>
        

        <meta property="position" content="1" />
      </li>

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem">

        

          

          <span property="name">在构架下工作</span>

        

        <meta property="position" content="2" />
      </li>

    

    </ol>

  </nav>



	

	

	<h1 class="page-heading">在构架下工作</h1>

  


</section>

			<p>In addition to understanding fundamental programming designs/concepts, you are encouraged to learn how the MVC architecture works in our code and how to work with Magento’s generated code and factories.</p>

<h3 id="avoid-modification-of-the-magento-core">Avoid modification of the Magento Core</h3>
<p>The core code is the default Magento code that comes with the application. You should never edit the core code because code changes occur between version upgrades and any changes you make will get overwritten. Try achieving your desired behavior with plugins, overriding interface preferences, and <span term-uuid="c57aef7c-97b4-4b2b-a999-8001accef1fe" class="glossary-term" data-toggle="popover">event</span> observers.</p>

<p>If you feel that Magento can be improved with your core code changes, please consider <a href="/guides/v2.0/contributor-guide/contributing.html">contributing via Git</a>.</p>

<h3 id="learn-the-architecture">Learn the architecture</h3>
<p>To create the optimum module, you should get to know the Magento 2 architecture. Start off by familiarizing yourself with the <a href="/guides/v2.0/pattern-library/bk-pattern.html">Admin Pattern Library</a>, the core <a href="/guides/v2.0/extension-dev-guide/bk-extension-dev-guide.html">Magentocomponents</a>, and our <a href="/guides/v2.0/extension-dev-guide/service-contracts/service-contracts.html">service contracts</a> and <a href="/guides/v2.0/get-started/bk-get-started-api.html">APIs</a>.</p>

<h3 id="check-your-extension-configurations">Check your extension configurations</h3>
<p>Make sure your <span term-uuid="55774db9-bf9d-40f3-83db-b10cc5ae3b68" class="glossary-term" data-toggle="popover">扩展</span> is configured correctly in each of your extension’s configuration files. Invalid or unexpected values will cause your extension to behave incorrectly within Magento.</p>

<h3 id="know-and-leverage-the-magento-2-framework">Know and leverage the Magento 2 framework</h3>
<p>There have been some significant changes from Magento 1. Be sure to study the capabilities and standards of the Magento 2 Framework.</p>

<p>例如:</p>

<ul>
  <li>Instead of creating custom validators from scratch, implement the <a href="https://github.com/magento/magento2/blob/2.0/lib/internal/Magento/Framework/Validator/ValidatorInterface.php" target="_blank"><code class="highlighter-rouge">\Magento\Framework\Validator\ValidatorInterface</code></a>.</li>
  <li>Instantiating a database connection can be expensive and unneccessary. Magento provides resource models for performing SQL commands. (See <a href="/guides/v2.0/architecture/archi_perspectives/persist_layer.html">Persistence Layer</a>)</li>
  <li>Consider using Magento framework conventions instead of low-level or <span term-uuid="bf703ab1-ca4b-48f9-b2b7-16a81fd46e02" class="glossary-term" data-toggle="popover">PHP</span> functionality.</li>
  <li>Use the  <a href="https://github.com/magento/magento2/blob/2.0/lib/internal/Magento/Framework/Data/Collection.php" target="_blank"><code class="highlighter-rouge">Magento\Framework\Data\Collection</code></a> class to retrieve a collection of filtered objects instead of directly querying the database.</li>
</ul>

<h3 id="use-dependency-injection">Use dependency injection</h3>
<p>Direct class instantiation is not recommended because the class can be rewritten. If the class is created directly, any rewrites will not be applied and it breaks Magento’s class rewrite capability. We encourage you to become familiar with how we use <a href="/guides/v2.0/extension-dev-guide/depend-inj.html">dependency injection</a> to get an instance of a class.</p>

<h3 id="follow-model-view-control-mvc-pattern">Follow Model-View-Control (MVC) pattern</h3>
<p>Make sure your extension adheres to the MVC Pattern, and that it does not violate any of its principles.</p>

<p>Some important things to check in your extensions:</p>

<ul>
  <li>Make sure your Business Logic, Configuration, and SQL are implemented in the correct places.</li>
  <li>Make sure that CSS, JavaScript, HTML, and <span term-uuid="8c0645c5-aa6b-4a52-8266-5659a8b9d079" class="glossary-term" data-toggle="popover">XML</span> code are all in the appropriate files (i.e. they should not be inline).</li>
  <li>Use appropriate logic in a Block, Helper, Template, Controller, or Model.</li>
  <li>Ensure correct <span term-uuid="c1e4242b-1f1a-44c3-9d72-1d5b1435e142" class="glossary-term" data-toggle="popover">模块</span> design.</li>
</ul>

<h3 id="use-the-php_codesniffer-tool">Use the PHP_CodeSniffer tool</h3>

<p><a href="https://github.com/squizlabs/PHP_CodeSniffer" target="_blank">PHP_CodeSniffer</a> is a set of PHP scripts that checks your code for violations of a particular coding standard. It can be used in conjunction with the <a href="https://github.com/magento/marketplace-eqp" target="_blank">Magento Extension Quality Program Coding Standard</a> to check your code for some of the more common Magento and PHP problems. Using these two tools will ensure that your extension code meets many of <a href="/guides/v2.0/coding-standards/bk-coding-standards.html">Magento’s coding standards</a>. It also has the added benefits of keeping your code clean and maintainable.</p>

			
		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

    
  
    
    <div class="github-link">
      <a class="improve-page" href="https://github.com/magento/devdocs/blob/develop/guides/v2.0/ext-best-practices/extension-coding/working-with-arch-bp.md" target="_blank">
        去GitHub上编辑
      </a>
    </div>
    
  
    
    <div class="new-issue">
      <a href="https://github.com/magento/devdocs/issues/new?title=Feedback on page: /guides/v2.0/ext-best-practices/extension-coding/working-with-arch-bp.html" target="_blank">反馈</a>
    </div>
    
  
  </div>

	</section>
	<!-- /.content -->

</div> <!-- /.content-container -->


	</div>
	<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav footer-links">
  <li><a href="/guides/v2.0/contributor-guide/contributing_docs.html">成为贡献者</a>
  <li><a href="https://magento.github.io/glossary/index.html?audience=developer">术语表</a></li>
  <li><a href="http://magento.com/legal/terms/privacy/">隐私政策</a></li>
  <li><a href="http://magento.com/legal/terms/">服务条款</a></li>
  <li><a href="http://magento.com/legal/licensing/">许可/商标 常见问题</a></li>
  <li><a href="/guides/v2.0/release-notes/bk-release-notes.html">版本日志</a></li>
  <li><a href="/magento-third-party.html">三方许可</a></li>
</ul>

    </div>

		<div class="copyright-date">&copy; 2018 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/assets/js/app.min.js"></script>


<script src="/common/js/devdocs.min.js"></script>




</body>
</html>

