<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>将服务配置成web API | Magento 2 Developer Documentation</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">

	<link rel="stylesheet" href="/assets/css/app.css" />
	<link rel="stylesheet" href="/assets/css/print.css" media="print"/>

	<link rel="stylesheet" href="/common/css/devdocs.css" />

	<script>
  var baseUrl = "";
  var algolia = {
    id : "E642SEDTHL",
    index:  "devdocs",
    key:  "d2d0f33ab73e291ef8d88d8b565e754c"
  };
</script>




	<link rel="canonical" href="/guides/v2.0/extension-dev-guide/service-contracts/service-to-web-service.html">

	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body class="layout-default">

	<header class="site-header">

		<nav class="site-nav">

  <div class="menu-btn">
    <a id="menu-btn" class="menu-trigger menu-icon" href="#nav-main" aria-haspopup="true" aria-controls="nav-main"></a>
  </div>

  <div class="nav-container">

    <a class="logo" href="/guides/v2.0/">
      <img src="/assets/i/m-logo.svg" alt=""><img src="/assets/i/magento-logo.svg" alt="Magento" class="magento-logo" />
      <span class="site-logo">DevDocs</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      
<div class="version-switcher dropdown" data-version="2.0">
	<button id="version-switcher-button" class="btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Magento 2.0
	</button>

	<ul class="dropdown-menu dropdown-menu-left" aria-labelledby="version-switcher-button">
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.0/extension-dev-guide/service-contracts/service-to-web-service.html">Magento 2.0</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.1/extension-dev-guide/service-contracts/service-to-web-service.html">Magento 2.1</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.2/extension-dev-guide/service-contracts/service-to-web-service.html">Magento 2.2</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.3/extension-dev-guide/service-contracts/service-to-web-service.html">Magento 2.3 Pre-release</a></li>
	
  </ul>

</div>


      <!-- Main Navigation -->
<ul class="nav-main" role="menubar">

  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">部署</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          <li><a href="/guides/v2.0/install-gde/bk-install-guide.html">安装向导</a></li>
          
          <li><a href="/guides/v2.0/comp-mgr/bk-compman-upgrade-guide.html">组件管理和系统升级手册</a></li>
          
          <li><a href="/guides/v2.0/config-guide/bk-config-guide.html">配置手册</a></li>
          
          <li><a href="/guides/v2.0/migration/bk-migration-guide.html">迁移指引</a></li>
          <li><a href="/guides/v2.0/cloud/bk-cloud.html">上云指引</a></li>
          <li><a href="/magento-release-information.html">版本日志</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">开发</span>

    <div class="nav-popup" role="menu" aria-hidden="true">

      <div class="nav-section">
        <div class="nav-section-title">服务端</div>
        <ul>
          <li><a href="/guides/v2.0/architecture/bk-architecture.html">架构说明</a></li>
          <li><a href="/guides/v2.0/extension-dev-guide/bk-extension-dev-guide.html">PHP开发文档</a></li>
          <li><a href="/guides/v2.0/ext-best-practices/bk-ext-best-practices.html">扩展开发实践</a></li>
          <li><a href="/guides/v2.0/mrg/intro.html">各模块介绍</a></li>
          <li><a href="/guides/v2.0/coding-standards/bk-coding-standards.html">编码规范</a></li>
          <li><a href="/guides/v2.0/contributor-guide/contributing.html">贡献指引</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">前端</div>
        <ul>
          <li class=""><a href="/guides/v2.0/frontend-dev-guide/bk-frontend-dev-guide.html">前端工程师手册</a></li>
          
          <li><a href="/guides/v2.0/ui-components/ui-component.html">UI组件</a></li>
          
          <li><a href="/guides/v2.0/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript开发手册</a></li>
          <li><a href="/guides/v2.0/pattern-library/bk-pattern.html">管理面板设计模式及所用库</a></li>
          <li><a href="/guides/v2.0/design-styleguide/bk-styleguide.html">管理面板样式手册</a></li>
          <li><a href="https://magento-research.github.io/pwa-devdocs/">PWA Studios</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title"><abbr>API</abbr></div>
        <ul>
          <li><a href="/guides/v2.0/get-started/bk-get-started-api.html">Web APIs起步</a></li>
          <li><a href="/guides/v2.0/rest/bk-rest.html">REST API参考</a></li>
          <li><a href="/guides/v2.0/soap/bk-soap.html">SOAP API参考</a></li>
          
          
        </ul>
      </div>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">测试</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        <li><a href="/guides/v2.0/test/testing.html">Magento测试手册</a></li>
        
        <li><a href="/guides/v2.0/mtf/mtf_introduction.html">功能测试</a></li>
        <li><a href="/guides/v2.0/test/integration/integration_test_execution.html">集成测试</a></li>
        <li><a href="/guides/v2.0/test/js/jasmine.html">JavaScript单元测试</a></li>
        <li><a href="/guides/v2.0/test/unit/unit_test_execution.html">PHP单元测试</a></li>
        <li><a href="/guides/v2.0/get-started/web-api-functional-testing.html">Web API功能测试</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-separator"></li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">功能文档</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          
        
        <li><a href="/guides/v2.0/howdoi/checkout/checkout_overview.html">Checkout</a></li>
        <li><a href="/guides/v2.0/payments-integrations/bk-payments-integrations.html">支付集成</a></li>
        
      </ul>
    </div>

  </li>


  <li class="nav-main-item"  tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">指引</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        <li><a href="/guides/v2.0/howdoi/bk-how-do-i.html">如何</a></li>
        

        <li><a href="/videos/">视频教程</a></li>
      </ul>
    </div>

  </li>

</ul><!-- /.nav-main -->

    </div>

    <div class="search-btn">
      <a class="search-trigger search-icon" href="#"></a>
    </div>

    <form class="quick-search" action="/guides/v2.0/search.html" method="get" novalidate="novalidate">
      <input type="search" name="q" placeholder="Search" />
      <a href="#" class="quick-search-close">&times;</a>
    </form>

  </div>

</nav><!-- #site-nav -->
<div class="nav-main-fader"></div>


	</header>

	<div class="global-wrapper">

		<div class="main-container">
			<a id="main-content"></a>


<div class="content-container">

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" data-proofer-ignore class="toc-toggler">内容表格</a>
	<div class="sidebar-wrapper">

		

		<h4 class="guide-title">PHP开发文档</h4>
		<div class="collapsible-navigation">
		    <ul>
		    
		    	

<li class="nav-level1  " id="介绍">
    

    
    <a href="/guides/v2.0/extension-dev-guide/bk-extension-dev-guide.html">介绍</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="开发者指引">

            

            
            <a href="/guides/v2.0/extension-dev-guide/intro/developers_roadmap.html">开发者指引</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="composer介绍">

            

            
            <a href="/guides/v2.0/extension-dev-guide/intro/intro-composer.html">Composer介绍</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="常用术语表">

            

            
            <a href="/guides/v2.0/extension-dev-guide/intro/intro-composer-gloss.html">常用术语表</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="准备(快速开始开发)">
    

    
    <a href="/guides/v2.0/extension-dev-guide/prepare/prepare.html">准备(快速开始开发)</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="组件类型">

            

            
            <a href="/guides/v2.0/extension-dev-guide/prepare/dev-modtypes.html">组件类型</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="关于组件的文件结构">

            

            
            <a href="/guides/v2.0/extension-dev-guide/prepare/prepare_file-str.html">关于组件的文件结构</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="开发和打包组件指引">

            

            
            <a href="/guides/v2.0/extension-dev-guide/prepare/dev-summary.html">开发和打包组件指引</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="扩展生命周期">

            

            
            <a href="/guides/v2.0/extension-dev-guide/prepare/lifecycle.html">扩展生命周期</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="构建">
    

    
    <a href="/guides/v2.0/extension-dev-guide/build/build.html">构建</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="di.xml文件">

            

            
            <a href="/guides/v2.0/extension-dev-guide/build/di-xml-file.html">di.xml文件</a>
            

            
        </li>
        
        
        
        
        
        
        <li class="nav-level2  " id="composer.json文件">

            

            
            <a href="/guides/v2.0/extension-dev-guide/build/composer-integration.html">composer.json文件</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="定义你的配置文件">

            

            
            <a href="/guides/v2.0/extension-dev-guide/build/required-configuration-files.html">定义你的配置文件</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="创建你的组件文件结构">

            

            
            <a href="/guides/v2.0/extension-dev-guide/build/module-file-structure.html">创建你的组件文件结构</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="注册你的组件">

            

            
            <a href="/guides/v2.0/extension-dev-guide/build/component-registration.html">注册你的组件</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="统一资源名称(urn)验证">

            

            
            <a href="/guides/v2.0/extension-dev-guide/build/XSD-XML-validation.html">统一资源名称(URN)验证</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="你组件的名称">

            

            
            <a href="/guides/v2.0/extension-dev-guide/build/create_component.html">你组件的名称</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="组件加载顺序">

            

            
            <a href="/guides/v2.0/extension-dev-guide/build/module-load-order.html">组件加载顺序</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="启用和禁用组件">

            

            
            <a href="/guides/v2.0/extension-dev-guide/build/enable-module.html">启用和禁用组件</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="打包">
    

    
    <a href="/guides/v2.0/extension-dev-guide/package/package.html">打包</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="打包组件">

            

            
            <a href="/guides/v2.0/extension-dev-guide/package/package_module.html">打包组件</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="上传组件到magento市场">

            

            
            <a href="/guides/v2.0/extension-dev-guide/package/package_mktpl.html">上传组件到Magento市场</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="验证">
    

    
    <a href="/guides/v2.0/extension-dev-guide/validate/validate.html">验证</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="测试你的组件">

            

            
            <a href="/guides/v2.0/extension-dev-guide/validate/test-module.html">测试你的组件</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="部份缓存">
    

    
    <a href="/guides/v2.0/extension-dev-guide/cache/partial-caching.html">部份缓存</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="创建自定义缓存引擎">

            

            
            <a href="/guides/v2.0/extension-dev-guide/cache/partial-caching/database-caching.html">创建自定义缓存引擎</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="创建缓存类型">

            

            
            <a href="/guides/v2.0/extension-dev-guide/cache/partial-caching/create-cache-type.html">创建缓存类型</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="页面缓存">
    

    
    <a href="/guides/v2.0/extension-dev-guide/cache/page-caching.html">页面缓存</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="公开内容">

            

            
            <a href="/guides/v2.0/extension-dev-guide/cache/page-caching/public-content.html">公开内容</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="隐私内容">

            

            
            <a href="/guides/v2.0/extension-dev-guide/cache/page-caching/private-content.html">隐私内容</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="添加命令行命令">
    

    
    <a href="/guides/v2.0/extension-dev-guide/cli-cmds/cli-add.html">添加命令行命令</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="命令命名指南">

            

            
            <a href="/guides/v2.0/extension-dev-guide/cli-cmds/cli-naming-guidelines.html">命令命名指南</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="如何添加命令行命令">

            

            
            <a href="/guides/v2.0/extension-dev-guide/cli-cmds/cli-howto.html">如何添加命令行命令</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

		    
		    	

<li class="nav-level1  " id="组件开发">
    

    
    <a href="/guides/v2.0/extension-dev-guide/module-development.html">组件开发</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="服务契约">

            

            
            <a href="/guides/v2.0/extension-dev-guide/service-contracts/service-contracts.html">服务契约</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="public-interfaces-&amp;-apis">

            

            
            <a href="/guides/v2.0/extension-dev-guide/api-concepts.html">Public interfaces &amp; APIs</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="服务契约设置模式">

            

            
            <a href="/guides/v2.0/extension-dev-guide/service-contracts/design-patterns.html">服务契约设置模式</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="依赖注入">

            

            
            <a href="/guides/v2.0/extension-dev-guide/depend-inj.html">依赖注入</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="objectmanager">

            

            
            <a href="/guides/v2.0/extension-dev-guide/object-manager.html">ObjectManager</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="事件和观查者">

            

            
            <a href="/guides/v2.0/extension-dev-guide/events-and-observers.html">事件和观查者</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="工厂">

            

            
            <a href="/guides/v2.0/extension-dev-guide/factories.html">工厂</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="代理">

            

            
            <a href="/guides/v2.0/extension-dev-guide/proxies.html">代理</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="代码生成">

            

            
            <a href="/guides/v2.0/extension-dev-guide/code-generation.html">代码生成</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="实体属性值(eav)和扩展属性">

            

            
            <a href="/guides/v2.0/extension-dev-guide/attributes.html">实体属性值(EAV)和扩展属性</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="插件(拦截器)">

            

            
            <a href="/guides/v2.0/extension-dev-guide/plugins.html">插件(拦截器)</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="路由">

            

            
            <a href="/guides/v2.0/extension-dev-guide/routing.html">路由</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="索引">

            

            
            <span>索引</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="索引概述">
                    

                    
                    <a  href="/guides/v2.0/extension-dev-guide/indexing.html">索引概述</a>
                    

                    
                </li>
                
                

                
                

                
                
                <li class="nav-level3  " id="添加自定义索引">
                    

                    
                    <a  href="/guides/v2.0/extension-dev-guide/indexing-custom.html">添加自定义索引</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        
        
        <li class="nav-level2  " id="消息队列-(magento-commerce-edition-only)">

            

            
            <span>消息队列 (Magento Commerce Edition Only)</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="消息队列-overview">
                    

                    
                    <a  href="/guides/v2.0/extension-dev-guide/message-queues/message-queues.html">消息队列 overview</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="configure-message-queues">
                    

                    
                    <a  href="/guides/v2.0/extension-dev-guide/message-queues/config-mq.html">Configure message Queues</a>
                    

                    
                </li>
                
                

                
                

                
                

                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="添加扩展属性到实体">

            

            
            <a href="/guides/v2.0/extension-dev-guide/extension_attributes/adding-attributes.html">添加扩展属性到实体</a>
            

            
        </li>
        
        
        
        
        
        
        <li class="nav-level2 active " id="将服务配置成web-api">

            

            
            <a href="/guides/v2.0/extension-dev-guide/service-contracts/service-to-web-service.html">将服务配置成web API</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="部署期间清空目录">

            

            
            <a href="/guides/v2.0/howdoi/php/php_clear-dirs.html">部署期间清空目录</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="适配器">

            

            
            <a href="/guides/v2.0/extension-dev-guide/adapters.html">适配器</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

		    
		    	

		    
		    	

<li class="nav-level1  " id="安全">
    

    
    <span>安全</span>
    

    
    <ul>
        
        
        
        
        
        <li class="nav-level2  " id="不安全的方法">

            

            
            <a href="/guides/v2.0/extension-dev-guide/security/non-secure-functions.html">不安全的方法</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="版本控制">
    

    
    <a href="/guides/v2.0/extension-dev-guide/versioning/">版本控制</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="模块版本依赖">

            

            
            <a href="/guides/v2.0/extension-dev-guide/versioning/dependencies.html">模块版本依赖</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="基础代码修改">

            

            
            <a href="/guides/v2.0/extension-dev-guide/versioning/codebase-changes.html">基础代码修改</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    </ul>
		</div>

	</div>

</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	

  <nav class="breadcrumbs">

    <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      <li class="breadcrumb-item"><a class="breadcrumb-item" href="/guides/v2.0/"><span>首页</span></a></li>

    <!-- Iteration breadcrumb item -->
    
    

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">

        
          <a property="item" typeof="WebPage" href="/guides/v2.0/extension-dev-guide/bk-extension-dev-guide.html">
            <span property="name">PHP开发文档</span>
          </a>
        

        <meta property="position" content="1" />
      </li>

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem">

        

          

          <span property="name">将服务配置成web API</span>

        

        <meta property="position" content="2" />
      </li>

    

    </ol>

  </nav>



	

	

	<h1 class="page-heading">将服务配置成web API</h1>

  


</section>

			<h2 id="overview-web-service">概述</h2>
<p>You can configure a Magento or third-party service as a web <span term-uuid="786086f2-622b-4007-97fe-2c19e5283035" class="glossary-term" data-toggle="popover">API</span>.</p>
<p>To <a href="#configure-webapi">configure a web API</a>, you define <span term-uuid="8c0645c5-aa6b-4a52-8266-5659a8b9d079" class="glossary-term" data-toggle="popover">XML</span> elements and attributes in the <code>webapi.xml</code> XML configuration file for the <span term-uuid="c1e4242b-1f1a-44c3-9d72-1d5b1435e142" class="glossary-term" data-toggle="popover">模块</span> for the service.
   The <code>webapi.xml</code> file for your module specifies an XML schema file for validation.
   By default, this file is <code>app/code/&lt;VENDOR&gt;/Webapi/etc/webapi.xsd</code>.
</p>
<p>Your module can use the default <code>webapi.xsd</code> file or you can create a customized XML schema file for validation.</p>
<p>Users can make REST or SOAP calls to access the <span term-uuid="377dc0a3-b8a7-4dfa-808e-2de37e4c0029" class="glossary-term" data-toggle="popover">web API</span>.</p>
<p>To configure a web API, read these topics:</p>
<ul>
   <li>
      <p><a href="#configure-webapi">Configure a web API</a></p>
   </li>
   <li>
      <p><a href="#configuration-options">webapi.xml configuration options</a></p>
   </li>
   <li>
      <p><a href="#sample-webapi">Sample webapi.xml file</a></p>
   </li>
   <li>
      <p><a href="#validate-webapi">webapi.xsd XML schema file</a></p>
   </li>
</ul>
<h2 id="configure-webapi">Configure a web API</h2>
<p>To configure a web API for a service, you define XML elements and attributes in the
   <code>app/code/Magento/&lt;MODULE&gt;/etc/webapi.xml</code> file, where <code>&lt;MODULE&gt;</code> is the module name.
   例如， the web API for the Customer service is defined in the <code>app/code/Magento/Customer/etc/webapi.xml</code> configuration file.
</p>
<h2 id="service-interface-requirements">Service Interface Requirements</h2>

<p>After a service class is configured using the <code class="highlighter-rouge">webapi.xml</code> file, Magento dynamically makes the service method available using the web API. Because this is automatically generated, it is important that the service class be formatted a very specific way.</p>

<p>This makes sense when you consider that while a service class possibly expects objects of a specific class type (such a save method) and possibly returns a result that is a class or array of classes, neither SOAP nor REST are guaranteed to have that class defined on the client end or even to have a concept similar to a <span term-uuid="bf703ab1-ca4b-48f9-b2b7-16a81fd46e02" class="glossary-term" data-toggle="popover">PHP</span> class. Because of this, Magento uses reflection to automatically create these classes and sets data that you have submitted in JSON or HTTP array syntax onto an instance of the expected PHP class when calling the service method.</p>

<p>Conversely, if an object is returned from one of these methods, Magento automatically converts that PHP object into a JSON or SOAP object before sending it over the web API.</p>

<p>To do this conversion, the Magento application must know information about both the parameters the service method is expecting and the return type of the result the service method delivers. PHP 5.x does not allow for type-hinting for scalar parameters or for return types so in order to convert the array or JSON object to or from the appropriate class type, PHP relies on the PHP doc block. Specifically, the lines containing <code class="highlighter-rouge">@param</code> and <code class="highlighter-rouge">@return</code> must follow certain rules for Magento to be able to correctly convert between types.</p>

<p>For SOAP and REST to work correctly, the following rules must be followed by the service interface’s doc block:</p>

<ul>
  <li>All methods exposed by the web API must follow these rules</li>
  <li>All methods on objects expected as parameters or returned must follow these rules</li>
  <li>
    <p>Parameters must be defined in the doc block as</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* @param type $paramName
</code></pre></div>    </div>
  </li>
  <li>
    <p>Return type must be defined in the doc block as</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* @return type
</code></pre></div>    </div>
  </li>
  <li>Valid scalar types include: <code class="highlighter-rouge">mixed</code> (or <code class="highlighter-rouge">anyType</code>), <code class="highlighter-rouge">bool</code> (or <code class="highlighter-rouge">boolean</code>), <code class="highlighter-rouge">str</code> (or <code class="highlighter-rouge">string</code>), <code class="highlighter-rouge">integer</code> (or <code class="highlighter-rouge">int</code>), <code class="highlighter-rouge">float</code>, and <code class="highlighter-rouge">double</code>.</li>
  <li>Valid object types include a fully qualified class name or a fully qualified interface name.</li>
  <li>Any parameters or return values of type array can be denoted by following any of the previous types by an empty set of square brackets <code class="highlighter-rouge">[]</code></li>
</ul>

<p>Following are some examples of various types and what they would look like in the doc block:</p>

<ul>
  <li>
    <p>A parameter $types which can be an array of strings:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* @param string[] $types
</code></pre></div>    </div>
  </li>
  <li>
    <p>A parameter $id which can be an integer:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* @param int $id
</code></pre></div>    </div>
  </li>
  <li>
    <p>A parameter $customer which is an object of class <code class="highlighter-rouge">\Magento\Customer\Api\Data\CustomerInterface</code>:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* @param \Magento\Customer\Api\Data\CustomerInterface $customer
</code></pre></div>    </div>

    <p>Note that even if the class <code class="highlighter-rouge">\Magento\Customer\Api\Data\CustomerInterface</code> is in the same namespace (or a sub-namespace) of the current class or a use statement has exists at the top of the class, the fully qualified namespace must be used or the web API throws an exception.</p>
  </li>
  <li>
    <p>A return which is an array of objects of type <code class="highlighter-rouge">\Magento\Customer\Api\Data\CustomerInterface</code>:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* @return \Magento\Customer\Api\Data\CustomerInterface[]
</code></pre></div>    </div>
  </li>
</ul>

<div class="bs-callout bs-callout-info" id="info">
  <p>If a service method argument is called <code>item</code>, there will be a problem during SOAP processing. All item nodes are removed during SOAP request processing. This is done to unwrap array items that are wrapped by the SOAP server into an <code>item</code> element. </p>
</div>

<h2 id="configuration-options">webapi.xml configuration options</h2>
<p>To define web API 组件, set these attributes on these XML elements in the
   <code>webapi.xml</code> configuration file, as follows:
</p>
<table style="width:100%">
   <tr bgcolor="lightgray">
      <th>XML&nbsp;element</th>
      <th>描述</th>
      <th>Attributes</th>
   </tr>
   <tr>
      <td>
         <p><code>&lt;routes&gt;</code></p>
      </td>
      <td>
         <p>Required. Root element that defines the namespace and location of the XML schema file.</p>
      </td>
      <td>
         <ul>
            <li>
               <p><code>xmlns:xsi</code>. Required. Defines the namespace for the XML schema instance.</p>
            </li>
            <li>
               <p><code>xsi:noNamespaceSchemaLocation</code>. Required. Defines the path and file name of the XML schema file to use to validate the web API.</p>
            </li>
         </ul>
      </td>
   </tr>
   <tr>
      <td>
         <p><code>&lt;route&gt;</code></p>
      </td>
      <td>
         <p>Required. Child element of <code>&lt;routes&gt;</code>. Defines the HTTP route for the web API method.</p>
      </td>
      <td>
         <ul>
            <li>
               <p><code>method</code>. Required. String. HTTP method. Valid values are GET, POST, PUT, and DELETE.</p>
            </li>
            <li>
               <p><code>url</code>. Required. String.
                  Magento resource. Optionally, one or more template parameters.
               </p>
            </li>
            <li>
               <p><code>secure</code>. Optional. Boolean. Indicates that the route is accessible over only HTTPS. Any attempts to access this route over non-secure causes an exception.</p>
            </li>
         </ul>
      </td>
   </tr>
   <tr>
      <td>
         <p><code>&lt;service&gt;</code></p>
      </td>
      <td>
         <p>Required. Child element of <code>&lt;route&gt;</code>. Defines the implemented interface and the web API method name.</p>
      </td>
      <td>
         <ul>
            <li>
               <p><code>class</code>. Required. String. Location and name of implemented interface.</p>
            </li>
            <li>
               <p><code>method</code>. Required. String. Web API method name.</p>
            </li>
         </ul>
      </td>
   </tr>
   <tr>
      <td>
         <p><code>&lt;resources&gt;</code></p>
      </td>
      <td>
         <p>Required. Child element of <code>&lt;route&gt;</code>. Container for one or more resource definitions.</p>
      </td>
      <td>
         <p>None.</p>
      </td>
   </tr>
   <tr>
      <td>
         <p><code>&lt;resource&gt;</code></p>
      </td>
      <td>
         <p>Required. Child element of <code>&lt;resources&gt;</code>. Defines a resource to which the caller must have access.</p>
      </td>
      <td>
         <ul>
            <li>
               <p><code>ref</code>.
                  Required. Referenced resource. Valid values are <code>self</code>, <code>anonymous</code>, or a Magento resource, such as <code>Magento_Customer::group</code>.
               </p>
               <p><strong>注意</strong>:The Magento web API framework enables guest users to access resources that are configured with <code>anonymous</code> permission.</p>
                  <p>Any user that the framework cannot authenticate through existing <a href="/guides/v2.0/get-started/authentication/gs-authentication.html">authentication
                     mechanisms</a> is considered a guest user.</p>

            </li>
         </ul>
      </td>
   </tr>
   <tr>
      <td>
         <p><code>&lt;data&gt;</code></p>
      </td>
      <td>
         <p>Optional. Child element of <code>&lt;route&gt;</code>. Container for one or more parameter definitions.</p>
      </td>
      <td>
         <p>None.</p>
      </td>
   </tr>
   <tr>
      <td>
         <p><code>&lt;parameter&gt;</code></p>
      </td>
      <td>
         <p>Required if <code>&lt;data&gt;</code> is specified. Child element of <code>&lt;data&gt;</code>. Defines a parameter.</p>
      </td>
      <td>
         <ul>
            <li>
               <p><code>name</code>. String. Parameter name.</p>
            </li>
            <li>
               <p><code>force</code>. Boolean.</p>
            </li>
         </ul>
      </td>
   </tr>
</table>
<h2 id="sample-webapi">Sample webapi.xml file</h2>
<p>This excerpt is from the <code>webapi.xml</code> file that defines the Customer service web API:</p>
<script src="https://gist.github.com/keharper/507f485712a496ad079a.js"></script>

<p>In this <code>webapi.xml</code> example:</p>
<table style="width:100%">
   <tr bgcolor="lightgray">
      <th>Line</th>
      <th>Defines</th>
   </tr>
   <tr>
      <td>
         <p>3</p>
      </td>
      <td>
         <p>The XML schema file that is used to validate the XML.</p>
         <p>The XML schema file is <code>xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="urn:magento:module:Magento_Webapi:etc/webapi.xsd</code>.</p>
      </td>
   </tr>
   <tr>
      <td>
         <p>5</p>
      </td>
      <td>
         <p>The HTTP method and web resource through which to access the route.</p>
         <p>The HTTP method is GET.</p>
         <p>The resource is <code>/V1/customerGroups/:id</code>. Users must substitute a customer ID for the <code>id</code> template parameter.</p>
      </td>
   </tr>
   <tr>
      <td>
         <p>6</p>
      </td>
      <td>
         <p>The interface that the route implements and the name of the web API method.</p>
         <p>The route implements the <code>Magento\Customer\Api\GroupRepositoryInterface</code> interface.</p>
         <p>The web API method name is <code>get</code>.</p>
      </td>
   </tr>
   <tr>
      <td>
         <p>8</p>
      </td>
      <td>
         <p>The resource to which the caller must have access.</p>
         <p>The caller must have access to <code>Magento_Customer::group</code> resource.</p>
      </td>
   </tr>
   <tr>
      <td>
         <p>18</p>
      </td>
      <td>
         <p>A required parameter.</p>
         <p>The <code>id</code> parameter is required on GET calls to <code>/V1/customers/me/billingAddress</code>.</p>
      </td>
   </tr>
</table>
<h2 id="validate-webapi">webapi.xsd XML schema file</h2>
<p>The <code>webapi.xml</code> file for your module must specify an XML schema file for validation. Your <code>webapi.xml</code> file can specify the default or a customized XML schema file.</p>
<p>The default <code>webapi.xsd</code> XML schema file can be found in the <code>app/code/Magento/Webapi/etc</code> directory.</p>

			
		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

    
      <div class="page-contributor">
        <a href="http://www.classyllama.com/" target="_blank">
          感谢Classy Llama贡献这篇文章
        </a>
      </div>
    
  
    
    <div class="github-link">
      <a class="improve-page" href="https://github.com/magento/devdocs/blob/develop/guides/v2.0/extension-dev-guide/service-contracts/service-to-web-service.md" target="_blank">
        去GitHub上编辑
      </a>
    </div>
    
  
    
    <div class="new-issue">
      <a href="https://github.com/magento/devdocs/issues/new?title=Feedback on page: /guides/v2.0/extension-dev-guide/service-contracts/service-to-web-service.html" target="_blank">反馈</a>
    </div>
    
  
  </div>

	</section>
	<!-- /.content -->

</div> <!-- /.content-container -->


	</div>
	<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav footer-links">
  <li><a href="/guides/v2.0/contributor-guide/contributing_docs.html">成为贡献者</a>
  <li><a href="https://magento.github.io/glossary/index.html?audience=developer">术语表</a></li>
  <li><a href="http://magento.com/legal/terms/privacy/">隐私政策</a></li>
  <li><a href="http://magento.com/legal/terms/">服务条款</a></li>
  <li><a href="http://magento.com/legal/licensing/">许可/商标 常见问题</a></li>
  <li><a href="/guides/v2.0/release-notes/bk-release-notes.html">版本日志</a></li>
  <li><a href="/magento-third-party.html">三方许可</a></li>
</ul>

    </div>

		<div class="copyright-date">&copy; 2018 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/assets/js/app.min.js"></script>


<script src="/common/js/devdocs.min.js"></script>




</body>
</html>

