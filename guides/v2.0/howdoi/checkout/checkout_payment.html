<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>为结算添加自定义的支付方式 | Magento 2 Developer Documentation</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">

	<link rel="stylesheet" href="/assets/css/app.css" />
	<link rel="stylesheet" href="/assets/css/print.css" media="print"/>

	<link rel="stylesheet" href="/common/css/devdocs.css" />

	<script>
  var baseUrl = "";
  var algolia = {
    id : "E642SEDTHL",
    index:  "devdocs",
    key:  "d2d0f33ab73e291ef8d88d8b565e754c"
  };
</script>




	<link rel="canonical" href="/guides/v2.0/howdoi/checkout/checkout_payment.html">

	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body class="layout-default">

	<header class="site-header">

		<nav class="site-nav">

  <div class="menu-btn">
    <a id="menu-btn" class="menu-trigger menu-icon" href="#nav-main" aria-haspopup="true" aria-controls="nav-main"></a>
  </div>

  <div class="nav-container">

    <a class="logo" href="/guides/v2.0/">
      <img src="/assets/i/m-logo.svg" alt=""><img src="/assets/i/magento-logo.svg" alt="Magento" class="magento-logo" />
      <span class="site-logo">DevDocs</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      
<div class="version-switcher dropdown" data-version="2.0">
	<button id="version-switcher-button" class="btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Magento 2.0
	</button>

	<ul class="dropdown-menu dropdown-menu-left" aria-labelledby="version-switcher-button">
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.0/howdoi/checkout/checkout_payment.html">Magento 2.0</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.1/howdoi/checkout/checkout_payment.html">Magento 2.1</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.2/howdoi/checkout/checkout_payment.html">Magento 2.2</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.3/howdoi/checkout/checkout_payment.html">Magento 2.3 Pre-release</a></li>
	
  </ul>

</div>


      <!-- Main Navigation -->
<ul class="nav-main" role="menubar">

  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">部署</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          <li><a href="/guides/v2.0/install-gde/bk-install-guide.html">安装向导</a></li>
          
          <li><a href="/guides/v2.0/comp-mgr/bk-compman-upgrade-guide.html">组件管理和系统升级手册</a></li>
          
          <li><a href="/guides/v2.0/config-guide/bk-config-guide.html">配置手册</a></li>
          
          <li><a href="/guides/v2.0/migration/bk-migration-guide.html">迁移指引</a></li>
          <li><a href="/guides/v2.0/cloud/bk-cloud.html">上云指引</a></li>
          <li><a href="/magento-release-information.html">版本日志</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">开发</span>

    <div class="nav-popup" role="menu" aria-hidden="true">

      <div class="nav-section">
        <div class="nav-section-title">服务端</div>
        <ul>
          <li><a href="/guides/v2.0/architecture/bk-architecture.html">架构说明</a></li>
          <li><a href="/guides/v2.0/extension-dev-guide/bk-extension-dev-guide.html">PHP开发文档</a></li>
          <li><a href="/guides/v2.0/ext-best-practices/bk-ext-best-practices.html">扩展开发实践</a></li>
          <li><a href="/guides/v2.0/mrg/intro.html">各模块介绍</a></li>
          <li><a href="/guides/v2.0/coding-standards/bk-coding-standards.html">编码规范</a></li>
          <li><a href="/guides/v2.0/contributor-guide/contributing.html">贡献指引</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">前端</div>
        <ul>
          <li class=""><a href="/guides/v2.0/frontend-dev-guide/bk-frontend-dev-guide.html">前端工程师手册</a></li>
          
          <li><a href="/guides/v2.0/ui-components/ui-component.html">UI组件</a></li>
          
          <li><a href="/guides/v2.0/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript开发手册</a></li>
          <li><a href="/guides/v2.0/pattern-library/bk-pattern.html">管理面板设计模式及所用库</a></li>
          <li><a href="/guides/v2.0/design-styleguide/bk-styleguide.html">管理面板样式手册</a></li>
          <li><a href="https://magento-research.github.io/pwa-devdocs/">PWA Studios</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title"><abbr>API</abbr></div>
        <ul>
          <li><a href="/guides/v2.0/get-started/bk-get-started-api.html">Web APIs起步</a></li>
          <li><a href="/guides/v2.0/rest/bk-rest.html">REST API参考</a></li>
          <li><a href="/guides/v2.0/soap/bk-soap.html">SOAP API参考</a></li>
          
          
        </ul>
      </div>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">测试</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        <li><a href="/guides/v2.0/test/testing.html">Magento测试手册</a></li>
        
        <li><a href="/guides/v2.0/mtf/mtf_introduction.html">功能测试</a></li>
        <li><a href="/guides/v2.0/test/integration/integration_test_execution.html">集成测试</a></li>
        <li><a href="/guides/v2.0/test/js/jasmine.html">JavaScript单元测试</a></li>
        <li><a href="/guides/v2.0/test/unit/unit_test_execution.html">PHP单元测试</a></li>
        <li><a href="/guides/v2.0/get-started/web-api-functional-testing.html">Web API功能测试</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-separator"></li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">功能文档</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          
        
        <li><a href="/guides/v2.0/howdoi/checkout/checkout_overview.html">Checkout</a></li>
        <li><a href="/guides/v2.0/payments-integrations/bk-payments-integrations.html">支付集成</a></li>
        
      </ul>
    </div>

  </li>


  <li class="nav-main-item"  tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">指引</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        <li><a href="/guides/v2.0/howdoi/bk-how-do-i.html">如何</a></li>
        

        <li><a href="/videos/">视频教程</a></li>
      </ul>
    </div>

  </li>

</ul><!-- /.nav-main -->

    </div>

    <div class="search-btn">
      <a class="search-trigger search-icon" href="#"></a>
    </div>

    <form class="quick-search" action="/guides/v2.0/search.html" method="get" novalidate="novalidate">
      <input type="search" name="q" placeholder="Search" />
      <a href="#" class="quick-search-close">&times;</a>
    </form>

  </div>

</nav><!-- #site-nav -->
<div class="nav-main-fader"></div>


	</header>

	<div class="global-wrapper">

		<div class="main-container">
			<a id="main-content"></a>


<div class="content-container">

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" data-proofer-ignore class="toc-toggler">内容表格</a>
	<div class="sidebar-wrapper">

		

		<h4 class="guide-title">如何</h4>
		<div class="collapsible-navigation">
		    <ul>
		    
		    	

<li class="nav-level1  " id="如何">
    

    
    <a href="/guides/v2.0/howdoi/bk-how-do-i.html">如何</a>
    

    
</li>


		    
		    	

<li class="nav-level1  " id="贡献者注册表单">
    

    
    <a href="/guides/v2.0/howdoi/howdoi_contribute.html">贡献者注册表单</a>
    

    
</li>


		    
		    	

<li class="nav-level1  " id="配置magento">
    

    
    <a href="/guides/v2.0/howdoi/config/configure.html">配置Magento</a>
    

    
</li>


		    
		    	

		    
		    	

<li class="nav-level1  " id="部署magento到生产环境">
    

    
    <a href="/guides/v2.0/howdoi/deploy/deploy-to-prod.html">部署Magento到生产环境</a>
    

    
</li>


		    
		    	

<li class="nav-level1  " id="安装和配置">
    

    
    <a href="/guides/v2.0/howdoi/install/install-topics.html">安装和配置</a>
    

    
</li>


		    
		    	

<li class="nav-level1  " id="magento模式切换">
    

    
    <a href="/guides/v2.0/howdoi/install/mode-switch.html">Magento模式切换</a>
    

    
</li>


		    
		    	

<li class="nav-level1  " id="js开发">
    

    
    <a href="/guides/v2.0/howdoi/frontend/front-js.html">js开发</a>
    

    
</li>


		    
		    	

<li class="nav-level1  " id="布局开发">
    

    
    <a href="/guides/v2.0/howdoi/frontend/front-layout.html">布局开发</a>
    

    
</li>


		    
		    	

<li class="nav-level1  " id="迁移magento1到magento2">
    

    
    <a href="/guides/v2.0/howdoi/migrate/migrate.html">迁移Magento1到Magento2</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="迁移主题">

            

            
            <a href="/guides/v2.0/howdoi/migrate/migrate-themes.html">迁移主题</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="迁移扩展">

            

            
            <a href="/guides/v2.0/howdoi/migrate/migrate-extensions.html">迁移扩展</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="代码迁移">

            

            
            <a href="/guides/v2.0/howdoi/migrate/migrate-code.html">代码迁移</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="数据迁移">

            

            
            <a href="/guides/v2.0/howdoi/migrate/migrate-data.html">数据迁移</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="php开发">
    

    
    <a href="/guides/v2.0/howdoi/php/php_devs.html">PHP开发</a>
    

    
</li>


		    
		    	

<li class="nav-level1  " id="主题开发">
    

    
    <a href="/guides/v2.0/howdoi/frontend/front-theme.html">主题开发</a>
    

    
</li>


		    
		    	

<li class="nav-level1  " id="magento故障排除">
    

    
    <a href="/guides/v2.0/howdoi/troubleshoot/troubleshoot.html">Magento故障排除</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="重置为默认主题">

            

            
            <a href="/guides/v2.0/howdoi/troubleshoot/reset_theme.html">重置为默认主题</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="自定义结算页">
    

    
    <a href="/guides/v2.0/howdoi/checkout/checkout_overview.html">自定义结算页</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="添加一个结算步骤">

            

            
            <a href="/guides/v2.0/howdoi/checkout/checkout_new_step.html">添加一个结算步骤</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="自定义结算页某步骤的视图">

            

            
            <a href="/guides/v2.0/howdoi/checkout/checkout_customize.html">自定义结算页某步骤的视图</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2 active " id="为结算添加自定义的支付方式">

            

            
            <a href="/guides/v2.0/howdoi/checkout/checkout_payment.html">为结算添加自定义的支付方式</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="添加提交前自定义数据校验">

            

            
            <a href="/guides/v2.0/howdoi/checkout/checkout_order.html">添加提交前自定义数据校验</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="添加自定义物流校验">

            

            
            <a href="/guides/v2.0/howdoi/checkout/checkout_carrier.html">添加自定义物流校验</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="为邮编添加自定义掩码">

            

            
            <a href="/guides/v2.0/howdoi/checkout/checkout_zip.html">为邮编添加自定义掩码</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="在结算页为表单输入添加自定义模板">

            

            
            <a href="/guides/v2.0/howdoi/checkout/checkout_edit_form.html">在结算页为表单输入添加自定义模板</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="添加一个新的输入表单到结算页">

            

            
            <a href="/guides/v2.0/howdoi/checkout/checkout_form.html">添加一个新的输入表单到结算页</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="添加一个新的输入项到地址表单">

            

            
            <a href="/guides/v2.0/howdoi/checkout/checkout_new_field.html">添加一个新的输入项到地址表单</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="添加自定义物流地址渲染">

            

            
            <a href="/guides/v2.0/howdoi/checkout/checkout_address.html">添加自定义物流地址渲染</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="添加自定义影响其它输入的输入项">

            

            
            <a href="/guides/v2.0/howdoi/checkout/checkout_custom_checkbox.html">添加自定义影响其它输入的输入项</a>
            

            
        </li>
        
        
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="清除静态文件缓存">
    

    
    <a href="/guides/v2.0/howdoi/clean_static_cache.html">清除静态文件缓存</a>
    

    
</li>


		    
		    	

		    
		    </ul>
		</div>

	</div>

</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	

  <nav class="breadcrumbs">

    <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      <li class="breadcrumb-item"><a class="breadcrumb-item" href="/guides/v2.0/"><span>首页</span></a></li>

    <!-- Iteration breadcrumb item -->
    
    

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">

        
          <a property="item" typeof="WebPage" href="/guides/v2.0/howdoi/bk-how-do-i.html">
            <span property="name">How To</span>
          </a>
        

        <meta property="position" content="1" />
      </li>

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem">

        

          

          <span property="name">为结算添加自定义的支付方式</span>

        

        <meta property="position" content="2" />
      </li>

    

    </ol>

  </nav>



	

	

	<h1 class="page-heading">为结算添加自定义的支付方式</h1>

  


</section>

			<h2> 这里有什么 </h2>

<p>Out of the box, Magento <span term-uuid="278c3ce0-cd4c-4ffc-a098-695d94d73bde" class="glossary-term" data-toggle="popover">checkout</span> consists of two steps:</p>

<ul>
  <li>Shipping Information</li>
  <li>Review and Payment Information</li>
</ul>

<p>On the Review and Payment Information step the enabled payment methods are rendered. This topic describes how to add your custom <span term-uuid="422b0fa8-b181-4c7c-93a2-c553abb34efd" class="glossary-term" data-toggle="popover">payment method</span> to this list.</p>

<p>To implement a payment method rendering in checkout, you need to take the following steps:</p>

<ol>
  <li><a href="#create">Create the <code class="highlighter-rouge">.js</code> file implementing the component (payment method renderer).</a></li>
  <li><a href="#register">Create the <code class="highlighter-rouge">.js</code> component registering the payment method renderer.</a></li>
  <li><a href="#template">Create a template for the payment method renderer.</a></li>
  <li><a href="#layout">Declare the new payment in the checkout page layout.</a></li>
</ol>

<p>All the steps are described further.</p>

<h2 id="create">Create the .js component file</h2>

<p>Your payment method renderer must be implemented as a <span term-uuid="9bcc648c-bd08-4feb-906d-1e24c4f2f422" class="glossary-term" data-toggle="popover">UI component</span>. For the sake of compatibility, upgradability and easy maintenance, do not edit the default Magento code, add your customizations in a separate module. For your checkout customization to be applied correctly, your custom module should depend on the <code class="highlighter-rouge">Magento_Checkout</code> module. 模块依赖 are specified in the <a href="/guides/v2.0/extension-dev-guide/build/composer-integration.html">module’s <code class="highlighter-rouge">composer.json</code></a>. Do not use <code class="highlighter-rouge">Ui</code> for your custom module name, because <code class="highlighter-rouge">%Vendor%_Ui</code> notation, required when specifying paths, might cause issues.</p>

<p>In you custom module directory create the component’s <code class="highlighter-rouge">.js</code> file (payment method renderer). It must be located under the <code class="highlighter-rouge">&lt;your_module_dir&gt;/view/frontend/web/js/view/</code> directory. For example in the Magento modules, the payment methods renderers are stored in the <code class="highlighter-rouge">&lt;Magento_module_dir&gt;/view/frontend/web/js/view/payment/method-renderer/</code> directory.</p>

<p>Usually, your component will extend the default payment method component (default payment method renderer) implemented in the <code class="highlighter-rouge">&lt;Magento_Checkout_module_dir&gt;/view/frontend/web/js/view/payment/default.js</code> file. The following table contains the list of the <code class="highlighter-rouge">default</code> component’s methods.</p>

<table>
   <tbody>
      <tr>
         <th>Method</th>
         <th>描述</th>
      </tr>
      <tr class="even">
         <td>getCode():string</td>
         <td>Returns the code of the payment method</td>
      </tr>
      <tr class="odd">
         <td>getData():object</td>
         <td> Returns an object with the payment data to be sent to the server on selecting a payment method and/or an extension (on pressing Continue button). It must contain data according to <code>\Magento\Quote\Api\Data\PaymentInterface</code>. All the payment information except the method code and purchase order number is passed in the <code>additional_data</code> field.</td>
      </tr>
      <tr class="even">
         <td>placeOrder():bool</td>
         <td>Places an order if all validations passed.</td>
      </tr>
      <tr class="odd">
         <td>selectPaymentMethod():bool</td>
         <td> Adds information about the payment method selected by the user to the Quote JS object.</td>
      </tr>
      <tr class="even">
         <td>isChecked():string</td>
         <td> Returns the code of the selected payment method.</td>
      </tr>
      <tr class="odd">
         <td>isRadioButtonVisible():bool</td>
         <td> Returns <code>true</code> if only one payment method is available.</td>
      </tr>
      <tr class="even">
         <td>getTitle():string</td>
         <td>Returns the payment method title.</td>
      </tr>
      <tr class="odd">
         <td>validate():bool</td>
         <td> Used in the <code>placeOrder()</code> method. So you can override validate() in your module, and this validation will be performed in the scope of <code>placeOrder()</code>.</td>
      </tr>
      <tr class="odd">
         <td>getBillingAddressFormName():string</td>
         <td>Gets the unique billing address name.</td>
      </tr>

      <tr class="even">
         <td>disposeSubscriptions()</td>
         <td>Terminates the object's subscription.</td>
      </tr>
   </tbody>
</table>

<p>The general view of the payment method renderer is the following:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">define</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="s1">'Magento_Checkout/js/view/payment/default'</span>
    <span class="p">],</span>
    <span class="kd">function</span> <span class="p">(</span><span class="nx">Component</span><span class="p">)</span> <span class="p">{</span>
        <span class="s1">'use strict'</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">Component</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
            <span class="na">defaults</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">template</span><span class="p">:</span> <span class="s1">'%path to template%'</span>
            <span class="p">},</span>
            <span class="c1">// add required logic here</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">);</span></code></pre></figure>

<p>If your payment method requires credit cards information, you might use the Magento renderer implementing a credit card form: <a href="https://github.com/magento/magento2/blob/2.0/app/code/Magento/Payment/view/frontend/web/js/view/payment/cc-form.js"><code class="highlighter-rouge">&lt;Magento_Payment_module_dir&gt;/view/frontend/web/js/view/payment/cc-form.js</code></a>. It also extends the default payment renderer, but has the following own methods:</p>

<table>
   <tr>
      <th>Method</th>
      <th>描述</th>
   </tr>
         <tr class="even">
          <td>getData():object</td>
          <td> Returns an object with the payment data to be sent to the server on selecting a payment method and/or an extension (on pressing Continue button). It must contain data according to <code>\Magento\Quote\Api\Data\PaymentInterface</code>. All the payment information except the method code and purchase order number is passed in the <code>additional_data</code> field. Adds credit card data (type, issue date, number, CVV).</td>
     </tr>
   <tr class="odd">
      <td>getCcAvailableTypes():array</td>
      <td> Returns the list of available credit card types.</td>
   </tr>
   <tr class="even">
      <td>getIcons()</td>
      <td>Returns links to the images for available credit card types.</td>
   </tr>
   <tr class="odd">
      <td>getCcMonths()</td>
      <td> Retrieves the month of the credit card expiration date.</td>
   </tr>
   <tr class="even">
      <td>getCcYears()</td>
      <td> Retrieves the year of the credit card expiration date.</td>
   </tr>
   <tr class="odd">
      <td>hasVerification():bool</td>
      <td> A flag that shows if the credit card CVV number is required for this payment. </td>
   </tr>
   <tr class="even">
      <td>hasSsCardType():bool</td>
      <td>Returns <code>true</code> if the Solo and Switch (Maestro) card types are available.</td>
   </tr>
   <tr class="odd">
      <td>getCvvImageUrl():string</td>
      <td> Retrieves the CVV tooltip image URL.</td>
   </tr>
   <tr class="odd">
      <td>getCvvImageHtml():string</td>
      <td> Retrieves the CVV tooltip image HTML.</td>
   </tr>
   <tr class="even">
      <td>getSsStartYears()</td>
      <td>Solo or Switch (Maestro) card start year.</td>
   </tr>
</table>

<h3 id="access-the-system-config-data">Access the system config data</h3>
<p>Your payment method might need to get data that cannot be defined in <span term-uuid="73ab5daa-5857-4039-97df-11269b626134" class="glossary-term" data-toggle="popover">布局</span> configuration, JS 组件 or templates directly, for example, data from the Magento system config.
This configuration is stored in the <code class="highlighter-rouge">window.checkoutConfig</code> variable that is defined in root checkout template.</p>

<p>In order to get access to the system configuration, your payment method or a group of payment methods has to implement the <a href="https://github.com/magento/magento2/blob/2.0/app/code/Magento/Checkout/Model/ConfigProviderInterface.php"><code class="highlighter-rouge">\Magento\Checkout\Model\ConfigProviderInterface</code></a> interface, and the class implementing it must be injected to the composite config provider via DI <span term-uuid="b00459e5-a793-44dd-98d5-852ab33fc344" class="glossary-term" data-toggle="popover">前端</span> configuration. The following code samples illustrate this.</p>

<p>A sample <code class="highlighter-rouge">.php</code> class implementing <code class="highlighter-rouge">\Magento\Checkout\Model\ConfigProviderInterface</code>:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">MyCustomPaymentConfigProvider</span> <span class="k">implements</span> <span class="nx">\Magento\Checkout\Model\ConfigProviderInterface</span>
<span class="p">{</span>
<span class="o">...</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getConfig</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="c1">// 'key' =&amp;gt; 'value' pairs of configuration
</span>        <span class="p">];</span>
    <span class="p">}</span>
<span class="o">...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>A sample DI configuration file of a custom module <code class="highlighter-rouge">&lt;your_module_dir&gt;/etc/frontend/di.xml</code>:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml">...
<span class="nt">&lt;type</span> <span class="na">name=</span><span class="s">"Magento\Checkout\Modерel\CompositeConfigProvider"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;arguments&gt;</span>
        <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"configProviders"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
            ...
            <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"%Custom_provider_name%"</span> <span class="na">xsi:type=</span><span class="s">"object"</span><span class="nt">&gt;</span>MyCustomPaymentConfigProvider<span class="nt">&lt;/item&gt;</span>
            ...
        <span class="nt">&lt;/argument&gt;</span>
    <span class="nt">&lt;/arguments&gt;</span>
...
<span class="nt">&lt;/type&gt;</span></code></pre></figure>

<h3 id="add-other-payment-related-features">Add other payment-related features</h3>
<p>You can also add payment-related features (like reward points, gift registry, an so on) to the Review and Payment Information checkout step. They must be implemented as UI 组件 as well, and can be displayed before or after the list of payment methods. This is configured in the <a href="#layout">checkout page layout file correspondingly</a>.</p>

<h2 id="register">Create the .js component that registers the renderer</h2>
<p>In you custom module directory create the <code class="highlighter-rouge">.js</code> UI component that registers the payment method renderer in the renderers list. It must be located under the <code class="highlighter-rouge">&lt;your_module_dir&gt;/view/frontend/web/js/view/</code> directory. For example in the Magento modules, the payment methods renderers are stored in the <code class="highlighter-rouge">&lt;Magento_module_dir&gt;/view/frontend/web/js/view/payment/</code> directory.</p>

<p>The file content must be similar to the following:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">define</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="s1">'uiComponent'</span><span class="p">,</span>
        <span class="s1">'Magento_Checkout/js/model/payment/renderer-list'</span>
    <span class="p">],</span>
    <span class="kd">function</span> <span class="p">(</span>
        <span class="nx">Component</span><span class="p">,</span>
        <span class="nx">rendererList</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="s1">'use strict'</span><span class="p">;</span>
        <span class="nx">rendererList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="na">type</span><span class="p">:</span> <span class="s1">'%payment_method_code%'</span><span class="p">,</span>
                <span class="na">component</span><span class="p">:</span> <span class="s1">'%js_renderer_component%'</span>
            <span class="p">},</span>
            <span class="c1">// other payment method renderers if required</span>
        <span class="p">);</span>
        <span class="cm">/** Add view logic here if needed */</span>
        <span class="k">return</span> <span class="nx">Component</span><span class="p">.</span><span class="nx">extend</span><span class="p">({});</span>
    <span class="p">}</span>
<span class="p">);</span></code></pre></figure>

<p>If your <span term-uuid="c1e4242b-1f1a-44c3-9d72-1d5b1435e142" class="glossary-term" data-toggle="popover">模块</span> adds several payment methods, you can register all payment methods renderers in one file.</p>

<h2 id="template">Create the template for the payment method component</h2>
<p>In your custom module directory create a new <code class="highlighter-rouge">&lt;your_module_dir&gt;/view/frontend/web/template/&lt;your_template&gt;.html</code> file. The template can use <a href="http://knockoutjs.com/">Knockout JS</a> syntax. You can find a sample <code class="highlighter-rouge">.html</code> template in any module implementing payment methods, for example the Magento_Authorizenet模块. The template for rendering the Authorize.Net payment method in checkout is <a href="https://github.com/magento/magento2/blob/2.0/app/code/Magento/Authorizenet/view/frontend/web/template/payment/authorizenet-directpost.html"><code class="highlighter-rouge">&lt;Magento_Authorizenet_module_dir&gt;/view/frontend/web/template/payment/authorizenet-directpost.html</code></a>.</p>

<h2 id="layout">Declare the payment method in layout</h2>

<p>In your custom module directory, create a new <code class="highlighter-rouge">&lt;your_module_dir&gt;/view/frontend/layout/checkout_index_index.xml</code> file. In this file, add the following:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;page</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="na">layout=</span><span class="s">"1column"</span> <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">"urn:magento:framework:View/Layout/etc/page_configuration.xsd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;referenceBlock</span> <span class="na">name=</span><span class="s">"checkout.root"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;arguments&gt;</span>
                <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"jsLayout"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"组件"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"checkout"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"children"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"steps"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"children"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"billing-step"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                                            <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"component"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>uiComponent<span class="nt">&lt;/item&gt;</span>
                                            <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"children"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                                                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"payment"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                                                    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"children"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                                                        <span class="c">&lt;!-- Declare additional before payment 组件. START --&gt;</span>
                                                        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"beforeMethods"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                                                            <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"component"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>uiComponent<span class="nt">&lt;/item&gt;</span>
                                                            <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"displayArea"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>beforeMethods<span class="nt">&lt;/item&gt;</span>
                                                            <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"children"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                                                                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"%your_feature_name%"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                                                                    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"component"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>%path/to/your/feature_js_component%<span class="nt">&lt;/item&gt;</span>
                                                                <span class="nt">&lt;/item&gt;</span>
                                                            <span class="nt">&lt;/item&gt;</span>
                                                        <span class="nt">&lt;/item&gt;</span>
                                                        <span class="c">&lt;!-- Declare additional before payment 组件. END --&gt;</span>
                                                        <span class="c">&lt;!-- Declare the payment method (the component that registrates in the list). START --&gt;</span>
                                                        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"renders"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                                                            <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"children"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                                                                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"%group name of the payment methods%"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                                                                    <span class="c">&lt;!-- Example of value: Magento_Authorizenet/js/view/payment/authorizenet--&gt;</span>
                                                                    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"component"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>%component_that_registers_payment_renderer%<span class="nt">&lt;/item&gt;</span>
                                                                    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"methods"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>

                                                                        <span class="c">&lt;!-- Add this if your payment method requires entering a billing address--&gt;</span>
                                                                        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"%payment_method_code%"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                                                                            <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"isBillingAddressRequired"</span> <span class="na">xsi:type=</span><span class="s">"boolean"</span><span class="nt">&gt;</span>true<span class="nt">&lt;/item&gt;</span>
                                                                        <span class="nt">&lt;/item&gt;</span>
                                                                    <span class="nt">&lt;/item&gt;</span>
                                                                <span class="nt">&lt;/item&gt;</span>
                                                            <span class="nt">&lt;/item&gt;</span>
                                                            <span class="c">&lt;!-- Declare the payment method (the component that registrates in the list). END --&gt;</span>
                                                            <span class="c">&lt;!-- Declare additional after payment 组件. START --&gt;</span>
                                                            <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"afterMethods"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                                                                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"component"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>uiComponent<span class="nt">&lt;/item&gt;</span>
                                                                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"displayArea"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>afterMethods<span class="nt">&lt;/item&gt;</span>
                                                                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"children"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                                                                    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"%your_feature_name%"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                                                                        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"component"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>%path/to/your/feature_js_component%<span class="nt">&lt;/item&gt;</span>
                                                                    <span class="nt">&lt;/item&gt;</span>
                                                                <span class="nt">&lt;/item&gt;</span>
                                                            <span class="nt">&lt;/item&gt;</span>
                                                            <span class="c">&lt;!-- Declare additional after payment 组件. END --&gt;</span>
                                                        <span class="nt">&lt;/item&gt;</span>
                                                    <span class="nt">&lt;/item&gt;</span>
                                                <span class="nt">&lt;/item&gt;</span>
                                            <span class="nt">&lt;/item&gt;</span>
                                        <span class="nt">&lt;/item&gt;</span>
                                    <span class="nt">&lt;/item&gt;</span>
                                <span class="nt">&lt;/item&gt;</span>
                            <span class="nt">&lt;/item&gt;</span>
                        <span class="nt">&lt;/item&gt;</span>
                    <span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;/argument&gt;</span>
            <span class="nt">&lt;/arguments&gt;</span>
        <span class="nt">&lt;/referenceBlock&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/page&gt;</span></code></pre></figure>

<p>For an illustration of <code class="highlighter-rouge">checkout_index_index.xml</code> where a new payment method is declared, view <a href="https://github.com/magento/magento2/blob/2.0/app/code/Magento/Authorizenet/view/frontend/layout/checkout_index_index.xml">app/code/Magento/Authorizenet/view/frontend/layout/checkout_index_index.xml</a></p>

			
		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

    
  
    
    <div class="github-link">
      <a class="improve-page" href="https://github.com/magento/devdocs/blob/develop/guides/v2.0/howdoi/checkout/checkout_payment.md" target="_blank">
        去GitHub上编辑
      </a>
    </div>
    
  
    
    <div class="new-issue">
      <a href="https://github.com/magento/devdocs/issues/new?title=Feedback on page: /guides/v2.0/howdoi/checkout/checkout_payment.html" target="_blank">反馈</a>
    </div>
    
  
  </div>

	</section>
	<!-- /.content -->

</div> <!-- /.content-container -->


	</div>
	<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav footer-links">
  <li><a href="/guides/v2.0/contributor-guide/contributing_docs.html">成为贡献者</a>
  <li><a href="https://magento.github.io/glossary/index.html?audience=developer">术语表</a></li>
  <li><a href="http://magento.com/legal/terms/privacy/">隐私政策</a></li>
  <li><a href="http://magento.com/legal/terms/">服务条款</a></li>
  <li><a href="http://magento.com/legal/licensing/">许可/商标 常见问题</a></li>
  <li><a href="/guides/v2.0/release-notes/bk-release-notes.html">版本日志</a></li>
  <li><a href="/magento-third-party.html">三方许可</a></li>
</ul>

    </div>

		<div class="copyright-date">&copy; 2018 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/assets/js/app.min.js"></script>


<script src="/common/js/devdocs.min.js"></script>




</body>
</html>

